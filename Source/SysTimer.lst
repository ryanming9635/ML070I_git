C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE SYSTIMER
OBJECT MODULE PLACED IN .\Output\SysTimer.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE SysTimer.c LARGE OPTIMIZE(9,SIZE) BROWSE INCDIR(.\Include\) DEBUG OBJECT
                    -EXTEND CODE LISTINCLUDE SYMBOLS PRINT(.\Source\SysTimer.lst) TABS(2) OBJECT(.\Output\SysTimer.obj)

line level    source

   1          /********************************************************************************/
   2          /*   The  Software  is  proprietary,  confidential,  and  valuable to Realtek   */
   3          /*   Semiconductor  Corporation  ("Realtek").  All  rights, including but not   */
   4          /*   limited  to  copyrights,  patents,  trademarks, trade secrets, mask work   */
   5          /*   rights, and other similar rights and interests, are reserved to Realtek.   */
   6          /*   Without  prior  written  consent  from  Realtek,  copying, reproduction,   */
   7          /*   modification,  distribution,  or  otherwise  is strictly prohibited. The   */
   8          /*   Software  shall  be  kept  strictly  in  confidence,  and  shall  not be   */
   9          /*   disclosed to or otherwise accessed by any third party.                     */
  10          /*   c<2003> - <2012>                                                           */
  11          /*   The Software is provided "AS IS" without any warranty of any kind,         */
  12          /*   express, implied, statutory or otherwise.                                  */
  13          /********************************************************************************/
  14          
  15          //----------------------------------------------------------------------------------------------------
  16          // ID Code      : SysTimer.c No.0000
  17          // Update Note  :
  18          //----------------------------------------------------------------------------------------------------
  19          
  20          #include <math.h>
   1      =1  /*--------------------------------------------------------------------------
   2      =1  MATH.H
   3      =1  
   4      =1  Prototypes for mathematic functions.
   5      =1  Copyright (c) 1988-2008 Keil Elektronik GmbH and Keil Software, Inc.
   6      =1  Copyright (c) 2008-2016 ARM Germany GmbH
   7      =1  All rights reserved.
   8      =1  --------------------------------------------------------------------------*/
   9      =1  
  10      =1  #ifndef __MATH_H__
  11      =1  #define __MATH_H__
  12      =1  
  13      =1  #if defined __CX2__ && (__CX2__ >= 558 || __CX2__ == 556 && __CX2_MINOR__ >= 207)
           =1 #ifndef HUGE_VAL
           =1 #define HUGE_VAL __inf__
           =1 #endif // HUGE_VAL
           =1 
           =1 #ifndef NAN
           =1 #define NAN __nan__
           =1 #endif // NAN
           =1 
           =1 #pragma SAVE
           =1 #pragma FUNCTIONS(STATIC)
           =1 /* intrinsic functions are reentrant, but need static attribute */
           =1 extern int    abs  (int   val);
           =1 #pragma RESTORE
           =1 #endif
  28      =1  
  29      =1  #pragma SAVE
  30      =1  #pragma REGPARMS
  31      =1  #if !defined (__CX2__)
  32      =1  extern char  cabs  (char  val);
  33      =1  extern int    abs  (int   val);
  34      =1  extern long  labs  (long  val);
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 2   

  35      =1  #endif
  36      =1  
  37      =1  extern float fabs  (float val);
  38      =1  extern float sqrt  (float val);
  39      =1  extern float exp   (float val);
  40      =1  extern float log   (float val);
  41      =1  extern float log10 (float val);
  42      =1  extern float sin   (float val);
  43      =1  extern float cos   (float val);
  44      =1  extern float tan   (float val);
  45      =1  extern float asin  (float val);
  46      =1  extern float acos  (float val);
  47      =1  extern float atan  (float val);
  48      =1  extern float sinh  (float val);
  49      =1  extern float cosh  (float val);
  50      =1  extern float tanh  (float val);
  51      =1  extern float atan2 (float y, float x);
  52      =1  
  53      =1  extern float ceil  (float val);
  54      =1  extern float floor (float val);
  55      =1  extern float modf  (float val, float *n);
  56      =1  extern float fmod  (float x, float y);
  57      =1  extern float pow   (float x, float y);
  58      =1  
  59      =1  #if defined (__CX2__)
           =1 extern float frexp (float val, int *exp);
           =1 extern float ldexp (float val, int exp);
           =1 #endif
  63      =1  
  64      =1  #pragma RESTORE
  65      =1  
  66      =1  #endif
  21          #include <stdio.h>
   1      =1  /*--------------------------------------------------------------------------
   2      =1  STDIO.H
   3      =1  
   4      =1  Prototypes for standard I/O functions.
   5      =1  Copyright (c) 1988-2002 Keil Elektronik GmbH and Keil Software, Inc.
   6      =1  All rights reserved.
   7      =1  --------------------------------------------------------------------------*/
   8      =1  
   9      =1  #ifndef __STDIO_H__
  10      =1  #define __STDIO_H__
  11      =1  
  12      =1  #ifndef EOF
  13      =1   #define EOF -1
  14      =1  #endif
  15      =1  
  16      =1  #ifndef NULL
  17      =1   #define NULL ((void *) 0)
  18      =1  #endif
  19      =1  
  20      =1  #ifndef _SIZE_T
  21      =1   #define _SIZE_T
  22      =1   typedef unsigned int size_t;
  23      =1  #endif
  24      =1  
  25      =1  #pragma SAVE
  26      =1  #pragma REGPARMS
  27      =1  extern char _getkey (void);
  28      =1  extern char getchar (void);
  29      =1  extern char ungetchar (char);
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 3   

  30      =1  extern char putchar (char);
  31      =1  extern int printf   (const char *, ...);
  32      =1  extern int sprintf  (char *, const char *, ...);
  33      =1  extern int vprintf  (const char *, char *);
  34      =1  extern int vsprintf (char *, const char *, char *);
  35      =1  extern char *gets (char *, int n);
  36      =1  extern int scanf (const char *, ...);
  37      =1  extern int sscanf (char *, const char *, ...);
  38      =1  extern int puts (const char *);
  39      =1  
  40      =1  #pragma RESTORE
  41      =1  
  42      =1  #endif
  43      =1  
  22          
  23          #include "Config.h"
   1      =1  /*****************************************************************************/
   2      =1  /*                                                                                              */
   3      =1  /*  TELI ML070I   MCU                                             */
   4      =1  /*                                                                                              */
   5      =1  /*****************************************************************************/
   6      =1  
   7      =1  #ifndef __CONFIG_H__
   8      =1  #define __CONFIG_H__
   9      =1  
  10      =1  //#define INTERNAL_MCU -- defined by Project Compiler session
  11      =1  //#define   HS      
  12      =1  //#define   E_Wintek  
  13      =1  //#define   AWT 
  14      =1  //#define Holtz
  15      =1  
  16      =1  
  17      =1  
  18      =1  //#define QUAD
  19      =1  /*
  20      =1  #ifdef QUAD
  21      =1    #define AWT_ML072Q
  22      =1  #else
  23      =1    #define AWT_ML072S
  24      =1  #endif
  25      =1  */
  26      =1  //#define SUPPORT_SVIDEO                     //andy Awt 20090914
  27      =1  //#define SUPPORT_COMPONENT     // support component analog to decoder//andy Awt 20090914
  28      =1  
  29      =1  //#define SUPPORT_DTV           // support DTV input through component( to ADC ).//andy Awt 20090914
  30      =1  //#define SUPPORT_PC          // support PC function
  31      =1  //#define SUPPORT_DVI       // support DVI input
  32      =1  //#define SUPPORT_SDCARD
  33      =1  
  34      =1  //#define SUPPORT_RS485
  35      =1  //-----------------------------------------------------------------------------
  36      =1  //    Firmware Version
  37      =1  //-----------------------------------------------------------------------------
  38      =1  #define FWVER     0x0001      // Rev 0001
  39      =1  
  40      =1  #define MCU_FW_Major      0x00      
  41      =1  #define MCU_FW_Sub0     0x00      
  42      =1  #define MCU_FW_Sub1     0x01      
  43      =1  //-----------------------------------------------------------------------------
  44      =1  //    Compiler
  45      =1  //-----------------------------------------------------------------------------
  46      =1  #define KEILC           // Keil C 5.0
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 4   

  47      =1  //-----------------------------------------------------------------------------
  48      =1  //    MPU Clock
  49      =1  //-----------------------------------------------------------------------------
  50      =1  #ifndef INTERNAL_MCU
  51      =1  //#define CLOCK_11M         // 11.0592MHz
  52      =1  #define CLOCK_22M         // 22.1184MHz
  53      =1  #else                 // INTERNAL_MCU
           =1 #define CLOCK_27M         // 27MHz
           =1 #define REG_START_ADDRESS 0xc000    // register start 0xc000, for page0, 0xc100-page1 
           =1 #endif
  57      =1  //-----------------------------------------------------------------------------
  58      =1  //    TW88 Version
  59      =1  //-----------------------------------------------------------------------------
  60      =1  #define TW8816
  61      =1  //-----------------------------------------------------------------------------
  62      =1  //    Options for Backlight control
  63      =1  //-----------------------------------------------------------------------------
  64      =1  //#define BACKLIGHT_CCFL
  65      =1  //#define BACKLIGHT_LED
  66      =1  #define BACKLIGHT_PWM
  67      =1  
  68      =1  //-----------------------------------------------------------------------------
  69      =1  //    Panel Resolution
  70      =1  //-----------------------------------------------------------------------------
  71      =1  // ---- Select Default Panel
  72      =1  //
  73      =1  //#define UXGA            // 1600 x 1200
  74      =1  //#define SXGA              // 1280 x 1024
  75      =1  //#define XGA  // 1024 x 768
  76      =1  /*
  77      =1  #ifdef XGA
  78      =1    #define LVDS          
  79      =1    #define PWIDTH  1024
  80      =1    #define PHEIGHT 768
  81      =1  #endif
  82      =1  //#define SVGA            //  800 x 600
  83      =1  #define VGA             //  640 x 480
  84      =1  #ifdef VGA
  85      =1    #define PWIDTH  640
  86      =1    #define PHEIGHT 480
  87      =1    //#define HITACHI_640_B_160   //--> 640 x 160
  88      =1    #define AND_640_480
  89      =1  #endif
  90      =1  //#define WXGA            // 1280 x 768 (15:9) // 1366 x 768 (16:9)
  91      =1  #ifdef WXGA
  92      =1      //#define WX_SHARP_LQ106K1LA
  93      =1    #define PWIDTH  1280
  94      =1    #define PHEIGHT 768
  95      =1  #endif
  96      =1  //#define WSVGA           // 1024 x 600 *** only video mode
  97      =1  #ifdef WSVGA
  98      =1    #define PWIDTH  1024
  99      =1    #define PHEIGHT 600
 100      =1    #define UNIDEN_1024_600
 101      =1  #endif
 102      =1  */
 103      =1  //#define WVGA            //  800 x 480
 104      =1  //#ifdef WVGA
 105      =1    //#define PWIDTH  800
 106      =1    //#define PHEIGHT 480//600
 107      =1    // If WVGA, you have to select panel.
 108      =1    //#define AU_10INCH
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 5   

 109      =1    //#define WVGA_TPO
 110      =1    //#define SAMSUNG_10INCH
 111      =1    //#define SAMSUNG_TICONLESS_10INCH
 112      =1    //#define SHARP_TICONLESS_7INCH
 113      =1    //#define AU_TICONLESS_7INCH
 114      =1    //#define AU_G084SN05V8_8_4INCH 
 115      =1  //  #define HSD070IDW1_7INCH
 116      =1    //#define INNOLUX_AT080TN03
 117      =1    //#define AU_TICONLESS_7INCH_CCFL
 118      =1    //#define CMO     // CHIMEI panel
 119      =1    //#define AU_TICONLESS_10INCH
 120      =1    //#define HITACHI_T01
 121      =1    //#define HITACHI_TX23D12
 122      =1    //#define HITACHI_TX18D24
 123      =1    //#define HITACHI_TX18D16
 124      =1    //#define TMD_LTA070A320F
 125      =1    //#define TMD_LTA080B
 126      =1  //#endif  //WVGA
 127      =1  //#define HVGA            //  480 x 320
 128      =1  //#define QVGA            //  320 x 240 *** only video mode
 129      =1  /*
 130      =1  #ifdef QVGA
 131      =1    #define PWIDTH  320
 132      =1    #define PHEIGHT 240
 133      =1    //#define HITACHI_TX09D73
 134      =1    //#define AU_DELTARGB
 135      =1    //#define SHARP_LQ050Q5DR01
 136      =1    //#define SHARP_LQ035
 137      =1    //#define TMD
 138      =1  #endif
 139      =1  
 140      =1  //#define WQVGA           //  480 x 234 *** only video mode
 141      =1  #ifdef WQVGA
 142      =1    #define PWIDTH  480
 143      =1    #define PHEIGHT 240
 144      =1    // If WQVGA, you have to select panel 
 145      =1      #define ANALOG_7INCH
 146      =1    //#define PWIDTH  400
 147      =1    //#define PHEIGHT 240
 148      =1    //#define SHARP_LQ043T3DX02   //  400 x 237
 149      =1    //#define LG_ANALOG
 150      =1    //#define TMD_ANALOG        //TMD_LTA05B352A
 151      =1    //#define T_51945GD       // Optorex Panel
 152      =1  #endif  // WQVGA
 153      =1  */
 154      =1  //if LVDS pannel disable TICONLESS
 155      =1  
 156      =1  //-----------------------------------------------------------------------------
 157      =1  //---- Add Support One more panel with DIPSW#1
 158      =1  //---- Ex. Add Analog AU 7" Panel with Default Panel for evalution
 159      =1  //#define ADD_ANALOGPANEL   // Added Analog panel(AU7") from default set panel(expect WQVGA) with DIP #1 sw
             -itch.(DIP#1=L:ANALOG, H:DEFAULT)
 160      =1                // It can't support WQVGA and ADD_ANALOGPANEL same time!!
 161      =1    //#define ADD_ANALOG_7INCH
 162      =1    //#define ADD_TMD_LTA05B352A
 163      =1                    
 164      =1  //---- Support Wide panel function
 165      =1  /*
 166      =1  #if (defined WXGA) || (defined WSVGA) || (defined WVGA) || (defined WQVGA)
 167      =1  #define WIDE_SCREEN         // Can support 4 display mode, i.e. Normal, Wide, Full, Zoom
 168      =1  #endif                // Tested panasonic WVGA panel.
 169      =1  */
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 6   

 170      =1  //-----------------------------------------------------------------------------
 171      =1  //    Panel Vendor Specific
 172      =1  //-----------------------------------------------------------------------------
 173      =1  /*
 174      =1  //-----------------------------------------------------------------------------
 175      =1  //    TV Tuner
 176      =1  //-----------------------------------------------------------------------------
 177      =1  #define PHILIPS       0
 178      =1  #define ALPS        1   // ALPS, LG
 179      =1  #define TEMIC       2
 180      =1  #define TVAVA       3
 181      =1  #define LGTUNER       4
 182      =1  #define SAMSUNGMUTITUNER  5
 183      =1  
 184      =1  #define TVTunerDevice   4
 185      =1  //-----------------------------------------------------------------------------
 186      =1  //    IR Remote Controller Type
 187      =1  //-----------------------------------------------------------------------------
 188      =1  //#define REMO_RC5          // RC5 style
 189      =1  #define TECHWELL_REMOCON
 190      =1  //#define REMO_NEC          // NEC style
 191      =1  //#define PHILIPS_REMOCON // New remocon 
 192      =1  */
 193      =1  
 194      =1  //-----------------------------------------------------------------------------
 195      =1  //    I2C Device Access Address Mapping
 196      =1  //-----------------------------------------------------------------------------
 197      =1  #define EEPROMI2CAddress  0xa0  // EEPROM (24C16)
 198      =1  #define TW88I2CAddress    0x8a  // TW880x
 199      =1  
 200      =1  /*
 201      =1  #define MSPI2CAddress   0x80  // MSP
 202      =1  #define ALC106I2CAddress    0x4A  // MSP
 203      =1  */
 204      =1  #define  AD5110I2CAddress    0x5E//0x58
 205      =1  
 206      =1  //-----------------------------------------------------------------------------
 207      =1  //    AD5110 Command Operation Truth table
 208      =1  //-----------------------------------------------------------------------------
 209      =1  
 210      =1  #define AD5110_CMD_No_Operation           0
 211      =1  #define AD5110_CMD_Write_RDAC_To_EEPROM       1
 212      =1  #define AD5110_CMD_Write_Data_To_RDAC       2
 213      =1  #define AD5110_CMD_Shutdown             3
 214      =1  #define AD5110_CMD_Soft_Refresh_RDAC    4
 215      =1  #define AD5110_CMD_Read_RDAC        5
 216      =1  #define AD5110_CMD_Read_EEPROM              6
 217      =1  
 218      =1  
 219      =1  
 220      =1  //-----------------------------------------------------------------------------
 221      =1  //    Options for Possible Inputs
 222      =1  //-----------------------------------------------------------------------------
 223      =1  
 224      =1  
 225      =1  
 226      =1  
 227      =1  
 228      =1  //-----------------------------------------------------------------------------
 229      =1  //    Options for Possible Standards
 230      =1  //    Default:NTSC
 231      =1  //-----------------------------------------------------------------------------
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 7   

 232      =1  /*
 233      =1  #define SUPPORT_PAL     
 234      =1  #define SUPPORT_SECAM
 235      =1  #define SUPPORT_NTSC4   
 236      =1  #define SUPPORT_PALM  
 237      =1  #define SUPPORT_PALN    
 238      =1  #define SUPPORT_PAL60   
 239      =1  */
 240      =1  
 241      =1  //#define ID_CHECK_BY_FW        // in Video mode, check input system ID by firmware
 242      =1  
 243      =1  //-----------------------------------------------------------------------------
 244      =1  //    Options for Debugging/Release
 245      =1  //-----------------------------------------------------------------------------
 246      =1  //#define SUPPORT_PATTERN       // support LCD test pattern
 247      =1  
 248      =1  /*
 249      =1  #ifndef WQVGA
 250      =1    #ifndef QVGA
 251      =1    #define SUPPORT_OSDPOSITIONMOVE
 252      =1    #endif
 253      =1  #endif
 254      =1  */
 255      =1  #define SERIAL              // include serial communication routines
 256      =1  //#define USE_HI3521_UART2
 257      =1  
 258      =1  //#define SUPPORT_DEBUG       // Support to use Read & Write in debug OSD Window by remocon.
 259      =1  
 260      =1  //#define DEBUG           // include debug information
 261      =1  #if 0///def DEBUG
           =1   //#define DEBUG_MAIN
           =1   //#define DEBUG_TIME
           =1   //#define DEBUG_KEYREMO
           =1   //#define DEBUG_TW88
           =1   //#define DEBUG_DECODER
           =1   //#define DEBUG_I2C
           =1   //#define DEBUG_EEP
           =1   //#define DEBUG_OSD
           =1   //#define DEBUG_AUDIO
           =1   //#define DEBUG_SETPANEL
           =1   //#define DEBUG_DTV
           =1   #define DEBUG_PC
           =1   //#define DEBUG_PC_MEAS
           =1   #define DEBUG_PC_COLOR
           =1   //#define DEBUG_COMPONENT
           =1   //#define DEBUG_BANK
           =1   //#define DEBUG_PAUSE
           =1   //#define DEBUG_MCU
           =1 #endif
 281      =1  
 282      =1  //#define AUTOCALC_PC         // in PC mode, Enable Auto Calcuration
 283      =1  //#define SUPPORT_USERCOLORFROMTXT  // Use color setting of text file in Color mode=USER MODE which is as B
             -rightness(Reg10), Contast(Reg11),
 284      =1                    //    Sat_U(Reg13),Sat_V(Reg14),Sharpness(Reg12,Reg78)                  
 285      =1  //#define SUPPORT_GAMMA
 286      =1  
 287      =1  //#define CHIP_MANUAL_TEST      // DIPSW#1
 288      =1  
 289      =1  //#ifndef INTERNAL_MCU
 290      =1  //#define NO_INITIALIZE       // After Power switch turn on with DIP SW4 Enable(Low), or pressed MENU button 
             -for internal MCU
 291      =1                                      //     micom works to access only I2C bus by serial command.
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 8   

 292      =1  //#endif
 293      =1  
 294      =1  //#define SUPPORT_KRS_OSDDEMO   // For KRS Company Demo 
 295      =1  //#define SUPPORT_LINE_OSDDEMO
 296      =1  
 297      =1  //-----------------------------------------------------------------------------
 298      =1  //    Special Features
 299      =1  //-----------------------------------------------------------------------------
 300      =1  
 301      =1  //#ifndef INTERNAL_MCU
 302      =1  //#define SUPPORT_DELTA_RGB
 303      =1  //#endif
 304      =1  //#define SUPPORT_SELECTKEY     // choose the keymap of using select key or left,right key.
 305      =1  //-----------------------------------------------------------------------------
 306      =1  
 307      =1  //#define HS_NEWOSDMENU     //Weylis -@121008 for Hor. Style OSD
 308      =1  //#define HS_NEWOSDMENU_2     //Weylis -@121008 for Hor. Style OSD(2 line)
 309      =1  #endif  //__CONFIG_H__
  24          
  25          #include "reg.h"
   1      =1  //
   2      =1  //Registers.h : Register declaration
   3      =1  //
   4      =1  
   5      =1  #ifndef __REGISTERS__
   6      =1  #define __REGISTERS__
   7      =1  
   8      =1  #ifdef INTERNAL_MCU
           =1 /*  BYTE Registers  */
           =1 sfr P0    = 0x80;
           =1 sfr P1    = 0x90;
           =1 sfr P2    = 0xA0;
           =1 sfr P3    = 0xB0;
           =1 sfr PSW   = 0xD0;
           =1 sfr ACC   = 0xE0;
           =1 sfr B     = 0xF0;
           =1 sfr SP    = 0x81;
           =1 sfr DPL   = 0x82;
           =1 sfr DPH   = 0x83;
           =1 sfr PCON  = 0x87;
           =1 sfr TCON  = 0x88;
           =1 sfr TMOD  = 0x89;
           =1 sfr TL0   = 0x8A;
           =1 sfr TL1   = 0x8B;
           =1 sfr TH0   = 0x8C;
           =1 sfr TH1   = 0x8D;
           =1 sfr IE    = 0xA8;
           =1 sfr IP    = 0xB8;
           =1 sfr SCON  = 0x98;
           =1 sfr SBUF  = 0x99;
           =1 
           =1 //sfr P4    = 0xd8;
           =1 
           =1 /*  8052 Extensions  */
           =1 sfr EXIF  = 0x91;   // external interrupt 2,3,4,5 flags should be cleared by software
           =1 sfr T2CON = 0xC8;
           =1 sfr RCAP2L = 0xCA;
           =1 sfr RCAP2H = 0xCB;
           =1 sfr TL2   = 0xCC;
           =1 sfr TH2   = 0xCD;
           =1 sfr EICON = 0xD8;
           =1 sfr EIE   = 0xE8;
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 9   

           =1 sfr EIP   = 0xF8;
           =1 
           =1 /*  TW88 Core Extension */
           =1 sfr BANKREG   = 0x9A;
           =1 sfr SPICONTROL  = 0x9B;
           =1 sfr T0HIGH    = 0x9C;
           =1 sfr T0LOW     = 0x9D;
           =1 sfr T1HIGH    = 0x9E;
           =1 sfr T1LOW     = 0x9F;
           =1 sfr T2HIGH    = 0x93;
           =1 sfr T2LOW     = 0x94;
           =1 
           =1 /*  BIT Registers  */
           =1 /*  PSW  */
           =1 sbit CY    = 0xD7;
           =1 sbit AC    = 0xD6;
           =1 sbit F0    = 0xD5;
           =1 sbit RS1   = 0xD4;
           =1 sbit RS0   = 0xD3;
           =1 sbit OV    = 0xD2;
           =1 sbit P     = 0xD0;
           =1 
           =1 /*  TCON  */
           =1 sbit TF1   = 0x8F;
           =1 sbit TR1   = 0x8E;
           =1 sbit TF0   = 0x8D;
           =1 sbit TR0   = 0x8C;
           =1 sbit IE1   = 0x8B;
           =1 sbit IT1   = 0x8A;
           =1 sbit IE0   = 0x89;
           =1 sbit IT0   = 0x88;
           =1 
           =1 /*  IE  */
           =1 sbit EA    = 0xAF;
           =1 sbit ES    = 0xAC;
           =1 sbit ET1   = 0xAB;
           =1 sbit EX1   = 0xAA;
           =1 sbit ET0   = 0xA9;
           =1 sbit EX0   = 0xA8;
           =1 
           =1 /*  EIE  */
           =1 sbit EWDI  = 0xEC;    // Watch dog timer interrupt enable
           =1 sbit EX5   = 0xEB;    // external interrupt 5 enable
           =1 sbit EX4   = 0xEA;    // external interrupt 4 enable
           =1 sbit EX3   = 0xE9;    // external interrupt 3 enable
           =1 sbit EX2   = 0xE8;    // external interrupt 2 enable
           =1 
           =1 /*  IP  */
           =1 sbit PS    = 0xBC;
           =1 sbit PT1   = 0xBB;
           =1 sbit PX1   = 0xBA;
           =1 sbit PT0   = 0xB9;
           =1 sbit PX0   = 0xB8;
           =1 
           =1 /*  EIP  */
           =1 sbit PWDI  = 0xFC;    // Watch dog timer interrupt priority
           =1 sbit PX5   = 0xFB;    // external interrupt5 priority
           =1 sbit PX4   = 0xFA;    // external interrupt4 priority
           =1 sbit PX3   = 0xF9;    // external interrupt3 priority
           =1 sbit PX2   = 0xF8;    // external interrupt2 priority
           =1 
           =1 /*  P3  */
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 10  

           =1 sbit RD    = 0xB7;
           =1 sbit WR    = 0xB6;
           =1 sbit T1    = 0xB5;
           =1 sbit T0    = 0xB4;
           =1 sbit INT1  = 0xB3;
           =1 sbit INT0  = 0xB2;
           =1 sbit TXD   = 0xB1;
           =1 sbit RXD   = 0xB0;
           =1 
           =1 /*  SCON  */
           =1 sbit SM0   = 0x9F;
           =1 sbit SM1   = 0x9E;
           =1 sbit SM2   = 0x9D;
           =1 sbit REN   = 0x9C;
           =1 sbit TB8   = 0x9B;
           =1 sbit RB8   = 0x9A;
           =1 sbit TI    = 0x99;
           =1 sbit RI    = 0x98;
           =1 
           =1 /*  8052 Extensions  */
           =1 /*  IE  */
           =1 sbit ET2   = 0xAD;
           =1 
           =1 /*  IP  */
           =1 sbit PT2   = 0xBD;
           =1 
           =1 /*  P1  */
           =1 sbit T2EX  = 0x91;
           =1 sbit T2    = 0x90;
           =1              
           =1 /*  T2CON  */
           =1 sbit TF2   = 0xCF;
           =1 sbit EXF2  = 0xCE;
           =1 sbit RCLK  = 0xCD;
           =1 sbit TCLK  = 0xCC;
           =1 sbit EXEN2 = 0xCB;
           =1 sbit TR2   = 0xCA;
           =1 sbit C_T2  = 0xC9;
           =1 sbit CP_RL2= 0xC8;
           =1 
           =1 sfr CHPENR = 0xF6;
           =1 sfr CHPCON = 0xBF;
           =1 sfr SFRAL  = 0xC4;
           =1 sfr SFRAH  = 0xC5;
           =1 sfr SFRFD  = 0xC6;
           =1 sfr SFRCN  = 0xC7;
           =1 
           =1 sbit P0_0  = 0x80;
           =1 sbit P0_1  = 0x81;
           =1 sbit P0_2  = 0x82;
           =1 sbit P0_3  = 0x83;
           =1 sbit P0_4  = 0x84;
           =1 sbit P0_5  = 0x85;
           =1 sbit P0_6  = 0x86;
           =1 sbit P0_7  = 0x87;
           =1 
           =1 sbit P1_0  = 0x90;
           =1 sbit P1_1  = 0x91;
           =1 sbit P1_2  = 0x92;
           =1 sbit P1_3  = 0x93;
           =1 sbit P1_4  = 0x94;
           =1 sbit P1_5  = 0x95;
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 11  

           =1 sbit P1_6  = 0x96;
           =1 sbit P1_7  = 0x97;
           =1 
           =1 sbit P2_0  = 0xa0;
           =1 sbit P2_1  = 0xa1;
           =1 sbit P2_2  = 0xa2;
           =1 sbit P2_3  = 0xa3;
           =1 sbit P2_4  = 0xa4;
           =1 sbit P2_5  = 0xa5;
           =1 sbit P2_6  = 0xa6;
           =1 sbit P2_7  = 0xa7;
           =1 
           =1 sbit P3_0  = 0xb0;
           =1 sbit P3_1  = 0xb1;
           =1 sbit P3_2  = 0xb2;
           =1 sbit P3_3  = 0xb3;
           =1 sbit P3_4  = 0xb4;
           =1 sbit P3_5  = 0xb5;
           =1 sbit P3_6  = 0xb6;
           =1 sbit P3_7  = 0xb7;
           =1 
           =1 #else // external MCU=WINBOND
 189      =1  /*  BYTE Registers  */
 190      =1  sfr P0    = 0x80;
 191      =1  sfr P1    = 0x90;
 192      =1  sfr P2    = 0xA0;
 193      =1  sfr P3    = 0xB0;
 194      =1  sfr PSW   = 0xD0;
 195      =1  sfr ACC   = 0xE0;
 196      =1  sfr B     = 0xF0;
 197      =1  sfr SP    = 0x81;
 198      =1  sfr DPL   = 0x82;
 199      =1  sfr DPH   = 0x83;
 200      =1  sfr PCON  = 0x87;
 201      =1  sfr TCON  = 0x88;
 202      =1  sfr TMOD  = 0x89;
 203      =1  sfr TL0   = 0x8A;
 204      =1  sfr TL1   = 0x8B;
 205      =1  sfr TH0   = 0x8C;
 206      =1  sfr TH1   = 0x8D;
 207      =1  sfr CKCON = 0x8E;   //clock control register, default =0x01
 208      =1  sfr IE    = 0xA8;
 209      =1  sfr IP    = 0xB8;
 210      =1  sfr SCON  = 0x98;
 211      =1  sfr SBUF  = 0x99;
 212      =1  sfr P4 = 0xE8; //Megawin Ryan@970716
 213      =1  //sfr P4    = 0xa5;      //SST MCU
 214      =1  //sfr P4    = 0xd8;   //winbond<960820>
 215      =1  
 216      =1  
 217      =1  /*  8052 Extensions  */
 218      =1  sfr ADCTL = 0xC5;   //william-20111017
 219      =1  sfr ADCV = 0xC6;    //william-20111017
 220      =1  sfr ADCVL = 0xE8;   //william-20111017
 221      =1  sfr T2CON = 0xC8;
 222      =1  sfr RCAP2L = 0xCA;
 223      =1  sfr RCAP2H = 0xCB;
 224      =1  sfr TL2   = 0xCC;
 225      =1  sfr TH2   = 0xCD;
 226      =1  
 227      =1  // for UART2
 228      =1  sfr S2CON  = 0xAA;
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 12  

 229      =1  sfr S2BRT  = 0xBA;
 230      =1  sfr S2BUF  = 0x9A;
 231      =1  sfr AUXR2  = 0xA6;
 232      =1  sfr AUXIE  = 0xAD;
 233      =1  
 234      =1  
 235      =1  sfr P1M0  = 0x91;
 236      =1  sfr P1M1  = 0x92;
 237      =1  sfr P0M0  = 0x93;
 238      =1  sfr P0M1  = 0x94;
 239      =1  sfr P2M0  = 0x95;
 240      =1  sfr P2M1  = 0x96;
 241      =1  sfr P3M0  = 0xB1;
 242      =1  sfr P3M1  = 0xB2;
 243      =1  
 244      =1  
 245      =1  // for PCA
 246      =1  sfr CCON   = 0xD8;
 247      =1  sfr CMOD   = 0xD9;
 248      =1  sfr CCAPM0 = 0xDA;
 249      =1  sfr CCAPM1 = 0xDB;
 250      =1  sfr CCAPM2 = 0xDC;
 251      =1  sfr CCAPM3 = 0xDD;
 252      =1  sfr CCAPM4 = 0xDE;
 253      =1  sfr CCAPM5 = 0xDF;
 254      =1  sfr CL     = 0xE9;
 255      =1  sfr CH     = 0xF9;
 256      =1  sfr CCAP0L = 0xEA;
 257      =1  sfr CCAP0H = 0xFA;
 258      =1  sfr CCAP1L = 0xEB;
 259      =1  sfr CCAP1H = 0xFB;
 260      =1  sfr CCAP2L = 0xEC;
 261      =1  sfr CCAP2H = 0xFC;
 262      =1  sfr CCAP3L = 0xED;
 263      =1  sfr CCAP3H = 0xFD;
 264      =1  sfr CCAP4L = 0xEE;
 265      =1  sfr CCAP4H = 0xFE;
 266      =1  sfr CCAP5L = 0xEF;
 267      =1  sfr CCAP5H = 0xFF;
 268      =1  sfr PCAPWM0= 0xF2;
 269      =1  sfr PCAPWM1= 0xF3;
 270      =1  sfr PCAPWM2= 0xF4;
 271      =1  sfr PCAPWM3= 0xF5;
 272      =1  sfr PCAPWM4= 0xF6;
 273      =1  sfr PCAPWM5= 0xF7;
 274      =1  
 275      =1  /*  BIT Registers  */
 276      =1  /*  PSW  */
 277      =1  sbit CY    = 0xD7;
 278      =1  sbit AC    = 0xD6;
 279      =1  sbit F0    = 0xD5;
 280      =1  sbit RS1   = 0xD4;
 281      =1  sbit RS0   = 0xD3;
 282      =1  sbit OV    = 0xD2;
 283      =1  sbit P     = 0xD0;
 284      =1  
 285      =1  /*  TCON  */
 286      =1  sbit TF1   = 0x8F;
 287      =1  sbit TR1   = 0x8E;
 288      =1  sbit TF0   = 0x8D;
 289      =1  sbit TR0   = 0x8C;
 290      =1  sbit IE1   = 0x8B;
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 13  

 291      =1  sbit IT1   = 0x8A;
 292      =1  sbit IE0   = 0x89;
 293      =1  sbit IT0   = 0x88;
 294      =1  
 295      =1  /*  IE  */
 296      =1  sbit EA    = 0xAF;
 297      =1  sbit ES    = 0xAC;
 298      =1  sbit ET1   = 0xAB;
 299      =1  sbit EX1   = 0xAA;
 300      =1  sbit ET0   = 0xA9;
 301      =1  sbit EX0   = 0xA8;
 302      =1  
 303      =1  /*  IP  */
 304      =1  sbit PS    = 0xBC;
 305      =1  sbit PT1   = 0xBB;
 306      =1  sbit PX1   = 0xBA;
 307      =1  sbit PT0   = 0xB9;
 308      =1  sbit PX0   = 0xB8;
 309      =1  
 310      =1  /*  P3  */
 311      =1  sbit RD    = 0xB7;
 312      =1  sbit WR    = 0xB6;
 313      =1  sbit T1    = 0xB5;
 314      =1  sbit T0    = 0xB4;
 315      =1  sbit INT1  = 0xB3;
 316      =1  sbit INT0  = 0xB2;
 317      =1  sbit TXD   = 0xB1;
 318      =1  sbit RXD   = 0xB0;
 319      =1  
 320      =1  /*  SCON  */
 321      =1  sbit SM0   = 0x9F;
 322      =1  sbit SM1   = 0x9E;
 323      =1  sbit SM2   = 0x9D;
 324      =1  sbit REN   = 0x9C;
 325      =1  sbit TB8   = 0x9B;
 326      =1  sbit RB8   = 0x9A;
 327      =1  sbit TI    = 0x99;
 328      =1  sbit RI    = 0x98;
 329      =1  
 330      =1  /*  8052 Extensions  */
 331      =1  /*  IE  */
 332      =1  sbit ET2   = 0xAD;
 333      =1  
 334      =1  /*  IP  */
 335      =1  sbit PT2   = 0xBD;
 336      =1  
 337      =1  /*  P1  */
 338      =1  sbit T2EX  = 0x91;
 339      =1  sbit T2    = 0x90;
 340      =1               
 341      =1  /*  T2CON  */
 342      =1  sbit TF2   = 0xCF;
 343      =1  sbit EXF2  = 0xCE;
 344      =1  sbit RCLK  = 0xCD;
 345      =1  sbit TCLK  = 0xCC;
 346      =1  sbit EXEN2 = 0xCB;
 347      =1  sbit TR2   = 0xCA;
 348      =1  sbit C_T2  = 0xC9;
 349      =1  sbit CP_RL2= 0xC8;
 350      =1  
 351      =1  sfr CHPENR = 0xF6;
 352      =1  sfr CHPCON = 0xBF;
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 14  

 353      =1  sfr SFRAL  = 0xC4;
 354      =1  sfr SFRAH  = 0xC5;
 355      =1  sfr SFRFD  = 0xC6;
 356      =1  sfr SFRCN  = 0xC7;
 357      =1  
 358      =1  sbit P0_0  = 0x80;
 359      =1  sbit P0_1  = 0x81;
 360      =1  sbit P0_2  = 0x82;
 361      =1  sbit P0_3  = 0x83;
 362      =1  sbit P0_4  = 0x84;
 363      =1  sbit P0_5  = 0x85;
 364      =1  sbit P0_6  = 0x86;
 365      =1  sbit P0_7  = 0x87;
 366      =1  
 367      =1  sbit P1_0  = 0x90;
 368      =1  sbit P1_1  = 0x91;
 369      =1  sbit P1_2  = 0x92;
 370      =1  sbit P1_3  = 0x93;
 371      =1  sbit P1_4  = 0x94;
 372      =1  sbit P1_5  = 0x95;
 373      =1  sbit P1_6  = 0x96;
 374      =1  sbit P1_7  = 0x97;
 375      =1  
 376      =1  sbit P2_0  = 0xa0;
 377      =1  sbit P2_1  = 0xa1;
 378      =1  sbit P2_2  = 0xa2;
 379      =1  sbit P2_3  = 0xa3;
 380      =1  sbit P2_4  = 0xa4;
 381      =1  sbit P2_5  = 0xa5;
 382      =1  sbit P2_6  = 0xa6;
 383      =1  sbit P2_7  = 0xa7;
 384      =1  
 385      =1  sbit P3_0  = 0xb0;
 386      =1  sbit P3_1  = 0xb1;
 387      =1  sbit P3_2  = 0xb2;
 388      =1  sbit P3_3  = 0xb3;
 389      =1  sbit P3_4  = 0xb4;
 390      =1  sbit P3_5  = 0xb5;
 391      =1  sbit P3_6  = 0xb6;
 392      =1  sbit P3_7  = 0xb7;
 393      =1  
 394      =1  sbit P4_0  = P4^0;
 395      =1  sbit P4_1  = P4^1;
 396      =1  sbit P4_2  = P4^2;
 397      =1  sbit P4_3  = P4^3;
 398      =1  #endif  // INTERNAL_MCU
 399      =1  
 400      =1  #endif  //__REGISTERS__
  26          #include "typedefs.h"
   1      =1  #ifndef __TYPEDEFS__
   2      =1  #define __TYPEDEFS__
   3      =1  
   4      =1  
   5      =1  #define DATA    data
   6      =1  #define PDATA   pdata
   7      =1  #define IDATA   data
   8      =1  #define CODE    code
   9      =1  #define CODE_P
  10      =1  #define PDATA_P
  11      =1  #define IDATA_P
  12      =1  #define DATA_P
  13      =1  
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 15  

  14      =1  #define INTERRUPT( num, name ) name() interrupt num
  15      =1  
  16      =1  #define _between(x, a, b) (a<=x && x<=b)
  17      =1  #define _swap(a, b)     { a^=b; b^=a; a^=b; }
  18      =1  
  19      =1  #define SEC(x)                                  (1000 * (x))
  20      =1  
  21      =1  typedef unsigned char Register;
  22      =1  typedef unsigned char BYTE;
  23      =1  typedef unsigned short  WORD;
  24      =1  typedef unsigned long DWORD;
  25      =1  
  26      =1  #define TRUE  1
  27      =1  #define FALSE 0
  28      =1  #define _TRUE 1
  29      =1  #define _FALSE  0
  30      =1  
  31      =1  //VInputStdDetectMode
  32      =1  #define AUTO  0
  33      =1  
  34      =1  //VInputStd
  35      =1  #define NTSC  1     
  36      =1  #define PAL   2
  37      =1  #define SECAM 3
  38      =1  #define NTSC4 4
  39      =1  #define PALM  5
  40      =1  #define PALN  6
  41      =1  #define PAL60 7
  42      =1  
  43      =1  #define MAXINPUTSTD PAL60+1 // 
  44      =1  
  45      =1  #define UNKNOWN 0xfe
  46      =1  #define NOINPUT 0 //0xff
  47      =1  
  48      =1  
  49      =1  
  50      =1  
  51      =1  #define NIL     0xff
  52      =1  //****************************************************************************
  53      =1  // DEFINITIONS / MACROS
  54      =1  //****************************************************************************
  55      =1  
  56      =1  #define GET_MODE_STATE()                            (g_stModeInfo.b5ModeState)
  57      =1  #define SET_MODE_STATE(x)                         (g_stModeInfo.b5ModeState = x)
  58      =1  #define GET_MODE_STATE_CHANGE()                 (bit)(g_stModeInfo.b1ModeStateChanged)
  59      =1  #define SET_MODE_STATE_CHANGE()                 (g_stModeInfo.b1ModeStateChanged = _TRUE)
  60      =1  #define CLR_MODE_STATE_CHANGE()                 (g_stModeInfo.b1ModeStateChanged = _FALSE)
  61      =1  #define GET_MODE_RESET_TARGET()                   (g_stModeInfo.b4ModeResetFlag)
  62      =1  #define SET_MODE_RESET_TARGET(x)                (g_stModeInfo.b4ModeResetFlag = x)
  63      =1  #define GET_TARGET_POWER_STATUS()           (g_stPowerInfo.b4PowerAction)
  64      =1  #define SET_TARGET_POWER_STATUS(x)          (g_stPowerInfo.b4PowerAction = x)
  65      =1  
  66      =1  #define GET_BATTERY_STATE()       (g_stBatteryInfo.b5BatteryStatus)
  67      =1  #define SET_BATTERY_STATE(x)        (g_stBatteryInfo.b5BatteryStatus = x)
  68      =1  #define GET_NO_BATTERY()        (bit)(g_stBatteryInfo.b1NoBattery)
  69      =1  #define SET_NO_BATTERY()        (g_stBatteryInfo.b1NoBattery =_TRUE)
  70      =1  #define CLR_NO_BATTERY()        (g_stBatteryInfo.b1NoBattery = _FALSE)
  71      =1  
  72      =1  #define GET_AC_PLUG()       (bit)(g_stBatteryInfo.b1AC_PLUG)
  73      =1  #define SET_AC_PLUG()       (g_stBatteryInfo.b1AC_PLUG =_TRUE)
  74      =1  #define CLR_AC_PLUG()       (g_stBatteryInfo.b1AC_PLUG = _FALSE)
  75      =1        
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 16  

  76      =1  
  77      =1  #define GET_BTH_STATE()         (g_stBatteryInfo.b3BTHStatus)
  78      =1  #define SET_BTH_STATE(x)          (g_stBatteryInfo.b3BTHStatus = x)
  79      =1  
  80      =1  #define GET_BATTERY_CAPACITY()        (g_stBatteryInfo.BatteryCapacity)
  81      =1  #define SET_BATTERY_CAPACITY(x)     (g_stBatteryInfo.BatteryCapacity = x)
  82      =1  #define GET_BATTERY_CAPACITY_FLAG()       (bit)(g_stBatteryInfo.b1BatteryCapacityLow)
  83      =1  #define SET_BATTERY_CAPACITY_FLAG()       (g_stBatteryInfo.b1BatteryCapacityLow =_TRUE)
  84      =1  #define CLR_BATTERY_CAPACITY_FLAG()     (g_stBatteryInfo.b1BatteryCapacityLow =_FALSE)
  85      =1  
  86      =1  #define GET_BATTERY_ABNORMAL()        (bit)(g_stBatteryInfo.b1BatteryAbnormal)
  87      =1  #define SET_BATTERY_ABNORMAL()        (g_stBatteryInfo.b1BatteryAbnormal=_TRUE)
  88      =1  #define CLR_BATTERY_ABNORMAL()        (g_stBatteryInfo.b1BatteryAbnormal=_FALSE)
  89      =1  
  90      =1  #define GET_BATTERY_CHARGE_STATE()        (g_stBatteryInfo.b2BatteryChargeStatus)
  91      =1  #define SET_BATTERY_CHARGE_STATE(x)     (g_stBatteryInfo.b2BatteryChargeStatus = x)
  92      =1  
  93      =1  //--------------------------------------------------
  94      =1  // Power status
  95      =1  //--------------------------------------------------
  96      =1  #define GET_POWER_STATUS()                 (g_stPowerInfo.b4PowerStatus)
  97      =1  #define SET_POWER_STATUS(x)                (g_stPowerInfo.b4PowerStatus = x)
  98      =1  
  99      =1  //--------------------------------------------------
 100      =1  // Enumerations of Timer Events
 101      =1  //--------------------------------------------------
 102      =1  
 103      =1  typedef struct
 104      =1  {
 105      =1      BYTE b1EventValid : 1;
 106      =1      BYTE b7EventID : 7;
 107      =1      WORD usTime;
 108      =1  } StructTimerEventTableType;
 109      =1  
 110      =1  typedef enum
 111      =1  {
 112      =1      _USER_TIMER_EVENT_START,
 113      =1      _USER_TIMER_EVENT_KEY_REPEAT_ENABLE = _USER_TIMER_EVENT_START,   
 114      =1      _USER_TIMER_EVENT_KEY_SCAN_READY,
 115      =1      _USER_TIMER_EVENT_OSD_CAMERA_VOLTAGE_INC,
 116      =1      _USER_TIMER_EVENT_OSD_CAMERA_VOLTAGE_DEC,
 117      =1      _USER_TIMER_EVENT_OSD_GET_MCU_VERSION,
 118      =1      _USER_TIMER_EVENT_OSD_MCU_ENTRY_SLEEP_MODE,
 119      =1      _USER_TIMER_EVENT_OSD_DISTANCE_RESET,
 120      =1      _USER_TIMER_EVENT_OSD_DVR_REBOOT,
 121      =1      _USER_TIMER_EVENT_OSD_DVR_SHUTDOWN,
 122      =1      _USER_TIMER_EVENT_OSD_ENCODER_DEVIATION_SETTING,
 123      =1      //
 124      =1       _USER_TIMER_EVENT_OSD_SHOW_NO_CABLE,
 125      =1      _USER_TIMER_EVENT_OSD_SHOW_NO_SIGNAL,
 126      =1      _USER_TIMER_EVENT_OSD_SHOW_POWER_SAVING,
 127      =1      _USER_TIMER_EVENT_GO_TO_POWER_SAVING,
 128      =1      _USER_TIMER_EVENT_OSD_DISABLE,
 129      =1      _USER_TIMER_EVENT_PANEL_BACKLIGHT_ON,
 130      =1      _USER_TIMER_EVENT_PANEL_POWER_OFF,
 131      =1      _USER_TIMER_EVENT_DO_AUTO_COLOR,
 132      =1      _USER_TIMER_EVENT_PANEL_USED_TIMER,
 133      =1      _USER_TIMER_EVENT_HLWIN_TYPE5_MOVE,    
 134      =1    _USER_TIMER_EVENT_LED_POWER_SAVING,
 135      =1    _USER_TIMER_EVENT_LIGHT_SENSER_ON,
 136      =1    _USER_TIMER_EVENT_SHOW_BURN_IN,//ryan@20151230
 137      =1    _USER_TIMER_EVENT_BURN_IN_ON,//ryan@20151230
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 17  

 138      =1    _USER_TIMER_EVENT_CHECK,//ryan@20151231
 139      =1    _USER_TIMER_EVENT_DISPLAY_INFO,//ryan@20151231
 140      =1    _USER_TIMER_EVENT_STANDBY_MODE,
 141      =1    _USER_TIMER_EVENT_FACTORY_MODE,//ryan@20160113
 142      =1      _USER_TIMER_EVENT_END,
 143      =1      _USER_TIMER_EVENT_COUNT = _USER_TIMER_EVENT_END,
 144      =1  } EnumUserTimerEventID;
 145      =1  
 146      =1  typedef enum
 147      =1  {
 148      =1      _SYSTEM_TIMER_EVENT_START = _USER_TIMER_EVENT_COUNT,
 149      =1      _SYSTEM_TIMER_EVENT_SOURCE_CLEAR_DETECTING = _SYSTEM_TIMER_EVENT_START,
 150      =1      _SYSTEM_TIMER_EVENT_JUDGE_BATT_STATE,
 151      =1      _SYSTEM_TIMER_EVENT_JUDGE_POWER_STATE,
 152      =1      _SYSTEM_TIMER_EVENT_JUDGE_BTH_STATE,
 153      =1      _SYSTEM_TIMER_EVENT_JUDGE_PSW_STATE,    
 154      =1      _SYSTEM_TIMER_EVENT_JUDGE_AC_MODE,
 155      =1      _SYSTEM_TIMER_EVENT_JUDGE_DVR_COMM,
 156      =1      _SYSTEM_TIMER_EVENT_JUDGE_TW8836_COMM,
 157      =1      _SYSTEM_TIMER_EVENT_JUDGE_WDT_ECHO,
 158      =1       _SYSTEM_TIMER_EVENT_GRN_ON,    
 159      =1      _SYSTEM_TIMER_EVENT_GRN_OFF,    
 160      =1      _SYSTEM_TIMER_EVENT_RED_ON,      
 161      =1      _SYSTEM_TIMER_EVENT_RED_OFF,   
 162      =1      _SYSTEM_TIMER_EVENT_GRN_BLINK,    
 163      =1      _SYSTEM_TIMER_EVENT_RED_BLINK,   
 164      =1      _SYSTEM_TIMER_EVENT_GRN_RED_BLINK,    
 165      =1      _SYSTEM_TIMER_EVENT_GRN_RED_ON,    
 166      =1      _SYSTEM_TIMER_EVENT_GRN_ON_RED_BLINK,    
 167      =1      _SYSTEM_TIMER_EVENT_END,
 168      =1      _SYSTEM_TIMER_EVENT_COUNT,
 169      =1  } EnumSystemTimerEventID;
 170      =1  
 171      =1  
 172      =1  typedef enum
 173      =1  {
 174      =1      _SCALER_TIMER_EVENT_START = _SYSTEM_TIMER_EVENT_COUNT,
 175      =1      _SCALER_TIMER_EVENT_TMDS_HDMI_PACKET_DETECT = _SCALER_TIMER_EVENT_START, 
 176      =1      _SCALER_TIMER_EVENT_TMDS_VIDEO_DETECT,  
 177      =1      _SCALER_TIMER_EVENT_AUDIO_LOAD_STABLE_I_CODE,
 178      =1      _SCALER_TIMER_EVENT_DP_HOTPLUG_ASSERTED,
 179      =1      _SCALER_TIMER_EVENT_DP_HDCP_LONG_HOTPLUG_EVENT,
 180      =1      _SCALER_TIMER_EVENT_DP_LINK_STATUS_IRQ,    
 181      =1      _SCALER_TIMER_EVENT_D0_PORT_DIGITAL_SWITCH,
 182      =1      _SCALER_TIMER_EVENT_D1_PORT_DIGITAL_SWITCH,  
 183      =1      _SCALER_TIMER_EVENT_NR_DETECTION_FINISHED,  
 184      =1      _SCALER_TIMER_EVENT_PHASE_CALIBRATION,    
 185      =1      _SCALER_TIMER_EVENT_PHASE_CNT_CHECK,
 186      =1      _SCALER_TIMER_EVENT_MHL_D0_READY_TO_TRANSMIT,
 187      =1      _SCALER_TIMER_EVENT_MHL_D0_READY_TO_RESEND,
 188      =1      _SCALER_TIMER_EVENT_MHL_D0_RECONNECT_1K,
 189      =1      _SCALER_TIMER_EVENT_MHL_D0_ACTIVE_VBUS,
 190      =1      _SCALER_TIMER_EVENT_MHL_D1_READY_TO_TRANSMIT,
 191      =1      _SCALER_TIMER_EVENT_MHL_D1_READY_TO_RESEND,
 192      =1      _SCALER_TIMER_EVENT_MHL_D1_RECONNECT_1K,
 193      =1      _SCALER_TIMER_EVENT_MHL_D1_ACTIVE_VBUS,
 194      =1      _SCALER_TIMER_EVENT_DCC_HISTOGRAM_THD_CHANGE,
 195      =1      _SCALER_TIMER_EVENT_END,
 196      =1      _SCALER_TIMER_EVENT_COUNT = _SCALER_TIMER_EVENT_END,
 197      =1  } EnumMCUTimerEventID;
 198      =1  
 199      =1  #define _SIMULTANEOUS_SCALER_EVENT_COUNT       0//     (5 + (_D0_INPUT_PORT_TYPE == _D0_MHL_PORT) + (_D1_I
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 18  

             -NPUT_PORT_TYPE == _D1_MHL_PORT))
 200      =1  #define _SIMULTANEOUS_USER_EVENT_COUNT             5
 201      =1  #define _SIMULTANEOUS_SYSTEM_EVENT_COUNT            3
 202      =1  
 203      =1  
 204      =1  #define _TIMER_EVENT_COUNT    (_SIMULTANEOUS_USER_EVENT_COUNT + _SIMULTANEOUS_SYSTEM_EVENT_COUNT + _SIMULT
             -ANEOUS_SCALER_EVENT_COUNT)
 205      =1  
 206      =1  
 207      =1  //--------------------------------------------------
 208      =1  // Power action
 209      =1  //--------------------------------------------------
 210      =1  
 211      =1  typedef enum
 212      =1  {
 213      =1      _POWER_ACTION_OFF_TO_NORMAL = 0x00,          
 214      =1      _POWER_ACTION_AC_ON_TO_NORMAL,         
 215      =1      _POWER_ACTION_AC_ON_TO_OFF,  ////2          
 216      =1      _POWER_ACTION_PS_TO_NORMAL,           
 217      =1      _POWER_ACTION_PS_TO_OFF,              
 218      =1      _POWER_ACTION_NORMAL_TO_PS,   //5        
 219      =1      _POWER_ACTION_NORMAL_TO_OFF,          
 220      =1      _POWER_ACTION_NORMAL_TO_NOSUPPORT_PS, 
 221      =1      _POWER_ACTION_NOSUPPORT_PS_TO_PS,
 222      =1      _POWER_ACTION_NOSUPPORT_PS_TO_OFF, 
 223      =1      _POWER_ACTION_NONE = 0xFF,
 224      =1  } EnumPowerAction;
 225      =1  
 226      =1  typedef enum
 227      =1  {
 228      =1      _MODE_ACTION_NO_RESET_MODE = 0x00,                
 229      =1      _MODE_ACTION_RESET_TO_SEARCH,
 230      =1      _MODE_ACTION_RESET_TO_DISPLAY_SETTING, 
 231      =1      _MODE_ACTION_RESET_TO_DISPLAY_SETTING_WITHOUT_FORCETOBG,
 232      =1      _MODE_ACTION_RESET_TO_NOSUPPORT,    
 233      =1      _MODE_ACTION_RESET_TO_NOSIGNAL,
 234      =1      _MODE_ACTION_RESET_TO_POWER_SAVING,    
 235      =1      _MODE_ACTION_RESET_TO_POWER_OFF,           
 236      =1      _MODE_ACTION_RESET_TO_FACTORY_MODE,   
 237      =1      _MODE_ACTION_NONE = 0xFF,
 238      =1  } EnumModeAction;
 239      =1  
 240      =1  
 241      =1  //--------------------------------------------------
 242      =1  // Power status
 243      =1  //--------------------------------------------------
 244      =1  
 245      =1  typedef enum
 246      =1  {
 247      =1      _MODE_STATUS_INITIAL = 0x00,            
 248      =1      _MODE_STATUS_SEARCH,             
 249      =1      _MODE_STATUS_DISPLAY_SETTING,    
 250      =1      _MODE_STATUS_ACTIVE,             
 251      =1      _MODE_STATUS_NOSUPPORT,          
 252      =1      _MODE_STATUS_NOSIGNAL,           
 253      =1      _MODE_STATUS_POWER_SAVING,       
 254      =1      _MODE_STATUS_POWER_OFF,          
 255      =1      _MODE_STATUS_FACTORY,     
 256      =1      _MODE_STATUS_NONE = 0xFF,
 257      =1  } EnumModeStatus;
 258      =1  
 259      =1  typedef enum
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 19  

 260      =1  {
 261      =1      _POWER_STATUS_AC_ON = 0x00,
 262      =1      _POWER_STATUS_OFF,
 263      =1      _POWER_STATUS_NORMAL,
 264      =1      _POWER_STATUS_NORMAL_BATTERY_MODE,   
 265      =1      _POWER_STATUS_NORMAL_NO_MATTERY_MODE,
 266      =1      _POWER_STATUS_SAVING,
 267      =1      _POWER_STATUS_SAVING_BATTERY_MODE,   
 268      =1      _POWER_STATUS_NOSUPPORT_SAVING,
 269      =1      _POWER_STATUS_NONE = 0xFF,
 270      =1  } EnumPowerStatus;
 271      =1  
 272      =1  
 273      =1  //--------------------------------------------------
 274      =1  // Battery status
 275      =1  //--------------------------------------------------
 276      =1  
 277      =1  typedef enum
 278      =1  {
 279      =1    _BATT_STATUS_CAPACITY_LEVEL4=0x00,
 280      =1    _BATT_STATUS_CAPACITY_LEVEL3,
 281      =1    _BATT_STATUS_CAPACITY_LEVEL2,
 282      =1    _BATT_STATUS_CAPACITY_LEVEL1,
 283      =1    _BATT_STATUS_AC_MODE,
 284      =1    _BATT_STATUS_TEMP_HIGH, 
 285      =1    _BATT_STATUS_TEMP_NORMAL,
 286      =1    _BATT_STATUS_TEMP_LOW, 
 287      =1    _BATT_STATUS_NO_BATT,
 288      =1    _BATT_STATUS_CAPACITY_LOW,
 289      =1    _BATT_STATUS_CAPACITY_HIGH,
 290      =1    _BATT_STATUS_ABNORMAL_MODE,
 291      =1    _BATT_STATUS_FAST_CHARGE,
 292      =1    _BATT_STATUS_LOW_CHARGE,
 293      =1    _BATT_STATUS_STOP_CHARGE,
 294      =1    _BATT_STATUS_START_CHARGE,
 295      =1        _BATT_STATUS_NONE = 0xFF,
 296      =1  } EnumBatteryStatus;
 297      =1  
 298      =1  //--------------------------------------------------
 299      =1  // Battery action
 300      =1  //--------------------------------------------------
 301      =1  /*
 302      =1  typedef enum
 303      =1  {
 304      =1      _POWER_ACTION_OFF_TO_NORMAL = 0x00,          
 305      =1      _POWER_ACTION_AC_ON_TO_NORMAL,         
 306      =1      _POWER_ACTION_AC_ON_TO_OFF,  ////2          
 307      =1      _POWER_ACTION_PS_TO_NORMAL,           
 308      =1      _POWER_ACTION_PS_TO_OFF,              
 309      =1      _POWER_ACTION_NORMAL_TO_PS,   //5        
 310      =1      _POWER_ACTION_NORMAL_TO_OFF,          
 311      =1      _POWER_ACTION_NORMAL_TO_NOSUPPORT_PS, 
 312      =1      _POWER_ACTION_NOSUPPORT_PS_TO_PS,
 313      =1      _POWER_ACTION_NOSUPPORT_PS_TO_OFF, 
 314      =1      _POWER_ACTION_NONE = 0xFF,
 315      =1  } EnumPowerAction;
 316      =1  */
 317      =1  /*
 318      =1  typedef enum
 319      =1  {
 320      =1      _MODE_ACTION_NO_RESET_MODE = 0x00,                
 321      =1      _MODE_ACTION_RESET_TO_SEARCH,
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 20  

 322      =1      _MODE_ACTION_RESET_TO_DISPLAY_SETTING, 
 323      =1      _MODE_ACTION_RESET_TO_DISPLAY_SETTING_WITHOUT_FORCETOBG,
 324      =1      _MODE_ACTION_RESET_TO_NOSUPPORT,    
 325      =1      _MODE_ACTION_RESET_TO_NOSIGNAL,
 326      =1      _MODE_ACTION_RESET_TO_POWER_SAVING,    
 327      =1      _MODE_ACTION_RESET_TO_POWER_OFF,           
 328      =1      _MODE_ACTION_RESET_TO_FACTORY_MODE,   
 329      =1      _MODE_ACTION_NONE = 0xFF,
 330      =1  } EnumModeAction;
 331      =1  */
 332      =1  
 333      =1  typedef struct
 334      =1  {
 335      =1      BYTE b5BatteryStatus:5;
 336      =1      BYTE b1NoBattery:1;
 337      =1      BYTE b1AC_PLUG:1;
 338      =1      BYTE b3BTHStatus:3;
 339      =1      BYTE b1BatteryCapacityLow:1;
 340      =1      BYTE b1BatteryAbnormal:1;
 341      =1      BYTE b2BatteryChargeStatus:2;
 342      =1      WORD BatteryCapacity;
 343      =1  } StructBatteryInfoType;
 344      =1  
 345      =1  
 346      =1  typedef struct
 347      =1  {
 348      =1      BYTE b4PowerAction : 4;
 349      =1      BYTE b4PowerStatus : 4;
 350      =1      BYTE b1GDIIsolationFlag : 1;
 351      =1      BYTE b1TopIsolationFlag : 1;
 352      =1      BYTE b1AnalogIsolationFlag : 1;
 353      =1  } StructPowerInfoType;
 354      =1  
 355      =1  
 356      =1  typedef struct
 357      =1  {
 358      =1      BYTE b5ModeState : 5;
 359      =1      BYTE b1DisplaySettingReady : 1;
 360      =1      BYTE b1TimingConfirm : 1;
 361      =1      BYTE b1ModeStateChanged : 1;
 362      =1      BYTE b4ModeResetFlag : 4;    
 363      =1      BYTE b1NoWaitForActive : 1;
 364      =1      BYTE b1ActiveReady : 1;
 365      =1  } StructModeInfoType;
 366      =1  
 367      =1  
 368      =1  
 369      =1  /*
 370      =1  
 371      =1  enum SourceModeTypeEnum
 372      =1  { 
 373      =1    AVMode,      // 0   0X00
 374      =1    //VGAMode,       // 1
 375      =1  #ifdef USE_CAMD 
 376      =1    CAM_D,         // 2
 377      =1  #endif
 378      =1    CAM_A,         // 3     0x01
 379      =1    CAM_B,         // 4     0x02
 380      =1    CAM_C,         // 5     0x03
 381      =1    CAM_R,         // 6     0x04
 382      =1    CAM_AB,        // 7     0x05
 383      =1    CAM_CR,        // 8     0x06
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 21  

 384      =1    CAM_AR,        // 9     0x07
 385      =1    CAM_RB,        // 10    0x08
 386      =1    CAM_AC,        // 11    0x09
 387      =1    CAM_CB,        // 12    0x0a
 388      =1    CAM_RAB_T,     // 13    0x0b
 389      =1    CAM_RAB_H,     // 14    0x0c
 390      =1  
 391      =1    CAM_QUAD,      // 15    0x0d
 392      =1    CAM_ABR_T3,    // 16    0x0e
 393      =1    CAM_ABR_T4,    // 17    0x0f
 394      =1    CAM_RAC_T,      //0x10  
 395      =1    CAM_RBC_T,      //0x11
 396      =1    CAM_RAC_T2,     //0x12  
 397      =1    CAM_RBC_T2,     //0x13  
 398      =1    CAM_BA,       //0x14
 399      =1    CAM_BC,
 400      =1    CAM_BR,
 401      =1    CAM_CA,
 402      =1    CAM_ABC,
 403      =1    CAM_ABR,
 404      =1    CAM_ACR,
 405      =1    CAM_BAC,
 406      =1    CAM_BAR,
 407      =1    CAM_BCR,
 408      =1    CAM_CAB,
 409      =1    CAM_CAR,
 410      =1    CAM_CBR,  
 411      =1    SEQ,           // 18      0x10
 412      =1    CAM_NUM
 413      =1  };
 414      =1  */
 415      =1  //#define _TIMER_EVENT_COUNT      _SYSTEM_TIMER_EVENT_END////                    (_SIMULTANEOUS_USER_EVENT
             -_COUNT + _SIMULTANEOUS_SYSTEM_EVENT_COUNT + _SIMULTANEOUS_SCALER_EVENT_COUNT)
 416      =1  
 417      =1  //typedef unsigned char SourceModeType;
 418      =1  
 419      =1  #endif  /* __TYPEDEFS__ */
  27          #include "main.h"
   1      =1  #ifndef __MAIN__
   2      =1  #define __MAIN__
   3      =1  
   4      =1  #define ON          1
   5      =1  #define OFF         0
   6      =1  #define Hs_debug
   7      =1  //#define DVR
   8      =1  #define Format_SDCard
   9      =1  #define BJTSwitch
  10      =1  
  11      =1  
  12      =1  
  13      =1  #define Panel_Enable()          P4=P4|0x08 //andy 980908
  14      =1  #define Panel_Disable()     P4=P4&0xf7
  15      =1  
  16      =1  #if 0
           =1 #define SetBacklight()      P4=P4|0x04
           =1 #define clrBacklight()      P4=P4&0xfb
           =1 #else
  20      =1  #define SetBacklight()      P4=P4&0xfb
  21      =1  #define clrBacklight()       P4=P4|0x04
  22      =1  #endif
  23      =1  /*
  24      =1  #define COLUMN1_PIN   P2_3
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 22  

  25      =1  #define COLUMN2_PIN   P2_4
  26      =1  #define COLUMN3_PIN   P2_5
  27      =1  */
  28      =1  
  29      =1  //InputSelection
  30      =1  /*
  31      =1  struct struct_IdName {
  32      =1    BYTE  Id;
  33      =1    BYTE  Name[16];
  34      =1  };
  35      =1  /*
  36      =1  
  37      =1  #define CH_TW2835              1
  38      =1  #define CH_CAMD                2
  39      =1  #define CH_AV                  3
  40      =1  #define PC             7
  41      =1  #define ChineseDefaultMenu   8
  42      =1  
  43      =1  #define SVIDEO        2
  44      =1  #define COMPONENT     3
  45      =1  //#define ANALOGDTV     4
  46      =1  #define DTV         4
  47      =1  #define TV          5
  48      =1  #define SCART       6
  49      =1  
  50      =1  #define DIGITALVGA      8
  51      =1  
  52      =1  #define AIRTV       0 //9
  53      =1  #define CABLETV       1 //0xa
  54      =1  
  55      =1  
  56      =1  #define TVTUNER       0xd   //10
  57      =1  #define MUTE        1 
  58      =1  #define MENU        2 
  59      =1  #define TVVOL       4 
  60      =1  #define CC          8 
  61      =1  #define INPUTINFO     0x10
  62      =1  #define PCINFO        0x20
  63      =1  #define GAUGEINFO           0x40
  64      =1  //#define RATINGINFO      0x40
  65      =1  #define TVCHN       0x80
  66      =1  //#define MUTE        0x40
  67      =1  
  68      =1  #define YPBPR_480i      0
  69      =1  #define YPBPR_576i      1
  70      =1  #define YPBPR_480p      2
  71      =1  #define YPBPR_576p      3
  72      =1  #define YPBPR_1080i     4
  73      =1  #define YPBPR_720p      5
  74      =1  #define YPBPR_720p50    6
  75      =1  */
  76      =1  
  77      =1  #define _STOP_PWM     0x00
  78      =1  #define _RUN_PWM    0xFF
  79      =1  #define _BL_PWM     0x14
  80      =1  #define _CHG_CURR   0x15
  81      =1  
  82      =1  //ADC
  83      =1  #define P16_BTH   6  //P1.6
  84      =1  #define P17_BAT   7  //P1.7
  85      =1  
  86      =1  
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 23  

  87      =1  
  88      =1  //--------------------------- P0 Define -----------------------------
  89      =1  //#define SEL_MIX     P0_6  // 
  90      =1  //--------------------------- P1 Define -----------------------------
  91      =1  //#define SEL_DVI     P3_5  //LJY062001   
  92      =1  
  93      =1  #define TW88HWReset     P3_4  //LJY001010 //LJY000721
  94      =1  #define PowerUp             P3_7
  95      =1  #define LBEN P1_6
  96      =1  //======================= CDS Control ================================= 
  97      =1  //#define CDS_CTRL           P1_5
  98      =1  /*
  99      =1  extern BYTE SelectModeType;
 100      =1  extern BYTE InputSelection;
 101      =1  extern BYTE SEQTime;
 102      =1  extern BYTE Priority;
 103      =1  extern BYTE PowerFlag;
 104      =1  //extern bit AutoDayNight;
 105      =1  extern bit SDCardCoverDetect;
 106      =1  */
 107      =1  BYTE keyIn(void);
 108      =1  void TimerForRemocon(void);
 109      =1  void TimerForTick(void);
 110      =1  void DisableRemoconInt(void);
 111      =1  BYTE SetSupport_remocon(BYTE newd);
 112      =1  
 113      =1  void delay(BYTE cnt);
 114      =1  
 115      =1  BYTE RS_ready(void);
 116      =1  #ifdef Hs_debug
 117      =1  BYTE RS_rx(void);
 118      =1  #endif
 119      =1  void RS_tx(BYTE tx_buf);
 120      =1  
 121      =1  BYTE RS2_rx(void);
 122      =1  void RS2_tx(BYTE tx_buf);
 123      =1  
 124      =1  //void NewLine(void);
 125      =1  //void PutsP(PDATA_P BYTE *ptr);
 126      =1  #ifdef Hs_debug
 127      =1  //void MonWriteI2C(BYTE addr, BYTE index, BYTE val);
 128      =1  //BYTE MonReadI2C(BYTE addr, BYTE index);
 129      =1  #endif
 130      =1  BYTE Asc1Bin(BYTE asc);
 131      =1  BYTE Asc2Bin(PDATA_P BYTE *s);
 132      =1  
 133      =1  //void I2CDeviceInitialize( CODE_P BYTE *RegSet);
 134      =1  
 135      =1  //void RestartSystemClock(WORD clock_hm);
 136      =1  //WORD GetTime_ms(void);
 137      =1  #if 0
           =1 BYTE GetTime_H(void);
           =1 BYTE GetTime_M(void);
           =1 #endif
 141      =1  //void ChangeTime_H( char add );
 142      =1  //void ChangeTime_M( char add );
 143      =1  //WORD GetWakeupTime(void);
 144      =1  //void SetWakeupTime(WORD wtime);
 145      =1  
 146      =1  
 147      =1  //WORD GetOffTime(void);
 148      =1  //void SetOffTime(WORD wtime);
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 24  

 149      =1  //BYTE GetSleepTimer(void);
 150      =1  //void SetSleepTimer(BYTE stime);
 151      =1  /*
 152      =1  WORD DiffTime_ms( WORD stime, WORD etime );
 153      =1  //void SetLastBlockedTime(void);
 154      =1  void SetLastCCTime(void);       //ljy010904...CC_FIX_CLEAR_ON_TIME
 155      =1  
 156      =1  void SetOSDLastKeyInTime(void);
 157      =1  WORD GetOSDLastKeyInTime(void);
 158      =1  WORD GetIVF(void);
 159      =1  DWORD GetIHF(void);
 160      =1  BYTE ReadVInputSTD(void);
 161      =1  void SetVInputStd(BYTE newd);
 162      =1  BYTE GetVInputStd(void);
 163      =1  BYTE GetInputSelection(void);
 164      =1  #ifdef ADD_ANALOGPANEL
 165      =1  BYTE IsAnalogOn(void);
 166      =1  #endif
 167      =1  void InitVideoData(BYTE src);
 168      =1  void ChangeVInputStdDetectMode(BYTE val);
 169      =1  BYTE GetVInputStdInx(void);
 170      =1  
 171      =1  void MonWriteI2Cn_(BYTE addr, BYTE *val, BYTE cnt) ;
 172      =1  */
 173      =1  ///void Usage(void);
 174      =1  #ifdef Hs_debug
 175      =1    void Prompt(void);
 176      =1  #endif
 177      =1  /*
 178      =1  void DebugKeyIn(BYTE ikey);
 179      =1  void DVIPowerDown(bit flag);
 180      =1  void PowerDown_XTAL(bit flag);
 181      =1  */
 182      =1  //void ChangeInput(BYTE newsel);
 183      =1  
 184      =1  
 185      =1  void WaitPowerOn(void);
 186      =1  //void PowerOff(void);
 187      =1  //BYTE GetNextInputSelection(void);
 188      =1  
 189      =1  //BYTE WantToStopTVScan(void);
 190      =1  
 191      =1  //BYTE IsTW8801(void);
 192      =1  //BYTE IsTW8803(void);
 193      =1  //BYTE ConvertVideoVSAT(BYTE reg);
 194      =1  
 195      =1  //BYTE IsNoInput(void);
 196      =1  void LoadEEPROM (void);
 197      =1  void Hs_InitVars(void);
 198      =1  /*
 199      =1  void AdjustAutoDayNight(BYTE val);
 200      =1  void ACCPowerControl(void);
 201      =1  void AdjustBacklight(BYTE val);//val=0~110
 202      =1  */
 203      =1  BYTE mcuLib_ProtocolAppend(BYTE *pucBuf, BYTE* piLen, BYTE ucByte);
 204      =1  BYTE mcuLib_ProtocolSendCmdWithParamNum(BYTE ucType, BYTE* pucParam, BYTE ucSize);
 205      =1  void MCU_SendCmdToDVR(BYTE ucType);
 206      =1  void SetAD5110Step(BYTE newv) ;
 207      =1  
 208      =1  
 209      =1  
 210      =1  extern BYTE ScanPowerkey(void);
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 25  

 211      =1  extern void MCUTimerInitialTimerEvent(void);
 212      =1  extern void MCUTimerActiveTimerEvent(WORD usTime, BYTE ucEventID);
 213      =1  extern void SysTimerHandler(void);
 214      =1  extern void SysJudgeHandler(void);
 215      =1  extern void SysModeHandler(void);
 216      =1  extern void SysPowerHandler(void);
 217      =1  
 218      =1  extern void MCUTimerDelayXms(WORD usNum);
 219      =1  
 220      =1  
 221      =1  struct RegisterInfo
 222      =1  {
 223      =1     int  Min;
 224      =1     int  Max;
 225      =1     int  Default;
 226      =1  };
 227      =1  struct LongRegisterInfo
 228      =1  {
 229      =1     WORD Min;
 230      =1     WORD Max;
 231      =1     WORD Default;
 232      =1  };
 233      =1  
 234      =1  
 235      =1  
 236      =1  
 237      =1  #endif  // __MAIN__
  28          //#include "tw88.h"
  29          #include "i2c.h"
   1      =1  #ifndef __I2C_H__
   2      =1  #define __I2C_H__
   3      =1  //AD5110 table
   4      =1  /*   
   5      =1  "RA=100K+5.1K, RB=10K+10K  "        //  
   6      =1    D7D6D5D4D3D2D1D0  Vout        //
   7      =1  0 0 4.90                            //
   8      =1  1 1 4.92      
   9      =1  2 10  4.93      
  10      =1  3 11  4.95      
  11      =1  4 100 4.97      
  12      =1  5 101 4.99      
  13      =1  6 110 5.00      
  14      =1  7 111 5.02      
  15      =1  8 1000  5.03      
  16      =1  9 1001  5.05      
  17      =1  10  1010  5.07      
  18      =1  11  1011  5.09      
  19      =1  12  1100  5.11      
  20      =1  13  1101  5.12      
  21      =1  14  1110  5.14      
  22      =1  15  1111  5.16      
  23      =1  16  10000 5.18      
  24      =1  17  10001 5.20      
  25      =1  18  10010 5.21      
  26      =1  19  10011 5.23      
  27      =1  20  10100 5.25      
  28      =1  21  10101 5.27      
  29      =1  22  10110 5.29      
  30      =1  23  10111 5.31      
  31      =1  24  11000 5.33      
  32      =1  25  11001 5.35      
  33      =1  26  11010 5.37      
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 26  

  34      =1  27  11011 5.39      
  35      =1  28  11100 5.41      
  36      =1  29  11101 5.43      
  37      =1  30  11110 5.45      
  38      =1  31  11111 5.47      
  39      =1  32  100000  5.48      
  40      =1  33  100001  5.51      
  41      =1  34  100010  5.54      
  42      =1  35  100011  5.56      
  43      =1  36  100100  5.58      
  44      =1  37  100101  5.60      
  45      =1  38  100110  5.63      
  46      =1  39  100111  5.65      
  47      =1  40  101000  5.67      
  48      =1  41  101001  5.69      
  49      =1  42  101010  5.72      
  50      =1  43  101011  5.74      
  51      =1  44  101100  5.76      
  52      =1  45  101101  5.78      
  53      =1  46  101110  5.81      
  54      =1  47  101111  5.84      
  55      =1  48  110000  5.86      
  56      =1  49  110001  5.88      
  57      =1  50  110010  5.91      
  58      =1  51  110011  5.93      
  59      =1  52  110100  5.96      
  60      =1  53  110101  5.98      
  61      =1  54  110110  6.01      
  62      =1  55  110111  6.04      
  63      =1  56  111000  6.06      
  64      =1  57  111001  6.09      
  65      =1  58  111010  6.11      
  66      =1  59  111011  6.15      
  67      =1  60  111100  6.17      
  68      =1  61  111101  6.20      
  69      =1  62  111110  6.23      
  70      =1  63  111111  6.26      
  71      =1  64  1000000 6.28      
  72      =1  65  1000001 6.32      
  73      =1  66  1000010 6.35      
  74      =1  67  1000011 6.37      
  75      =1  68  1000100 6.40      
  76      =1  69  1000101 6.44      
  77      =1  70  1000110 6.47      
  78      =1  71  1000111 6.50      
  79      =1  72  1001000 6.53      
  80      =1  73  1001001 6.56      
  81      =1  74  1001010 6.59      
  82      =1  75  1001011 6.62      
  83      =1  76  1001100 6.66      
  84      =1  77  1001101 6.69      
  85      =1  78  1001110 6.72      
  86      =1  79  1001111 6.76      
  87      =1  80  1010000 6.79      
  88      =1  81  1010001 6.83      
  89      =1  82  1010010 6.86      
  90      =1  83  1010011 6.90      
  91      =1  84  1010100 6.93      
  92      =1  85  1010101 6.97      
  93      =1  86  1010110 7.01      
  94      =1  87  1010111 7.04      
  95      =1  88  1011000 7.08      
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 27  

  96      =1  89  1011001 7.12      
  97      =1  90  1011010 7.16      
  98      =1  91  1011011 7.20      
  99      =1  92  1011100 7.24      
 100      =1  93  1011101 7.28      
 101      =1  94  1011110 7.32      
 102      =1  95  1011111 7.36      
 103      =1  96  1100000 7.40      
 104      =1  97  1100001 7.44      
 105      =1  98  1100010 7.48      
 106      =1  99  1100011 7.53      
 107      =1  100 1100100 7.57      
 108      =1  101 1100101 7.61      
 109      =1  102 1100110 7.66      
 110      =1  103 1100111 7.71      
 111      =1  104 1101000 7.75      
 112      =1  105 1101001 7.80      
 113      =1  106 1101010 7.84      
 114      =1  107 1101011 7.89      
 115      =1  108 1101100 7.94      
 116      =1  109 1101101 7.99      
 117      =1  110 1101110 8.04      
 118      =1  111 1101111 8.09      
 119      =1  112 1110000 8.14      
 120      =1  113 1110001 8.19      
 121      =1  114 1110010 8.25      
 122      =1  115 1110011 8.30      
 123      =1  116 1110100 8.35      
 124      =1  117 1110101 8.41      
 125      =1  118 1110110 8.47      
 126      =1  119 1110111 8.52      
 127      =1  120 1111000 8.58      
 128      =1  121 1111001 8.64      
 129      =1  122 1111010 8.70      
 130      =1  123 1111011 8.76      
 131      =1  124 1111100 8.82      
 132      =1  125 1111101 8.88      
 133      =1  126 1111110 8.95      
 134      =1  127 1111111 9.01      
 135      =1  */
 136      =1  void I2CReadByte3(BYTE *);
 137      =1  void I2CRead8Byte(BYTE *);
 138      =1  #if 0
           =1 void I2CReadByteMSP(BYTE addr, BYTE index, BYTE *pd, BYTE cnt);
           =1 #endif
 141      =1  BYTE I2CWriteByte2(BYTE);
 142      =1  BYTE I2CWriteByte3(BYTE*);
 143      =1  BYTE I2CWrite8Byte(BYTE *);
 144      =1  
 145      =1  void I2CStart(void);
 146      =1  void I2CWriteData(BYTE value);
 147      =1  BYTE I2CReadData(void);
 148      =1  #if 0
           =1 BYTE I2CReadDataWithACK(void);
           =1 #endif
 151      =1  void I2CStop(void);
 152      =1  void I2Cdelay(void);
 153      =1  
 154      =1  
 155      =1  
 156      =1  #define WriteTW88(a,b)    WriteI2C(TW88I2CAddress, a, b)
 157      =1  #define ReadTW88(a)     ReadI2C(TW88I2CAddress, a)
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 28  

 158      =1  /*
 159      =1  
 160      =1  
 161      =1  BYTE WriteTW88_Wait (BYTE, BYTE);
 162      =1  void WriteADC   (BYTE, BYTE);
 163      =1  BYTE ReadADC    (BYTE);
 164      =1  //BYTE ReadADC_TW88(BYTE index);
 165      =1  void WriteADC_TW88(BYTE index, BYTE dat);
 166      =1  */
 167      =1  void WriteEEP   (WORD, BYTE);
 168      =1  BYTE ReadEEP    (WORD);
 169      =1  //WORD ReadALC106(WORD index);
 170      =1  //void WriteALC106(WORD index, WORD  dat);
 171      =1  
 172      =1  WORD ReadI2CWORD(BYTE addr, BYTE index);
 173      =1  BYTE ReadI2C    (BYTE addr, BYTE index);
 174      =1  void WriteI2C   (BYTE addr, BYTE index, BYTE val);
 175      =1  
 176      =1  void WriteI2Cn_(BYTE addr, BYTE *val, BYTE cnt);
 177      =1  void WriteI2Cn (BYTE addr, BYTE index, BYTE *val, BYTE cnt);
 178      =1  void WriteI2CnD(BYTE addr, BYTE index, BYTE val, BYTE cnt);
 179      =1  
 180      =1  void ReadI2Cmn(BYTE addr, BYTE wcnt, BYTE rcnt, BYTE *rwdata);
 181      =1  void WriteAD5110(WORD index, WORD  dat);
 182      =1  WORD ReadAD5110(WORD index);
 183      =1  
 184      =1  
 185      =1  #define   WriteADC(a,b) WriteADC_TW88(a,b)
 186      =1  #define   ReadADC(a)    ReadADC_TW88(a)
 187      =1  
 188      =1  #endif  /* __I2C_H__ */
  30          #include "adc.h"
   1      =1  #ifndef __ADC__
   2      =1  #define __ADC__
   3      =1  
   4      =1  //=============================================================================
   5      =1  //                             ADC Functions
   6      =1  //=============================================================================
   7      =1  
   8      =1  void ADCPowerDown(bit flag);
   9      =1  void SelectADCmux(BYTE sel);
  10      =1  void SetADCMode(BYTE mode);
  11      =1  
  12      =1  void EnableADC(void);
  13      =1  void DisableADC(void);
  14      =1  
  15      =1  WORD GetCoarse(void);
  16      =1  void SetCoarse(WORD i);
  17      =1  void SetPhase(BYTE j);
  18      =1  BYTE GetPhaseCurrent(void);
  19      =1  BYTE SetVCORange(DWORD _IPF);
  20      =1  
  21      =1  //void SetADCGainOffset(BYTE gain, BYTE offset);
  22      =1  void AutoColorAdjust(void);
  23      =1  
  24      =1  
  25      =1  
  26      =1  void AutoColorAdjustForDTV(BYTE flag);
  27      =1  
  28      =1  #endif  // __ADC__
  29      =1  
  30      =1  
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 29  

  31      =1  
  32      =1  
  33      =1  
  34      =1  
  35      =1  
  36      =1  
  37      =1  
  38      =1  
  39      =1  
  40      =1  
  41      =1  
  42      =1  
  43      =1  
  44      =1  
  45      =1  
  46      =1  
  47      =1  
  48      =1  
  49      =1  
  50      =1  
  51      =1  
  52      =1  
  53      =1  
  54      =1  
  31          //#include "osdbasic.h"
  32          //#include "dispinfo.h"
  33          //#include "debug.h"
  34          #include "etc_eep.h"
   1      =1  #ifndef __ETC_EEP__
   2      =1  #define __ETC_EEP__
   3      =1  
   4      =1  
   5      =1  ////eeprom.h
   6      =1  
   7      =1  
   8      =1  #define  EEP_Powerflag            0x10   
   9      =1  #define  EEP_CameraVolt           0x11   
  10      =1  
  11      =1  
  12      =1  //=========================================================================
  13      =1  //  EEPROM structure
  14      =1  //  0x00  BYTE  4 'TW88'
  15      =1  #define EEP_FWREV_MAJOR     0x04  //BYTE  1 F/W Rev.-major(Hex) 
  16      =1  #define EEP_FWREV_MINOR     0x05  //BYTE  1 F/W Rev.-minor(Hex)
  17      =1  #define EEP_DEBUGLEVEL      0x06  //BYTE  1 DebugLevel
  18      =1  /*//
  19      =1  #define EEP_AUTODETECT      0x07  //BYTE  1 Flag for Input Auto Detect  -0:Auto, 1:NTSC,....
  20      =1  #define EEP_AUTODETECTTYTE    0x08  //BYTE  1 Type of Auto-detect(will be value of register 0x1d)
  21      =1  //      ---------------------------------------------------------------
  22      =1  #define EEP_WIDEMODE      0x09  //BYTE  1   Wide Mode
  23      =1  
  24      =1  #define EEP_AUTORECOGNITION   0x0a  //BYTE  1 Auto Recognition
  25      =1  #define EEP_VIDEOMODE     0x0b  //BYTE  1   Video Mode
  26      =1  
  27      =1  #define EEP_OSDLANG       0x0c  //BYTE  1   OSDLang           // 0
  28      =1  
  29      =1  #define EEP_OSDPOSITIONMODE   0x0d  //BYTE  1 OSD Position Mode
  30      =1  #define EEP_CCD         0x0e  //BYTE  1 Closed Caption- 0: off, 1:on
  31      =1  
  32      =1  #define EEP_INPUTSELECTION    0x0f  //BYTE  1 InputSelection
  33      =1  
  34      =1  //
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 30  

  35      =1  #define EEP_PC_CONTRAST     0x10
  36      =1  #define EEP_PC_BRIGHT     0x11
  37      =1  
  38      =1  #define EEP_CONTRAST      0x12  //BYTE  1 Contrast 
  39      =1  #define EEP_BRIGHTNESS      0x13  //BYTE  1 Brightness
  40      =1  #define EEP_SATURATION_U    0x14  //BYTE  1 Saturation :U
  41      =1  #define EEP_SATURATION_V    0x15  //BYTE  1 Saturation :V
  42      =1  #define EEP_SHARPNESS     0x16  //BYTE  1 Sharpness 
  43      =1  #define EEP_HUE         0x17  //BYTE  1 Hue                    
  44      =1  
  45      =1  //====================================HS AWT 981001
  46      =1  #define  EEP_AutoMode           0xa0
  47      =1  #define  EEP_IMAGEMode          0xa1
  48      =1  #define  EEP_RearMode           0xa2
  49      =1  #define  EEP_COSDMode           0xa3
  50      =1  #define  EEP_GAUGEMode          0xa4
  51      =1  #define  EEP_CAMAMode           0xa5 
  52      =1  #define  EEP_CAMBMode           0xa6
  53      =1  #define  EEP_CAMCMode           0xa7
  54      =1  #define  EEP_CAMRMode           0xa8
  55      =1  #define  EEP_CAMOutMode         0xa9  
  56      =1  #define  EEP_TimeStep           0xaa
  57      =1  
  58      =1  
  59      =1  
  60      =1  #define  EEP_ONOFFChoice        0xac 
  61      =1  
  62      =1  #define  EEP_PRIORITY           0xad
  63      =1  #define  EEP_JUMPMode           0xae
  64      =1  #define  EEP_NowModeState       0xaf
  65      =1  #define  EEP_SelectMode         0xb0
  66      =1  #define  EEP_PriorityOffSelectMode  0xb1
  67      =1  #define  EEP_AudioRecord    0xb2
  68      =1  
  69      =1  #define  EEP_FirstNumber    0xb3
  70      =1  #define  EEP_SecondNumber   0xb4
  71      =1  #define  EEP_ThridNumber    0xb5
  72      =1  #define  EEP_FourthNumber   0xb6
  73      =1  
  74      =1  #define  EEP_CAMNUMBER     0xb7
  75      =1  #define  EEP_PELCO       0xb8
  76      =1  #define  EEP_Baud_rate     0xb9
  77      =1  #define  EEP_TriggerVGA    0xba
  78      =1  #define  EEP_DVRDisplay    0xbb
  79      =1  #define  EEP_IMAGE_A_Mode    0xbc//andy A1.4 20100113
  80      =1  #define  EEP_IMAGE_B_Mode    0xbd//andy A1.4 20100113
  81      =1  #define  EEP_IMAGE_C_Mode    0xbe//andy A1.4 20100113
  82      =1  
  83      =1  #define  EEP_SDCardDetect    0xbf//andy A1.4 20100113
  84      =1  
  85      =1  
  86      =1  #define  EEP_DELAYCAMA           0xC0 
  87      =1  #define  EEP_DELAYCAMB           0xC1
  88      =1  #define  EEP_DELAYCAMC           0xC2
  89      =1  #define  EEP_DELAYCAMR           0xC3
  90      =1  #ifdef USE_CAMD
  91      =1  #define  EEP_DELAYCAMD           0xC4
  92      =1  #endif
  93      =1  //#define  EEP_SelectModeBuf         0xb2
  94      =1  #define  EEP_ReverseMode    0xc5
  95      =1  #define  EEP_JUMPAV_TIMESET 0xc6
  96      =1  
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 31  

  97      =1  #define EEP_OSD_TYPE    0xc7
  98      =1  #define EEP_OSD_LANGUAGE  0xc8
  99      =1  #define EEP_OSD_BRIGHTNESS  0xc9
 100      =1  #define EEP_OSD_PWR_LINK  0xca
 101      =1  
 102      =1  #if 0
 103      =1  #define  EEP_Resolution     0xc0
 104      =1  #define  EEP_FPS        0xc1
 105      =1  #define  EEP_Quality      0xc2
 106      =1  #define  EEP_RecordMode     0xc3
 107      =1  #define  EEP_RecordLength   0xc4
 108      =1  #define  EEP_PreAlarmLength   0xc5
 109      =1  #define  EEP_PostAlarmLength  0xc6
 110      =1  #endif
 111      =1  //====================================HS AWT 981001
 112      =1  
 113      =1  //
 114      =1  //        ---------------------------------------------------------------
 115      =1  #define EEP_PCAUDIOPVOL   0x37  //BYTE  1   AudioVol
 116      =1  #define EEP_AUDIOPVOL     0x38  //BYTE  1   AudioVol
 117      =1  #define EEP_AUDIOBALANCE    0x39  //BYTE  1   AudioBalance
 118      =1  //
 119      =1  //        ---------------------------------------------------------------
 120      =1  
 121      =1  #define EEP_BLOCKMOVIE      0x40  //BYTE  1 BlockedMovie:Blocked rating for Movie 
 122      =1  #define EEP_BLOCKTV       0x41  //BYTE  1 BlockedTV:Blocked rating for TV     
 123      =1  #define EEP_FVSLD       0x42  //BYTE  6
 124      =1  //                            7    6       4    3    2    1    0
 125      =1  //  FVSLD Level                        ALL   FV(V)   S    L    D    
 126      =1  //  0x43    BYTE    1   TV-Y            X  
 127      =1  //  0x44  BYTE    1   TV-Y7           X    X 
 128      =1  //  0x45  BYTE    1   TV-G            X 
 129      =1  //  0x46  BYTE    1   TV-PG           X       X    X    X    X
 130      =1  //  0x47  BYTE    1   TV-14           X       X    X    X    X 
 131      =1  //  0x48  BYTE    1   TV-MA           X       X    X    X
 132      =1  //
 133      =1  #define EEP_VCHIPPASSWORD   0x49  //BYTE  4   OSDPassword         //Defualt:3366
 134      =1  */
 135      =1  //      ---------------------------------------------------------------
 136      =1  //
 137      =1  //
 138      =1  //  0x61  WORD  2   PanelXRes
 139      =1  //  0x63  WORD  2 PanelYRes
 140      =1  //  0x65  BYTE  1 PanelHsyncMinPulseWidth
 141      =1  //  0x66  BYTE  1 PanelVsyncMinPulseWidth
 142      =1  //  0x67  WORD  2 PanelHminBackPorch
 143      =1  //  0x69  BYTE  1 PanelHsyncPolarity
 144      =1  //  0x6a  BYTE  1 PanelVsyncPolarity
 145      =1  //  0x6b  WORD  2 PanelDotClock
 146      =1  //  0x6d  BYTE  1 PanelPixsPerClock
 147      =1  //  0x6e  BYTE  1 PanelDEonly
 148      =1  //      ---------------------------------------------------------------
 149      =1  //
 150      =1  //  0x80  PC Data
 151      =1  //
 152      =1  //      ---------------------------------------------------------------
 153      =1  //
 154      =1  //  0x300 TV Data
 155      =1  //
 156      =1  //  --- NTSC_TV -------------------------------------------------------------
 157      =1  //  CNT_SAVEDAIR      BYTE  1   Total count of saved Air TV Channel.
 158      =1  //  IDX_CURAIR        BYTE  1   Index of Current Air TV Channel
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 32  

 159      =1  //  CHN_CURAIR        BYTE    1   Current Air TV Channel.
 160      =1  //
 161      =1  //  FIRSTSAVED_AIRCHN   BYTE    1 First saved Air TV channel no (maximum 100)
 162      =1  //  ....
 163      =1  //
 164      =1  //  CNT_SAVEDCABLE      BYTE  1   Total count of saved Cable TV Channel.
 165      =1  //  IDX_CURCABLE      BYTE  1   Index of Current Cable TV Channel
 166      =1  //  CHN_CURCABLE      BYTE    1   Current Cable TV Channel.
 167      =1  //
 168      =1  //  FIRSTSAVED_CABLECHN   BYTE  1 First saved Cable TV channel no (maximum 100)
 169      =1  //
 170      =1  //  --- PAL_TV --------------------------------------------------------------
 171      =1  //  PR_CUR          BYTE  1   Current PR no.
 172      =1  //  FIRST_SAVEDPR     DWORD 4   Freq of PR0.  (TOTAL_PR)
 173      =1  //  FIRST_SAVEDPR+4     DWORD   4   Freq of PR1.
 174      =1  //  .....
 175      =1  //
 176      =1  
 177      =1  
 178      =1  
 179      =1  //
 180      =1  // Offset of EEPROM
 181      =1  //
 182      =1  /*
 183      =1  #define VIDEOCONTRAST   0x18    // for NTSC.(PAL:0x20,SECAM:0x28)
 184      =1  #define VIDEOBRIGHTNESS   0x19
 185      =1  #define VIDEOSATURATION_U 0x1a
 186      =1  #define VIDEOSATURATION_V 0x1b
 187      =1  #define VIDEOHUE      0x1c    // only for NTSC
 188      =1  #define VIDEOSHARPNESS    0x1d
 189      =1  */
 190      =1  /*
 191      =1  #define CCCOLOR   0x52
 192      =1  #define VOLZOOM   0x53
 193      =1  
 194      =1  #define PANELINFO 0x61
 195      =1  
 196      =1  // PAL_TV
 197      =1  #define  PR_CUR         0x301 
 198      =1  #define  FIRST_SAVEDPR      0x308 
 199      =1   #define TVFREQ_HIGH 0 
 200      =1   #define TVFREQ_LOW  1
 201      =1  #ifdef PAL_TV
 202      =1   #define TVFINETUNE  2
 203      =1      // NOT Finetune: 0 , Range: -32 ~ +32
 204      =1   #define TVPRSYSTEM  3  
 205      =1      // bit 7: Add:1 Ereased :0
 206      =1      // 
 207      =1   #define TVCHNAME    4
 208      =1  
 209      =1   #define BYTEPERCHANNEL 9 
 210      =1  #endif
 211      =1  // NTSC_TV
 212      =1  #define  EEP_TVInputSel     0x302
 213      =1  #define  CHN_CURAIR       0x303 
 214      =1  #define  FIRSTSAVED_AIRCHN    0x308 
 215      =1  #define  CHN_CURCABLE     0x403 
 216      =1  #define  FIRSTSAVED_CABLECHN  0x408 
 217      =1  #ifdef NTSC_TV
 218      =1   #define TVFINETUNE  0
 219      =1      // NOT Finetune: 0 , Range: -32 ~ +32
 220      =1   #define TVPRSYSTEM  1  
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 33  

 221      =1      // bit 7: Add:1 Ereased :0
 222      =1      // 
 223      =1   #define BYTEPERCHANNEL 2
 224      =1  #endif
 225      =1  
 226      =1  */
 227      =1  
 228      =1  
 229      =1  WORD GetFWRevEE(void);
 230      =1  void SaveFWRevEE(WORD);
 231      =1  
 232      =1  BYTE GetDebugLevelEE(void);
 233      =1  void SaveDebugLevelEE(BYTE);
 234      =1  
 235      =1  #if 0//def WIDE_SCREEN
           =1 BYTE GetWideModeEE(void);
           =1 void SaveWideModeEE(BYTE dl);
           =1 #endif
 239      =1  
 240      =1  /*
 241      =1  //BYTE GetRange4CoarseEE(void);
 242      =1  //void SaveRange4CoarseEE(BYTE);
 243      =1  
 244      =1  BYTE GetPossibleAutoDetectStdEE(void);
 245      =1  void SetPossibleAutoDetectStdEE(void);
 246      =1  
 247      =1  //BYTE GetOSDXPositionEE(void);
 248      =1  //BYTE GetOSDYPositionEE(void);
 249      =1  BYTE GetClosedCaptionFlagEE(void);
 250      =1  
 251      =1  BYTE GetVideoDatafromEE(BYTE);
 252      =1  void SaveVideoDatatoEE(BYTE offset, BYTE ndata);
 253      =1  
 254      =1  //BYTE GetVideoBrightnessEE(void);
 255      =1  //BYTE GetVideoSaturationEE(BYTE);
 256      =1  //BYTE GetVideoHueEE(void);
 257      =1  //BYTE GetVideoSharpnessEE(void);
 258      =1  
 259      =1  //void SaveVideoContrastEE(BYTE ndata);
 260      =1  //void SaveVideoBrightnessEE(BYTE ndata);
 261      =1  //void SaveVideoSaturationEE(BYTE, BYTE ndata);
 262      =1  //void SaveVideoHueEE(BYTE ndata);
 263      =1  //void SaveVideoSharpnessEE(BYTE ndata);
 264      =1  
 265      =1  BYTE GetOSDPositionModeEE(void);
 266      =1  void SaveOSDPositionModeEE(BYTE ndata);
 267      =1  //void SaveOSDXPositionEE(BYTE);
 268      =1  //void SaveOSDYPositionEE(BYTE);
 269      =1  
 270      =1  void SaveClosedCaptionFlagEE(BYTE);
 271      =1  
 272      =1  BYTE GetBlockedTVEE(void);      
 273      =1  void SaveBlockedTVEE(BYTE vi);    
 274      =1  BYTE GetBlockedTV_FLDSLEE( BYTE level ) ;
 275      =1  void SaveBlockedTV_FLDSLEE(BYTE level, BYTE vi) ;
 276      =1  
 277      =1  BYTE GetBlockedMovieEE(void);   
 278      =1  void SaveBlockedMovieEE(BYTE vi); 
 279      =1  #if 0
 280      =1  BYTE GetInputSelectionEE(void);
 281      =1  #endif
 282      =1  void SaveInputSelectionEE(BYTE val);
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 34  

 283      =1  
 284      =1  //BYTE GetOSDDurationEE(void);
 285      =1  //void SaveOSDDurationEE(BYTE val);
 286      =1  
 287      =1  BYTE GetOSDLangEE(void);
 288      =1  void SaveOSDLangEE(BYTE val);
 289      =1  
 290      =1  //ljy100303...BYTE GetOSDZoomEE(void);
 291      =1  //ljy100303...void SaveOSDZoomEE(BYTE val);
 292      =1  
 293      =1  BYTE GetAudioVolEE(void);
 294      =1  void SetAudioVolEE( BYTE vol );
 295      =1  BYTE GetPCAudioVolEE(void);
 296      =1  void SetPCAudioVolEE( BYTE vol );
 297      =1  */
 298      =1  #if 0
           =1 BYTE GetAudioBalanceEE(void);
           =1 void SetAudioBalanceEE( BYTE vol );
           =1 BYTE GetAudioBassEE(void);
           =1 void SetAudioBassEE( BYTE vol );
           =1 BYTE GetAudioTrebleEE(void);
           =1 void SetAudioTrebleEE( BYTE vol );
           =1 #endif
 306      =1  //BYTE GetAudioEffectEE(void);
 307      =1  //void SetAudioEffectEE( BYTE vol );
 308      =1  
 309      =1  void ClearBasicEE(void);
 310      =1  /*
 311      =1  BYTE ValidPassword(DATA_P BYTE *numstr, BYTE index);
 312      =1  BYTE SetNewPassword(DATA_P BYTE *numstr, BYTE index);
 313      =1  */
 314      =1  //WORD GetPanelXRes(void);
 315      =1  //WORD GetPanelYRes(void);
 316      =1  /*
 317      =1  BYTE GetPanelHsyncMinPulseWidth(void);
 318      =1  BYTE GetPanelVsyncMinPulseWidth(void);
 319      =1  WORD GetPanelHMinBackPorch(void);
 320      =1  BYTE GetPanelHsyncPolarity(void);
 321      =1  BYTE GetPanelVsyncPolarity(void);
 322      =1  WORD GetPanelDotClock(void);
 323      =1  WORD GetPanelMaxClock(void);
 324      =1  BYTE GetPanelPixsPerClock(void);
 325      =1  // Not used yet *************************  BYTE GetPanelDEonly(void);
 326      =1  
 327      =1  void AddTVChannelEE( BYTE tvtype, BYTE chn);
 328      =1  BYTE GetTVChannelEE( BYTE tvtype, BYTE inx);
 329      =1  void ResetTVChannelEE( BYTE tvtype );
 330      =1  BYTE GetTVChannelCntEE(BYTE tvtype);
 331      =1  BYTE GetTVChnIdxEE(BYTE tvtype);
 332      =1  BYTE GetCurTVChannelEE(BYTE tvtype);
 333      =1  void SetTVChnIdxEE(BYTE tvtype, BYTE newd);
 334      =1  void SetCurTVChannelEE(BYTE tvtype, BYTE newd);
 335      =1  BYTE InsertTVChannelEE(BYTE tvtype, BYTE newd);
 336      =1  BYTE RemoveTVChannelEE(BYTE tvtype, BYTE newd);
 337      =1  
 338      =1  void SetTVPrEE(void);
 339      =1  BYTE GetTVPrEE(void);
 340      =1  void SetTVFreqEE(BYTE, WORD);
 341      =1  WORD GetTVFreqEE(BYTE);
 342      =1  void SetFineTuneEE(BYTE, BYTE);
 343      =1  BYTE GetFineTuneEE(BYTE);
 344      =1  BYTE GetTVPrSystem(BYTE);
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 35  

 345      =1  void SetTVPrSystem(BYTE, BYTE);
 346      =1  BYTE GetTVInputSelEE(void);
 347      =1  void SetTVInputSelEE(BYTE);
 348      =1  */
 349      =1  /*
 350      =1  #define GetVInputStdDetectModeEE()        ReadEEP(EEP_AUTODETECTTYTE)
 351      =1  #define SaveVInputStdDetectModeEE(A)      WriteEEP(EEP_AUTODETECTTYTE, A)
 352      =1  
 353      =1  #define GetAutoRecogntionEE()         ReadEEP(EEP_AUTORECOGNITION)
 354      =1  #define SaveAutoRecogntionEE(A)         WriteEEP(EEP_AUTORECOGNITION, A)
 355      =1  
 356      =1  #define SetVideoModeEE( ctid )          WriteEEP( EEP_VIDEOMODE, ctid )
 357      =1  #define GetVideoModeEE()            ReadEEP( EEP_VIDEOMODE )
 358      =1  
 359      =1  #define GetPanelContrastEE()          ReadEEP(0x10)
 360      =1  
 361      =1  #if defined( SUPPORT_PC ) || defined( SUPPORT_DTV )
 362      =1  //#define GetPanelHueEE()             ReadEEP(0x28)
 363      =1  //#define GetPanelSharpnessEE()         ReadEEP(0x29)
 364      =1  #define GetPanelBrightnessEE()          ReadEEP(0x11)
 365      =1  //#define GetPanelSaturationEE()          ReadEEP(0x2a)
 366      =1  
 367      =1  //#define SavePanelHueEE(A)           WriteEEP(0x28, A)
 368      =1  //#define SavePanelSharpnessEE(A)         WriteEEP(0x29, A)
 369      =1  #define SavePanelContrastEE(A)          WriteEEP(0x10, A)
 370      =1  #define SavePanelBrightnessEE(A)        WriteEEP(0x11, A)
 371      =1  //#define SavePanelSaturationEE(A)        WriteEEP(0x2a, A)
 372      =1  #endif
 373      =1  */
 374      =1  /*
 375      =1  #define GetDigitalVideoContrastEE()       ReadEEP(0x2b)
 376      =1  #define GetDigitalVideoBrightnessEE()     ReadEEP(0x2c)
 377      =1  #define GetDigitalVideoHueEE()          ReadEEP(0x2d)
 378      =1  #define GetDigitalVideoSaturationEE(off)    ReadEEP(0x2e+off)
 379      =1  
 380      =1  #define SaveDigitalVideoContrastEE(A)     WriteEEP(0x2b, A)
 381      =1  #define SaveDigitalVideoBrightnessEE(A)     WriteEEP(0x2c, A)
 382      =1  #define SaveDigitalVideoHueEE(A)        WriteEEP(0x2d, A)
 383      =1  #define SaveDigitalVideoSaturationEE(off,A)   WriteEEP(0x2e+off, A)
 384      =1  */
 385      =1  
 386      =1  #endif  // __ETC_EEP__
  35          //#include "measure.h"
  36          #include "Printf.h"
   1      =1  #ifndef __PRINTF__
   2      =1  #define __PRINTF__
   3      =1  
   4      =1  #define _outchar(c) while(1) { if( !RS_Xbusy ) { SBUF = c; RS_Xbusy=1; break; } }
   5      =1  #define Putch(c) _outchar(c)
   6      =1  
   7      =1  #ifdef SERIAL
   8      =1  
   9      =1   void Printf ( const char CODE_P *fmt, ... );
  10      =1   void Puts ( CODE_P char *ptr );
  11      =1  
  12      =1  #define TW2835Cmd(a)   Puts ( a )
  13      =1  
  14      =1  #else
           =1 
           =1  #undef  DEBUG
           =1  #define Printf(a,b)  //
           =1  #define Puts(a)      //
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 36  

           =1 
           =1 #endif
  21      =1  
  22      =1  
  23      =1  #ifndef DEBUG
  24      =1  
  25      =1   #define dPuts(a)   //
  26      =1   #define wPuts(a)   //
  27      =1   #define ePuts(a)   //
  28      =1  
  29      =1  #else
           =1 
           =1  void dPrintf( const char CODE_P *fmt, ... );
           =1  void wPrintf( const char CODE_P *fmt, ... );
           =1  void ePrintf( const char CODE_P *fmt, ... );
           =1 
           =1  void dPuts( CODE_P char *ptr );
           =1  void wPuts( CODE_P char *ptr );
           =1  void ePuts( CODE_P char *ptr );
           =1 
           =1 #endif  // DEBUG
  40      =1  
  41      =1  BYTE Getch(void);
  42      =1  BYTE Getche(void);
  43      =1  
  44      =1  
  45      =1  #endif  //__PRINTF__
  37          //#include "audio.h"
  38          //#include "osdmenu.h"
  39          //#include "pc_eep.h"
  40          #include "KeyRemo.h"
   1      =1  #ifndef __KEYREMO_H__
   2      =1  #define __KEYREMO_H__
   3      =1  
   4      =1  //
   5      =1  // KeyRemo.h
   6      =1  // Default function for Key Input and Remocon Input
   7      =1  //
   8      =1  //=============================================================================
   9      =1  //                        Operation Key Mapping
  10      =1  //=============================================================================
  11      =1  
  12      =1  
  13      =1  
  14      =1  /*
  15      =1  
  16      =1  #define ResetKey()    { P2 = 0xff;}
  17      =1  //#define ReadKey()   (~P1 & 0xfc);
  18      =1  
  19      =1  
  20      =1  #define DVR_POWER 0x01
  21      =1  #define DVR_MENU  0x03
  22      =1  #define DVR_RECORD  0x05
  23      =1  #define DVR_PLAY  0x07
  24      =1  #define DVR_STOP  0x09
  25      =1  #define DVR_RIGHT 0x0b
  26      =1  #define DVR_LEFT  0x0d
  27      =1  #define DVR_UP    0x10
  28      =1  #define DVR_DOWN  0x12
  29      =1  #define DVR_RESET 0x13
  30      =1  #define DVR_FAC     0x99
  31      =1  #define DVR_RESET_OSD   0x98
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 37  

  32      =1  */
  33      =1  
  34      =1  #if 0//def QUAD
           =1 #define EVENTKEY    0x02
           =1 #endif
  37      =1  /*
  38      =1  #define POWERKEY    0x04 //andy AWT 980907
  39      =1  #define MENUKEY     0x08
  40      =1  #define INPUTSOURCEKEY  0x10
  41      =1  #define UPKEY       0x20
  42      =1  #define DOWNKEY       0x40
  43      =1  #define SELECTKEY     0x80
  44      =1  #define VersionKEY      0x90
  45      =1  #define PLAYKEY         0x01
  46      =1  
  47      =1  #define REMO_CUSTOM   0
  48      =1  
  49      =1  #define REMO_NUM0   0
  50      =1  #define REMO_NUM1   1
  51      =1  #define REMO_NUM2   2
  52      =1  #define REMO_NUM3   3
  53      =1  #define REMO_NUM4   4
  54      =1  #define REMO_NUM5   5
  55      =1  #define REMO_NUM6   6
  56      =1  #define REMO_NUM7   7
  57      =1  #define REMO_NUM8   8
  58      =1  #define REMO_NUM9   9
  59      =1  
  60      =1  #define REMO_STANDBY  12
  61      =1  #define REMO_CHNUP    32
  62      =1  #define REMO_CHNDN    33
  63      =1  #define REMO_VOLUP    16
  64      =1  #define REMO_VOLDN    17
  65      =1  #define REMO_SELECT   21
  66      =1  #define REMO_MENU   63
  67      =1  #define REMO_MUTE   13
  68      =1  #define REMO_INPUT    56
  69      =1  
  70      =1  #define REMO_AUTO   10
  71      =1  #define REMO_INFO   58
  72      =1  #define REMO_AUDIO    38
  73      =1  #define REMO_ASPECT   62
  74      =1  #define REMO_CC     15
  75      =1  #define REMO_EXIT   0x16
  76      =1  
  77      =1  #define REMO_TTXRED     0x37
  78      =1  #define REMO_TTXGREEN   0x36
  79      =1  #define REMO_TTXYELLOW    0x32
  80      =1  #define REMO_TTXCYAN    0x34
  81      =1  
  82      =1  */
  83      =1  
  84      =1  //=============================================================================
  85      =1  //                                 RC5 type
  86      =1  //=============================================================================
  87      =1  #if 0//def REMO_RC5
           =1 
           =1 #ifdef TECHWELL_REMOCON
           =1 #define REMO_CUSTOM   0
           =1 
           =1 #define REMO_NUM0   0
           =1 #define REMO_NUM1   1
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 38  

           =1 #define REMO_NUM2   2
           =1 #define REMO_NUM3   3
           =1 #define REMO_NUM4   4
           =1 #define REMO_NUM5   5
           =1 #define REMO_NUM6   6
           =1 #define REMO_NUM7   7
           =1 #define REMO_NUM8   8
           =1 #define REMO_NUM9   9
           =1 
           =1 #define REMO_STANDBY  12
           =1 #define REMO_CHNUP    32
           =1 #define REMO_CHNDN    33
           =1 #define REMO_VOLUP    16
           =1 #define REMO_VOLDN    17
           =1 #define REMO_SELECT   21
           =1 #define REMO_MENU   63
           =1 //#define REMO_TV     63
           =1 //#define REMO_VCR    60
           =1 //#define REMO_SVIDEO   56
           =1 #define REMO_MUTE   13
           =1 #define REMO_INPUT    56
           =1 
           =1 #define REMO_AUTO   10
           =1 #define REMO_INFO   58
           =1 #define REMO_AUDIO    38
           =1 #define REMO_ASPECT   62
           =1 #define REMO_CC     15
           =1 #define REMO_EXIT   0x16
           =1 
           =1 #define REMO_TTXRED     0x37
           =1 #define REMO_TTXGREEN   0x36
           =1 #define REMO_TTXYELLOW    0x32
           =1 #define REMO_TTXCYAN    0x34
           =1 
           =1 #ifdef SUPPORT_DEBUG
           =1 #define REMO_DEBUG    0x2b
           =1 #define REMO_READ   0x29
           =1 #define REMO_WRITE    0x2a
           =1 #define REMO_RESERVED 0x30
           =1 #endif
           =1 
           =1 #else 
           =1 #define REMO_CUSTOM   0
           =1 
           =1 #define REMO_NUM0   0
           =1 #define REMO_NUM1   1
           =1 #define REMO_NUM2   2
           =1 #define REMO_NUM3   3
           =1 #define REMO_NUM4   4
           =1 #define REMO_NUM5   5
           =1 #define REMO_NUM6   6
           =1 #define REMO_NUM7   7
           =1 #define REMO_NUM8   8
           =1 #define REMO_NUM9   9
           =1 
           =1 #define REMO_STANDBY  12
           =1 #define REMO_CHNUP    32
           =1 #define REMO_CHNDN    33
           =1 #define REMO_VOLUP    16
           =1 #define REMO_VOLDN    17
           =1 #define REMO_SELECT   18
           =1 #define REMO_MENU   48
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 39  

           =1 #define REMO_TV     63
           =1 #define REMO_VCR    60
           =1 #define REMO_SVIDEO   56
           =1 #define REMO_MUTE   13
           =1 #define REMO_INPUT    0xff
           =1 
           =1 #define REMO_INFO   0x0a //??
           =1 #endif
           =1 
           =1 //=============================================================================
           =1 //                                 NEC type
           =1 //=============================================================================
           =1 #elif defined REMO_NEC
           =1 /*
           =1 // Techwell Origin
           =1 #define REMO_CUSTOM1  0x20
           =1 #define REMO_CUSTOM2  0xdf
           =1 
           =1 
           =1 #define REMO_NUM0   0x08
           =1 #define REMO_NUM1   0x88
           =1 #define REMO_NUM2   0x48
           =1 #define REMO_NUM3   0xc8
           =1 #define REMO_NUM4   0x28
           =1 #define REMO_NUM5   0xa8
           =1 #define REMO_NUM6   0x68
           =1 #define REMO_NUM7   0xe8
           =1 #define REMO_NUM8   0x18
           =1 #define REMO_NUM9   0x98
           =1 
           =1 #define REMO_STANDBY  0x10
           =1 #define REMO_CHNUP    0x00
           =1 #define REMO_CHNDN    0x80
           =1 #define REMO_VOLUP    0x40
           =1 #define REMO_VOLDN    0xc0
           =1 #define REMO_SELECT   0x70
           =1 #define REMO_MENU   0x9c
           =1 #define REMO_MUTE   0x90
           =1 #define REMO_INPUT    0xd0
           =1 */
           =1 
           =1 // Techwell New Remocon after 4/7/2005
           =1 #if 0//def PHILIPS_REMOCON
           =1 #define REMO_CUSTOM1  0x02
           =1 #define REMO_CUSTOM2  0xfd
           =1 
           =1 #define REMO_NUM0   0x00
           =1 #define REMO_NUM1   0x80
           =1 #define REMO_NUM2   0x40
           =1 #define REMO_NUM3   0xc0
           =1 #define REMO_NUM4   0x20
           =1 #define REMO_NUM5   0xa0
           =1 #define REMO_NUM6   0x60
           =1 #define REMO_NUM7   0xe0
           =1 #define REMO_NUM8   0x10
           =1 #define REMO_NUM9   0x90
           =1 
           =1 #define REMO_STANDBY  0x48
           =1 #define REMO_CHNUP    0xd8
           =1 #define REMO_CHNDN    0xf8
           =1 #define REMO_VOLUP    0x58
           =1 #define REMO_VOLDN    0x78
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 40  

           =1 #define REMO_SELECT   0xe8
           =1 #define REMO_MENU   0x01
           =1 #define REMO_MUTE   0x08
           =1 #define REMO_INPUT    0xf0
           =1 
           =1 #define REMO_INFO   0x38
           =1 
           =1 
           =1 
           =1 #define REMO_TTXRED     0x4E
           =1 #define REMO_TTXGREEN   0x8E
           =1 #define REMO_TTXYELLOW    0xC6
           =1 #define REMO_TTXCYAN    0x86
           =1 
           =1 /#else
           =1 // RYU For Test
           =1 #define REMO_CUSTOM1    0x04
           =1 #define REMO_CUSTOM2    0xfb
           =1 
           =1 #define REMO_NUM0   0xf8
           =1 #define REMO_NUM1   0x48
           =1 #define REMO_NUM2   0xc8
           =1 #define REMO_NUM3   0x28
           =1 #define REMO_NUM4   0xa8
           =1 #define REMO_NUM5   0x18
           =1 #define REMO_NUM6   0x98
           =1 #define REMO_NUM7   0x58
           =1 #define REMO_NUM8   0xd8
           =1 #define REMO_NUM9   0x78
           =1 
           =1 #define REMO_STANDBY  0x00
           =1 #define REMO_CHNUP    0x40  //
           =1 #define REMO_CHNDN    0x70  //
           =1 #define REMO_VOLUP    0x90  //
           =1 #define REMO_VOLDN    0xe0  //
           =1 #define REMO_SELECT   0x11//??
           =1 #define REMO_MENU   0x10
           =1 
           =1 #define REMO_MUTE   0x60
           =1 #define REMO_INPUT    0xc0
           =1 #define REMO_AUTO   0x30
           =1 #define REMO_AUTOSCAN 0x80
           =1 #define REMO_TV     0x20
           =1 #define REMO_EXIT   0xa0
           =1 #define REMO_INFO   0x08
           =1 #define REMO_ASPECT   0x62
           =1 
           =1 #define REMO_TTXRED   0xb8
           =1 #define REMO_TTXGREEN 0x02
           =1 #define REMO_TTXYELLOW  0x82
           =1 #define REMO_TTXCYAN  0x42
           =1 
           =1 #ifdef SUPPORT_DEBUG
           =1 #define REMO_DEBUG    0xb8
           =1 #define REMO_READ   0x02
           =1 #define REMO_WRITE    0x82
           =1 #endif
           =1 
           =1 #endif //PHILIPS_REMOCON
           =1 
           =1 #endif // REMO_NEC
 279      =1  
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 41  

 280      =1  BYTE GetKey(BYTE repeat);
 281      =1  void Scankey(void);
 282      =1  
 283      =1  /*
 284      =1  BYTE ActionRemo(BYTE, BYTE);
 285      =1  BYTE CheckKeyIn(void);
 286      =1  
 287      =1  BYTE IsRemoDataReady(BYTE *, BYTE *);
 288      =1  
 289      =1  void protocol_send_cmd_with_param_num(unsigned char type, unsigned char* param, unsigned char len) ;
 290      =1  BYTE ScanPowerkey(void);
 291      =1  */
 292      =1  
 293      =1  #endif
  41          #include "Monitor.h"
   1      =1  #ifndef __MONITOR__H_
   2      =1  #define __MONITOR__H_
   3      =1  
   4      =1  
   5      =1  /* monitor.h */
   6      =1  
   7      =1  
   8      =1  void Mon_tx(BYTE ch);
   9      =1  
  10      =1  void MonHelp(void);
  11      =1  BYTE MonGetCommand(void);
  12      =1  void Monitor(void);
  13      =1  void Prompt(void);
  14      =1  
  15      =1  BYTE GetMonAddress(void);
  16      =1  void SetMonAddress(BYTE addr);
  17      =1  void MonReadI2C(void);
  18      =1  void MonWriteI2C(void);
  19      =1  extern void SET_PWM(BYTE index, BYTE val);
  20      =1  
  21      =1  #endif
  42          #include "CPU.h"
   1      =1  #ifndef __CPU__
   2      =1  #define __CPU__
   3      =1  
   4      =1  /*
   5      =1  #ifdef INTERNAL_MCU
   6      =1  #define I2C_SCL   P2_0
   7      =1  #else
   8      =1  #define I2C_SCL   P1_0
   9      =1  #endif
  10      =1  #define I2C_SDA   P1_1
  11      =1  */
  12      =1  #define I2C_SCL   P1_0
  13      =1  #define I2C_SDA   P1_1
  14      =1  #define BUF_MAX   8
  15      =1  #define DVR_BUF_MAX   30
  16      =1  
  17      =1  //--------------------------------------------------
  18      =1  // Panel  Related MACRO
  19      =1  //--------------------------------------------------
  20      =1  #define GET_P_IO1()   (P3_4)  
  21      =1  #define SET_P_IO1()   (P3_4 = 1)    
  22      =1  #define CLR_P_IO1()   (P3_4 = 0)  
  23      =1  
  24      =1  #define GET_P_IO2()   (P3_5)  
  25      =1  #define SET_P_IO2()   (P3_5 = 1)    
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 42  

  26      =1  #define CLR_P_IO2()   (P3_5 = 0)  
  27      =1  
  28      =1  #define GET_BL_PWM()    (P1_4)  
  29      =1  #define SET_BL_PWM()    (P1_4 = 1)    //ON
  30      =1  #define CLR_BL_PWM()    (P1_4 = 0)  //OFF
  31      =1  
  32      =1  #define GET_PCON3V3_P()  (P0_3) 
  33      =1  #define SET_PCON3V3_P()  (P0_3 = 0)    //ON
  34      =1  #define CLR_PCON3V3_P()  (P0_3 = 1) //OFF
  35      =1  
  36      =1  #define GET_PCON5V_P()   (P0_4) 
  37      =1  #define SET_PCON5V_P()   (P0_4 = 0)    //ON
  38      =1  #define CLR_PCON5V_P()   (P0_4 = 1) //OFF
  39      =1  
  40      =1  #define GET_Panel_EN()   (P2_1) 
  41      =1  #define SET_Panel_EN()   (P2_1 = 1)    //ON
  42      =1  #define CLR_Panel_EN()   (P2_1 = 0) //OFF
  43      =1  
  44      =1  #define GET_CTP_INT()   (P2_4)  
  45      =1  #define SET_CTP_INT()   (P2_4 = 1)     //ON
  46      =1  #define CLR_CTP_INT()   (P2_4 = 0)  //OFF
  47      =1  
  48      =1  #define GET_CTP_RST()   (P2_5)  
  49      =1  #define SET_CTP_RST()   (P2_5 = 1)     //ON
  50      =1  #define CLR_CTP_RST()   (P2_5 = 0)  //OFF
  51      =1  
  52      =1  #define GET_PWCTRL()    (P3_7)  
  53      =1  #define SET_PWCTRL()    (P3_7 = 1)     //ON
  54      =1  #define CLR_PWCTRL()    (P3_7 = 0)  //OFF
  55      =1  
  56      =1  //--------------------------------------------------
  57      =1  // Battery  Related MACRO
  58      =1  //--------------------------------------------------
  59      =1  
  60      =1  #define GET_PWR_GOOD()  (P1_5)    
  61      =1  
  62      =1  #define GET_STAT1()   (P0_0)    
  63      =1  #define GET_STAT2()   (P0_1)    
  64      =1  
  65      =1  #define GET_CHG_CURR()    (P0_6)  
  66      =1  #define SET_CHG_CURR()    (P0_6 = 1)     //ON
  67      =1  #define CLR_CHG_CURR()    (P0_6 = 0)  //OFF
  68      =1  
  69      =1  #define GET_AC_MODE()   (P4_2)  
  70      =1  #define SET_AC_MODE()   (P4_2 = 1)     //ON
  71      =1  #define CLR_AC_MODE()   (P4_2 = 0)  //OFF
  72      =1  
  73      =1  //--------------------------------------------------
  74      =1  // DVR Power  Related MACRO
  75      =1  //--------------------------------------------------
  76      =1  
  77      =1  #define GET_BAT_SYS()   (P2_6)  
  78      =1  #define SET_BAT_SYS()   (P2_6 = 1)     //ON
  79      =1  #define CLR_BAT_SYS()   (P2_6 = 0)  //OFF
  80      =1  
  81      =1  //--------------------------------------------------
  82      =1  // CAM Power  Related MACRO
  83      =1  //--------------------------------------------------
  84      =1  
  85      =1  #define GET_PCON_CAM()    (P2_2)  
  86      =1  #define SET_PCON_CAM()    (P2_2 = 1)     //ON
  87      =1  #define CLR_PCON_CAM()    (P2_2 = 0)  //OFF
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 43  

  88      =1  
  89      =1  //--------------------------------------------------
  90      =1  // TW8836 Power  Related MACRO
  91      =1  //--------------------------------------------------
  92      =1  
  93      =1  #define GET_PCON3V3_TW()    (P3_6)  
  94      =1  #define SET_PCON3V3_TW()    (P3_6 = 0)     //ON
  95      =1  #define CLR_PCON3V3_TW()    (P3_6 = 1)  //OFF
  96      =1  
  97      =1  #define GET_TW8836_RST()      (P2_0)  
  98      =1  #define SET_TW8836_RST()      (P2_0 = 0)     //ON
  99      =1  #define CLR_TW8836_RST()      (P2_0 = 1)  //OFF
 100      =1  
 101      =1  
 102      =1  //--------------------------------------------------
 103      =1  // I/O board  Related MACRO
 104      =1  //--------------------------------------------------
 105      =1  
 106      =1  #define GET_GREEN()       (P4_0)  
 107      =1  #define SET_GREEN()       (P4_0 = 0)     
 108      =1  #define CLR_GREEN()       (P4_0 = 1)  
 109      =1  
 110      =1  #define GET_RED()         (P4_1)  
 111      =1  #define SET_RED()         (P4_1 = 0)     
 112      =1  #define CLR_RED()         (P4_1 = 1)  
 113      =1  
 114      =1  #define GET_PSW()       (P4_3)  
 115      =1  #define SET_PSW()       (P4_3 = 1)     
 116      =1  #define CLR_PSW()       (P4_3 = 0)  
 117      =1  
 118      =1  #define GET_ADAP_12()     (P0_5)  
 119      =1  #define SET_ADAP_12()     (P0_5 = 1)     
 120      =1  #define CLR_ADAP_12()     (P0_5 = 0)  
 121      =1  
 122      =1  
 123      =1  #ifdef REMO_RC5
           =1 #define EnableRemoconInt()  { RemoDataReady = 0;  EX0 = 1;}
           =1 #endif
 126      =1  void  InitCPU(void);
 127      =1  void  InitVars(void);
 128      =1  void  InitTechwell(void);
 129      =1  void  main_init (void);
 130      =1  void  PowerDown( void );
 131      =1  #if 0
           =1 BYTE  OKSleepTime(void);
           =1 #endif
 134      =1  #ifdef REMO_RC5
           =1 void  InitForRemo(void);
           =1 #endif
 137      =1  void  PowerLED(BYTE flag);
 138      =1  void    Wait_ms(WORD Tms);
 139      =1  BYTE    TW2835Command(char,char,char,char,char);
 140      =1  void SET_PWM(BYTE index, BYTE val);
 141      =1  
 142      =1  #endif
  43          //#include "HS_keyremo.h"
  44          //#include "HS_DisplayOSD.h"
  45          //#include "rgbmix.h"     
  46          //#include "panel.h"
  47          //#include "HS_IOdef.h"
  48          #include "HS_DVRProtocol.h"
   1      =1  
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 44  

   2      =1  #ifndef _HS_DVRProtocol_
   3      =1  #define _HS_DVRProtocol_
   4      =1  
   5      =1  //==================================================
   6      =1  //
   7      =1  //
   8      =1  //
   9      =1  //==================================================
  10      =1  /*
  11      =1  #define bSetDVRParam  0x0001
  12      =1  #define bSetDVRDefault  0x0002
  13      =1  #define bSetDATETIME  0x0004
  14      =1  #define bGetDVRParam  0x0008
  15      =1  #define bGetDVRStatus 0x0010
  16      =1  #define bGetDATETIME  0x0020
  17      =1  #define bBOOKMARK   0x0040
  18      =1  #define bSetSystem    0x0080
  19      =1  #define bHalt_Start     0x0100
  20      =1  #define bSetFormatSD    0x0200  
  21      =1  #define bGetDVRVersion  0x0400  
  22      =1  #define bFW_Update_Start 0x0800
  23      =1  #define bUpdate_CONFIG  0x1000
  24      =1  #define bDoorClose    0x2000
  25      =1  #define bDoorOpen     0x4000
  26      =1  */
  27      =1  //DVR to MCU command 
  28      =1  
  29      =1  #define MCU_PROTOCOL_CMD_SYS_READY_NOTICE   0x01///DVR system ready notice
  30      =1  #define MCU_PROTOCOL_CMD_WATCH_DOG_KICK     0x02///DVR WDT kick
  31      =1  #define MCU_PROTOCOL_CMD_ENTRY_SLEEP        0x03///DVR sleep mode
  32      =1  #define MCU_PROTOCOL_CMD_DISTANCE_RESET     0x04///DVR distance reset  0M
  33      =1  #define MCU_PROTOCOL_CMD_ENCODER_SET        0x05///Encoder deviation setting
  34      =1  #define MCU_PROTOCOL_CMD_CAMERA_VOLTAGE     0x06///Camera voltage adjust
  35      =1  #define MCU_PROTOCOL_CMD_STOP_REBOOT                        0x07///stop retoot 
  36      =1  #define MCU_PROTOCOL_CMD_GET_MCU_FW     0x10///MCU FW version
  37      =1  #define MCU_PROTOCOL_CMD_DVR_REBOOT     0x11///DVR Reboot
  38      =1  #define MCU_PROTOCOL_CMD_DVR_SHUTDOWN   0x12///DVR shutdown
  39      =1  
  40      =1  //MCU to DVR command 
  41      =1  #define MCU_PROTOCOL_CMD_REPLY_MCU_FW     0x80  //Reply MCU firmware version
  42      =1  #define MCU_PROTOCOL_CMD_REGULAR_DATA       0x81      //Regular data
  43      =1  #define MCU_PROTOCOL_CMD_SYSTEM_SHUTDOWN    0x82      //system shutdown
  44      =1  #define MCU_PROTOCOL_CMD_ENTRY_FACTORY      0x83      //Entry factory mode
  45      =1  
  46      =1  // 3521 Command
  47      =1  #define CMD_TEMP      0x0A
  48      =1  #define CMD_BATERY      0x0B
  49      =1  #define CMD_ROLLENC     0x0C
  50      =1  #define CMD_MCU_ROLLENC     0x80
  51      =1  #define CMD_MCU_TEMP      0x8A
  52      =1  #define CMD_MCU_BATERY    0x8B
  53      =1  #define CMD_DVR_PING        0x00
  54      =1  
  55      =1  #define CMD_OSDTYPE      0x11
  56      =1  #define CMD_KEY        0x12
  57      =1  #define CMD_BRIGHTNESS     0x13
  58      =1  #define CMD_GET_VERSION    0x18
  59      =1  #define CMD_RESPONSE_VERSION 0x09
  60      =1  #define CMD_REC_LED          0x0D
  61      =1  #define CMD_Protect_POWER  0x39
  62      =1  #define CMD_POWER_ON         0x38
  63      =1  #define CMD_BATT_Lo     0x40
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 45  

  64      =1  
  65      =1  #define CMD_POWER_SEL        0x0E
  66      =1  #define CMD_POWER_LINK     0x0F
  67      =1  
  68      =1  
  69      =1  
  70      =1  
  71      =1  #define PROTOCOL_DEFINE
  72      =1  
  73      =1  #define PROTOCOL_DATA_LENGTH                256
  74      =1  
  75      =1  #define PROTOCOL_STATE_NONE               0
  76      =1  #define PROTOCOL_STATE_TYPE               1
  77      =1  #define PROTOCOL_STATE_LENGTH             2
  78      =1  #define PROTOCOL_STATE_DATA               3
  79      =1  #define PROTOCOL_STATE_CHECKSUM             4
  80      =1  
  81      =1  #define PROTOCOL_MCU_VERSION                          0x22
  82      =1  #define PROTOCOL_CMD_GET_VERSION                      0x08
  83      =1  #define PROTOCOL_RESPONSE_VERSION           0x09
  84      =1  
  85      =1  #define PROTOCOL_CMD_ENTER_ISP              0x30
  86      =1  #define PROTOCOL_CMD_ISP_PING             0x31
  87      =1  #define PROTOCOL_CMD_ISP_ERASE              0x32
  88      =1  #define PROTOCOL_CMD_ISP_WRITE              0x33
  89      =1  #define PROTOCOL_CMD_ISP_READ             0x34
  90      =1  #define PROTOCOL_CMD_ISP_SEND_DATA            0x35
  91      =1  #define PROTOCOL_CMD_ISP_ACK              0x36
  92      =1  #define PROTOCOL_CMD_ISP_NAK              0x37
  93      =1  #define PROTOCOL_CMD_ISP_REBOOT             0x38
  94      =1  
  95      =1  enum BATERY_State
  96      =1  {
  97      =1   BATERY_100,
  98      =1   BATERY_75,
  99      =1   BATERY_50,
 100      =1   BATERY_25,
 101      =1   BATERY_10,
 102      =1   BATERY_AC
 103      =1  };
 104      =1  
 105      =1  enum BRIGHTNESS_STATE
 106      =1  {
 107      =1    BRIGHTNESS_MIN,
 108      =1    BRIGHTNESS_NORMAL,
 109      =1    BRIGHTNESS_MAX
 110      =1  };
 111      =1  
 112      =1  enum POWER_STATE
 113      =1  {
 114      =1    POWER_SEL_ON,
 115      =1    POWER_SEL_OFF,
 116      =1    POWER_SEL_SAVING
 117      =1  };
 118      =1  
 119      =1  enum TEMP_State
 120      =1  {
 121      =1   TEMP_OK,
 122      =1   TEMP_Alarm1,
 123      =1   TEMP_Alarm2
 124      =1  };
 125      =1  /*
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 46  

 126      =1  enum HS_DvrCommand
 127      =1  {
 128      =1    CMD_NULL,
 129      =1    SetDVRParam,  // 1
 130      =1    SetDVRDefault,
 131      =1    SetDATETIME,
 132      =1    GetDVRParam,
 133      =1    GetDVRStatus,
 134      =1    GetDATETIME, 
 135      =1    SetFormatSD, 
 136      =1    SendAlarm, 
 137      =1    GetDVRVersion=0x09, 
 138      =1    SendDVRStatus=0x14,
 139      =1    GetLCDMode=0x15,
 140      =1    SendDVRParam=0x16,
 141      =1    SendDVRParamDT=0x17,
 142      =1    SetFormatSDDone=0x18,
 143      =1    GetInformation=0x19,
 144      =1    SetSystem=0x1a,
 145      =1    GPSReset=0x1b,
 146      =1    Halt_Start=0xc8,
 147      =1    Halt_OK=0xc9,
 148      =1    FW_Update_Start=0xca,
 149      =1    FW_Update_OK=0xcb,
 150      =1    MANUALRECSTART=0xdc,
 151      =1    MANUALRECSTOP=0xdd,
 152      =1    SNAPSHOT=0xde,
 153      =1    BOOKMARK=0xdf,
 154      =1    Update_CONFIG=0xe0,
 155      =1    Update_CONFIG_OK=0xe1,
 156      =1    DoorOpen=0xe2,
 157      =1    DoorClose=0xe3,
 158      =1    CMD_UNKNOWN=0xff,
 159      =1    CMD_NUM
 160      =1  };
 161      =1  */
 162      =1  
 163      =1  //RS485 TX or RX define
 164      =1  /*
 165      =1  enum
 166      =1  {
 167      =1    RS485_TX,   //RS485 Transmit  
 168      =1    RS485_RX    //Rs485 Receive
 169      =1  };
 170      =1  
 171      =1  enum
 172      =1  {
 173      =1    Baud_rate2400,    
 174      =1    Baud_rate4800,  
 175      =1    Baud_rate9600
 176      =1  };
 177      =1  
 178      =1  
 179      =1  
 180      =1  //Camera Command ID define
 181      =1  enum
 182      =1  {
 183      =1  //  CAM_CLEAR,        //Clear 
 184      =1    CAM_ZOOM_OUT_START,     //Zoom Out  Start
 185      =1  //  CAM_ZOOM_OUT_END,     //Zoom Out  End
 186      =1    CAM_ZOOM_IN_START,      //Zoom In Start
 187      =1  //  CAM_ZOOM_IN_END,      //Zoom In End
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 47  

 188      =1  //  CAM_IRIS_CLOSE_START,   //IRIS Close Start
 189      =1  //  CAM_IRIS_CLOSE_END,   //IRIS Close End
 190      =1  //  CAM_IRIS_OPEN_START,      //IRIS Open Start
 191      =1  //  CAM_IRIS_OPEN_END,      //IRIS Open End
 192      =1  //  CAM_FOCUS_FAR_START,    //Focus Far Start
 193      =1  //  CAM_FOCUS_FAR_END,    //Focus Far End
 194      =1  //  CAM_FOCUS_NEAR_START,   //Focus Near Start
 195      =1  //  CAM_FOCUS_NEAR_END,   //Focus Near End
 196      =1    CAM_SET,        //Set 
 197      =1    CAM_CALL,       //Call 
 198      =1  //  CAM_FOCUS_SPEED,    //Focus Speed
 199      =1  //  CAM_ZOOM_SPEED,   //Zoom Speed
 200      =1    CAM_PTZ_RIGHT,      //PTZ Right 
 201      =1    CAM_PTZ_LEFT,     //PTZ Left
 202      =1    CAM_PTZ_UP,     //PTZ Up
 203      =1    CAM_PTZ_DOWN,     //PTZ Down
 204      =1    CAM_MENU_ENTER,     //PTZ Down
 205      =1    CAM_Iris_Open,
 206      =1  
 207      =1  //  CAM_PTZ_RIGHT_UP,   //PTZ Right with Up
 208      =1  //  CAM_PTZ_RIGHT_DOWN, //PTZ Right with Down
 209      =1  //  CAM_PTZ_LEFT_UP,    //PTZ Left with Up
 210      =1  //  CAM_PTZ_LEFT_DOWN,  //PTZ Left with Down
 211      =1    CAM_PTZ_STOP      //PTZ Control Stop
 212      =1  };
 213      =1  */
 214      =1  
 215      =1  void Hs_DvrTxCmdPaser(BYTE Cmd_Id );
 216      =1  void Hs_Protocol_Init(void);
 217      =1  void DvrReceivePaser(void);
 218      =1  void DVRCommandReSend(void);
 219      =1  extern void MCUTimerDelayXms(WORD usNum);
 220      =1  
 221      =1  
 222      =1  #if 0
           =1 BYTE TW2835ReceivePaser(void);
           =1 #endif
 225      =1  extern bit   DVR_Ready;
 226      =1  void CAM_TxCommand_toRS485(BYTE Com_ID);
 227      =1  void Send_PelcoP_Command(void);
 228      =1  void Send_PelcoD_Command(void);
 229      =1  void Send_GE_Command(void);
 230      =1  
 231      =1  
 232      =1  
 233      =1  
 234      =1  #endif
 235      =1  
  49          
  50          
  51          //****************************************************************************
  52          // DEFINITIONS / MACROS
  53          //****************************************************************************
  54          #define GET_EVENT_VALID(x)                      (g_stTimerEvent[x].b1EventValid)
  55          #define SET_EVENT_VALID(x)                      (g_stTimerEvent[x].b1EventValid = _TRUE)
  56          #define CLR_EVENT_VALID(x)                      (g_stTimerEvent[x].b1EventValid = _FALSE)
  57          
  58          #define GET_EVENT_ID(x)                         (g_stTimerEvent[x].b7EventID)
  59          #define SET_EVENT_ID(x, y)                      (g_stTimerEvent[x].b7EventID = y)
  60          
  61          #define GET_EVENT_TIME(x)                       (g_stTimerEvent[x].usTime)
  62          #define SET_EVENT_TIME(x, y)                    (g_stTimerEvent[x].usTime = y)
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 48  

  63          
  64          
  65          //****************************************************************************
  66          // VARIABLE DECLARATIONS
  67          //****************************************************************************
  68          bit g_bNotifyTimer0Int = _FALSE;
  69          volatile WORD  g_usTimerCounter = 0;
  70          StructTimerEventTableType g_stTimerEvent[_TIMER_EVENT_COUNT];
  71          WORD BatteryBTH,BatteryVoltage;
  72          BYTE PSW_Flag;
  73          BYTE WDT_Echo_Count=0;
  74          extern BYTE CameraVolt;
  75          extern StructBatteryInfoType g_stBatteryInfo;
  76          //--------------------------------------------------
  77          // Definitions of Timer2
  78          //--------------------------------------------------
  79          #define _EVENT_TIME_MAX                         61000 // Please do not modify this value.
  80          
  81          //****************************************************************************
  82          // CODE TABLES
  83          //****************************************************************************
  84          
  85          
  86          //****************************************************************************
  87          // FUNCTION DECLARATIONS
  88          //****************************************************************************
  89          void SysTimerHandler(void);
  90          void SysTimerEventProc(EnumSystemTimerEventID enumEventID);
  91          void SysTimerIntProc0(void);
  92          void SysTimerIntProc1(void);
  93          void SysTimerIntProc2(void);
  94          void MCUTimerInitialTimerEvent(void);
  95          void MCUTimerActiveTimerEvent(WORD usTime, BYTE ucEventID);
  96          void MCUTimerCancelTimerEvent(BYTE ucEventID);
  97          void MCUTimerDelayXms(WORD usNum);
  98          extern WORD GetBatteryBTH(void);
  99          extern WORD GetBatteryVoltage(void);
 100          extern void SetAD5110Step(BYTE newv) ;
 101          
 102          
 103          //****************************************************************************
 104          // FUNCTION DEFINITIONS
 105          //****************************************************************************
 106          //--------------------------------------------------
 107          // Description  : Timer Delay
 108          // Input Value  : usNum --> Delay in ms
 109          // Output Value : None
 110          //--------------------------------------------------
 111          void MCUTimerDelayXms(WORD usNum)
 112          {
 113   1          if(usNum)
 114   1          {
 115   2              g_bNotifyTimer0Int = _FALSE;
 116   2      
 117   2              while(_TRUE)
 118   2              {
 119   3                  if(g_bNotifyTimer0Int)
 120   3                  {
 121   4                      g_bNotifyTimer0Int = _FALSE;
 122   4      
 123   4                      if(--usNum)
 124   4                      {
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 49  

 125   5                      }
 126   4                      else
 127   4                      {
 128   5                          return;
 129   5                      }
 130   4                  }
 131   3              }
 132   2          }
 133   1      }
 134          
 135          //--------------------------------------------------
 136          // Description  : Get Event Time
 137          // Input Value  : ucEventIndex --> Event which time is needed
 138          // Output Value : Event Time
 139          //--------------------------------------------------
 140          WORD MCUTimerGetEventTime(BYTE ucEventIndex)
 141          {
 142   1          return GET_EVENT_TIME(ucEventIndex);
 143   1      }
 144          
 145          //--------------------------------------------------
 146          // Description  : Get Event ID
 147          // Input Value  : Referenced Event Index
 148          // Output Value : Stored Event ID
 149          //--------------------------------------------------
 150          BYTE MCUTimerGetEventID(BYTE ucEventIndex)
 151          {
 152   1          return GET_EVENT_ID(ucEventIndex);
 153   1      }
 154          
 155          //--------------------------------------------------
 156          // Description  : Clear Event Time
 157          // Input Value  : ucEventIndex --> Event which time is needed to be cleared
 158          // Output Value : None
 159          //--------------------------------------------------
 160          
 161          void MCUTimerClrEventValid(BYTE ucEventIndex)
 162          {
 163   1          CLR_EVENT_VALID(ucEventIndex);
 164   1      }
 165          
 166          //--------------------------------------------------
 167          // Description  : Check if Event is Valid
 168          // Input Value  : ucEventIndex --> Event to be checked
 169          // Output Value : Validity(_TRUE/_FALSE)
 170          //--------------------------------------------------
 171          bit MCUTimerCheckEventValid(BYTE ucEventIndex)
 172          {
 173   1          return GET_EVENT_VALID(ucEventIndex);;
 174   1      }
 175          
 176          //--------------------------------------------------
 177          // Description  : Get Timer Counter.
 178          // Input Value  : None
 179          // Output Value : Timer Counter
 180          //--------------------------------------------------
 181          WORD MCUTimerGetTimerCounter(void)
 182          {
 183   1          WORD usPresentTime = g_usTimerCounter;
 184   1         
 185   1          // When get counter,timer interrupt maybe change counter.
 186   1          // Get twice to avoid it.
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 50  

 187   1          if(abs(g_usTimerCounter - usPresentTime) > 0x7F)
 188   1          {
 189   2              usPresentTime = g_usTimerCounter;
 190   2          } 
 191   1      
 192   1          return usPresentTime;
 193   1      }
 194          //--------------------------------------------------
 195          // Description  : Check timer and events. We have to run this function when setting up a timer for an even
             -t.
 196          // Input Value  : usTime    --> Unit in 1ms, range in 0.001 ~ 61sec
 197          // Output Value : Return usPresentTime
 198          //--------------------------------------------------
 199          WORD MCUTimerCheckTimerEvent(WORD usTime)
 200          {
 201   1          BYTE ucTimerEventCnt = 0;
 202   1          WORD usPresentTime = 0;
 203   1      
 204   1          usPresentTime = MCUTimerGetTimerCounter();
 205   1          
 206   1          if(usTime > _EVENT_TIME_MAX) 
 207   1          {
 208   2              usTime = _EVENT_TIME_MAX;
 209   2          }
 210   1         
 211   1          if(((usPresentTime + usTime) > _EVENT_TIME_MAX) || // Size Limit of Timer Counter             
 212   1             ((usPresentTime + usTime) < usPresentTime)) // Timer Counter Overflow
 213   1          { 
 214   2              g_usTimerCounter = 0;
 215   2          
 216   2              // Reset Timer Event Counter
 217   2              for(ucTimerEventCnt = 0; ucTimerEventCnt < _TIMER_EVENT_COUNT; ucTimerEventCnt++)
 218   2              {
 219   3                  if(GET_EVENT_VALID(ucTimerEventCnt) == _TRUE)
 220   3                  {
 221   4                      if(GET_EVENT_TIME(ucTimerEventCnt) > usPresentTime)
 222   4                      {
 223   5                          SET_EVENT_TIME(ucTimerEventCnt, (GET_EVENT_TIME(ucTimerEventCnt) - usPresentTime));
 224   5                      }
 225   4                      else
 226   4                      {
 227   5                          SET_EVENT_TIME(ucTimerEventCnt, 0);
 228   5                      }
 229   4                  }
 230   3              }
 231   2              
 232   2              usPresentTime = 0;
 233   2          }    
 234   1      
 235   1          return usPresentTime;
 236   1      }
 237          
 238          //--------------------------------------------------
 239          // Description  : Initial timer and events. We have to run this function at firmware startup
 240          // Input Value  : None
 241          // Output Value : None
 242          //--------------------------------------------------
 243          void MCUTimerInitialTimerEvent(void)
 244          {
 245   1          BYTE ucTimerEventCnt = 0;
 246   1      
 247   1          for(ucTimerEventCnt = 0; ucTimerEventCnt < _TIMER_EVENT_COUNT; ucTimerEventCnt++)
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 51  

 248   1          {
 249   2              CLR_EVENT_VALID(ucTimerEventCnt);
 250   2          }
 251   1      
 252   1         // TR2 = 1;
 253   1      }
 254          
 255          //--------------------------------------------------
 256          // Description  : Active Timer Event
 257          // Input Value  : usTime --> Time to active Timer Event
 258          //          ucEventID --> Event to be actived
 259          // Output Value : None
 260          //--------------------------------------------------
 261          void MCUTimerActiveTimerEvent(WORD usTime, BYTE ucEventID)
 262          {
 263   1          BYTE ucEventIndex = 0;
 264   1      
 265   1          // Search for Existing Event with the same Event ID
 266   1          for(ucEventIndex = 0; ucEventIndex < _TIMER_EVENT_COUNT; ucEventIndex++)
 267   1          {
 268   2              if(GET_EVENT_VALID(ucEventIndex) == _TRUE)
 269   2              {
 270   3                  if(GET_EVENT_ID(ucEventIndex) == ucEventID)
 271   3                  {
 272   4                      return;
 273   4                  }
 274   3              }
 275   2          }
 276   1      
 277   1          // Choose any Vacant Storage for Event
 278   1          for(ucEventIndex = 0; ucEventIndex < _TIMER_EVENT_COUNT; ucEventIndex++)
 279   1          {
 280   2              if(GET_EVENT_VALID(ucEventIndex) == _FALSE)
 281   2              {
 282   3                  SET_EVENT_VALID(ucEventIndex);
 283   3                  SET_EVENT_ID(ucEventIndex, ucEventID);
 284   3                  SET_EVENT_TIME(ucEventIndex, (WORD)((DWORD)(MCUTimerCheckTimerEvent(usTime)) + usTime));
 285   3                  return;
 286   3              }
 287   2          }
 288   1      
 289   1      //    DebugMessageSystem("No More Available Storage for Simultaneous Event!!!!!!", 0x00);
 290   1      }
 291          
 292          //--------------------------------------------------
 293          // Description  : Cancel an event
 294          // Input Value  : Event     --> Event which we want to cancel
 295          // Output Value : None
 296          //--------------------------------------------------
 297          void MCUTimerCancelTimerEvent(BYTE ucEventID)
 298          {
 299   1          BYTE ucEventIndex = 0;
 300   1          
 301   1          // Search for Existing Event with the same Event ID
 302   1          for(ucEventIndex = 0; ucEventIndex < _TIMER_EVENT_COUNT; ucEventIndex++)
 303   1          {
 304   2              if(GET_EVENT_VALID(ucEventIndex) == _TRUE)
 305   2              {
 306   3                  if(GET_EVENT_ID(ucEventIndex) == ucEventID)
 307   3                  {
 308   4                      CLR_EVENT_VALID(ucEventIndex);
 309   4                      return;
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 52  

 310   4                  }
 311   3              }
 312   2          }      
 313   1      }
 314          
 315          //--------------------------------------------------
 316          // Description  : Reactive a timer for an event. If the event is exist,
 317          //                this function will reset the executing time and restart.
 318          // Input Value  : usTime    --> Unit in 1ms, range in 0.01 ~ 61 sec
 319          //                Event     --> Execute Event while timeup
 320          // Output Value : None
 321          //--------------------------------------------------
 322          void MCUTimerReactiveTimerEvent(WORD usTime, BYTE ucEventID)
 323          {
 324   1          BYTE ucEventIndex = 0;
 325   1      
 326   1          // Search for Existing Event with the same Event ID
 327   1          for(ucEventIndex = 0; ucEventIndex < _TIMER_EVENT_COUNT; ucEventIndex++)
 328   1          {
 329   2              if(GET_EVENT_VALID(ucEventIndex) == _TRUE)
 330   2              {
 331   3                  if(GET_EVENT_ID(ucEventIndex) == ucEventID)
 332   3                  {
 333   4                      SET_EVENT_TIME(ucEventIndex, (WORD)((DWORD)(MCUTimerCheckTimerEvent(usTime)) + usTime));
 334   4                      return;
 335   4                  }
 336   3              }
 337   2          }    
 338   1      
 339   1          // Choose any Vacant Storage for Event
 340   1          for(ucEventIndex = 0; ucEventIndex < _TIMER_EVENT_COUNT; ucEventIndex++)
 341   1          {
 342   2              if(GET_EVENT_VALID(ucEventIndex) == _FALSE)
 343   2              {
 344   3                  SET_EVENT_VALID(ucEventIndex);
 345   3                  SET_EVENT_ID(ucEventIndex, ucEventID);
 346   3                  SET_EVENT_TIME(ucEventIndex, (WORD)((DWORD)(MCUTimerCheckTimerEvent(usTime)) + usTime));
 347   3                  return;
 348   3              }
 349   2          }   
 350   1      }
 351          
 352          
 353          void UserInterfaceTimerEventProc(BYTE ucEventID)
 354          {
 355   1      
 356   1      switch(ucEventID)
 357   1      {
 358   2        case _USER_TIMER_EVENT_KEY_REPEAT_ENABLE:
 359   2            // SET_KEYREPEATSTART();
 360   2            Printf("->");
 361   2               MCUTimerActiveTimerEvent(SEC(1), _USER_TIMER_EVENT_KEY_REPEAT_ENABLE);
 362   2              break;
 363   2        case _USER_TIMER_EVENT_OSD_CAMERA_VOLTAGE_INC:
 364   2            if(CameraVolt<100)
 365   2            {
 366   3            CameraVolt++;
 367   3            }
 368   2            else
 369   2            {
 370   3            CameraVolt=100;
 371   3            }
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 53  

 372   2            SetAD5110Step(CameraVolt);
 373   2            WriteEEP(EEP_CameraVolt, CameraVolt);  
 374   2            Printf("(CAM_INC %02x)",(WORD)CameraVolt);  
 375   2              break;
 376   2        case _USER_TIMER_EVENT_OSD_CAMERA_VOLTAGE_DEC:
 377   2          
 378   2            if(CameraVolt)
 379   2            {
 380   3            CameraVolt--;
 381   3            }
 382   2            else
 383   2            {
 384   3            CameraVolt=0;
 385   3            }
 386   2            SetAD5110Step(CameraVolt);  
 387   2            WriteEEP(EEP_CameraVolt, CameraVolt);  
 388   2            Printf("(CAM_DEC %02x)",(WORD)CameraVolt);  
 389   2            break;
 390   2              case _USER_TIMER_EVENT_OSD_GET_MCU_VERSION:
 391   2            MCU_SendCmdToDVR(MCU_PROTOCOL_CMD_REPLY_MCU_FW);  
 392   2            Printf("(GET_MCU_VERSION)");  
 393   2            break;
 394   2             case _USER_TIMER_EVENT_OSD_MCU_ENTRY_SLEEP_MODE:
 395   2              Printf("(MCU_ENTRY_SLEEP_MODE)");    
 396   2              break;
 397   2        case _USER_TIMER_EVENT_OSD_DISTANCE_RESET:
 398   2             Printf("(DISTANCE_RESET)");   
 399   2             break;
 400   2         case _USER_TIMER_EVENT_OSD_DVR_REBOOT:
 401   2             Printf("(DVR_REBOOT)");  
 402   2              break;
 403   2          case _USER_TIMER_EVENT_OSD_DVR_SHUTDOWN:
 404   2             Printf("(DVR_SHUTDOWN)");  
 405   2             break;
 406   2        case _USER_TIMER_EVENT_OSD_ENCODER_DEVIATION_SETTING:
 407   2            Printf("(ENCODER_SET)");  
 408   2            break;
 409   2         default:   break;
 410   2         
 411   2      
 412   2      }
 413   1      #if 0
                  switch(ucEventID)
                  {
                      case _USER_TIMER_EVENT_KEY_REPEAT_ENABLE:
                          SET_KEYREPEATSTART();
                          break;
              
                      case _USER_TIMER_EVENT_KEY_SCAN_READY:
                          SET_KEYSCANREADY();
                          break;
              
                      case _USER_TIMER_EVENT_OSD_DISABLE_OSD_LOGO:
                          RTDOsdDisplayDisableOsd();
                          SET_OSD_LOGO_ON(_OFF);
                  
                    
              #if(_INSTANT_TIMER_EVENT_0 == _ON)
                          MCUTimer0SetTimerCount(_TIMER_OFF);
              #endif
              
              #if(_PANEL_POW_SEQ_FAST_MODE == _ON)
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 54  

                          UserInterfacePanelPowerAction(_BACKLIGHT_OFF);
              #else
                          UserInterfacePanelPowerAction(_PANEL_OFF);
              #endif
                          ScalerDDomainBackgroundEnable(_ENABLE);
                          ScalerDDomainPatternGenEnable(_DISABLE);
                          break;
              
                      case _USER_TIMER_EVENT_OSD_SHOW_NO_CABLE:
                    SET_OSD_EVENT_MESSAGE(_OSDEVENT_SHOW_NOCABLE_MSG);
                          break;
              
                      case _USER_TIMER_EVENT_OSD_SHOW_NO_SIGNAL:
                     SET_OSD_EVENT_MESSAGE(_OSDEVENT_SHOW_NOSIGNAL_MSG);
                          break;
              
                      case _USER_TIMER_EVENT_OSD_SHOW_POWER_SAVING:
              
                        #ifdef debug_mode1
                        DebugMessageOsd("p6",0);
                        #endif
                     SET_OSD_EVENT_MESSAGE(_OSDEVENT_SHOW_POWER_SAVING_EVENT_MSG);
                          break;
              
                      case _USER_TIMER_EVENT_GO_TO_POWER_SAVING:
                        SET_OSD_EVENT_MESSAGE(_OSDEVENT_GO_TO_POWER_SAVING_EVENT_MSG);
                          break;
              
                      case _USER_TIMER_EVENT_OSD_DISABLE:
                        
                        
                          RTDOsdDisplayDisableOsd();
                        if(GET_CHANNEL_INFO_STATUS()==_TRUE) MCUTimerReactiveTimerEvent(SEC(3),_USER_TIMER_EVENT_DISPLAY_INF
             -O);
                          break;
              
                      case _USER_TIMER_EVENT_PANEL_BACKLIGHT_ON:
                          SET_PANELPOWERSTATUS(_READY_FOR_BACKLIGHT);
                          break;
                   case _USER_TIMER_EVENT_LIGHT_SENSER_ON :
                    if(GET_OSD_LIGHTSENSER()<=0x30) 
                      {
                       UserInterfacePanelPowerAction(_BACKLIGHT_OFF);
                      DebugMessageOsd("LIGHT_SENSER BACKLIGHT_OFF==",1);
                      }
                      break;
                       case _USER_TIMER_EVENT_SHOW_BURN_IN://ryan@20141230    
                        SET_OSD_EVENT_MESSAGE(_OSDEVENT_SHOW_BURNIN_MSG); 
                       //SET_OSD_EVENT_MESSAGE(_OSDEVENT_FACTORY_BURNIN_MODE_MSG);
                      break;
                      
                  case _USER_TIMER_EVENT_BURN_IN_ON://ryan@20141230   
                       SET_OSD_EVENT_MESSAGE(_OSDEVENT_FACTORY_BURNIN_MODE_MSG);  
                       //SET_OSD_EVENT_MESSAGE(_OSDEVENT_FACTORY_BURNIN_MODE_MSG);
                      break;
                  case _USER_TIMER_EVENT_CHECK://ryan@20141230    
                     SET_OSD_EVENT_MESSAGE(_OSDEVENT_CHECK_MSG);
                      break;
                
                   case _USER_TIMER_EVENT_DISPLAY_INFO://ryan@20141230    
                     SET_OSD_EVENT_MESSAGE(_OSDEVENT_DISPLAY_INFO_MSG);
                      break;  
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 55  

                  case _USER_TIMER_EVENT_STANDBY_MODE:
                 SET_OSD_EVENT_MESSAGE(_OSDEVENT_STANDBY_MODE_MSG);
                    break;
                    case _USER_TIMER_EVENT_FACTORY_MODE:
                 SET_OSD_EVENT_MESSAGE(_OSDEVENT_FACTORY_MODE_MSG);
                    break;    
                      case _USER_TIMER_EVENT_PANEL_POWER_OFF:
                          SET_PANELPOWERSTATUS(_PANEL_POWER_OFF_STATE);
                          break;
              
                case _USER_TIMER_EVENT_LED_POWER_SAVING:
                  
                  PCB_LED_IDLE();
                  break;
              
              #if(_VGA_SUPPORT == _ON)
                      case _USER_TIMER_EVENT_DO_AUTO_COLOR:
                          RTDOsdDisplayAutoBalanceProc();
                          break;
              #endif
              
                      case _USER_TIMER_EVENT_PANEL_USED_TIMER:
                          RTDFactoryPanelUsedTimer();
                          break;
              
              #if(_HIGHLIGHT_WINDOW_SUPPORT == _ON)
                      case _USER_TIMER_EVENT_HLWIN_TYPE5_MOVE:
                          UserAdjustHLWinType5Move();
                          break;
              #endif
              
              #if(_ENERGY_STAR_SUPPORT == _ON)
                      case _USER_TIMER_EVENT_ES_ADJUST:
                          UserCommonAdjustESDcrAdjustPWM();
                          break;
              #endif
              
              #if defined(_UART_ENABLE) // uart [micon.sam.0524.2013]
                      case _USER_TIMER_EVENT_UART_RESET:          //for uart timeout  //walter.hsiao 20121108
                          g_bUartCommandStart = _FALSE;
                          g_ucUartCommandNum = 1;
                          break;
              #endif
              
                      default:
                          break;
                  }
              #endif
 543   1        
 544   1      }
 545          
 546          void MCUTimerEventProc(EnumMCUTimerEventID enumEventID)
 547          {
 548   1      
 549   1      switch(enumEventID)
 550   1         {
 551   2      
 552   2      default: 
 553   2          break;
 554   2      }
 555   1      
 556   1      #if 0
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 56  

                  switch(enumEventID)
                  {
              #if((_DVI_SUPPORT == _ON) || (_HDMI_SUPPORT == _ON))
                      case _SCALER_TIMER_EVENT_TMDS_VIDEO_DETECT:
                      
                          ScalerSyncTmdsVideoDetectEvent();
                          break;
              
              #if(_HDMI_SUPPORT == _ON)
                      case _SCALER_TIMER_EVENT_TMDS_HDMI_PACKET_DETECT:
                      
                          ScalerTmdsHdmiPacketDetectEvent();
                          break;            
              #endif // End of #if(_HDMI_SUPPORT == _ON) 
              
              #endif // End of #if((_DVI_SUPPORT == _ON) || (_HDMI_SUPPORT == _ON))       
              
              #if(_AUDIO_SUPPORT == _ON)
                      case _SCALER_TIMER_EVENT_AUDIO_LOAD_STABLE_I_CODE:
              
                          ScalerAudioLoadStableICodeEvent();
                          break;            
              #endif // End of #if(_AUDIO_SUPPORT == _ON)
              
              #if(_DP_SUPPORT == _ON)
                      case _SCALER_TIMER_EVENT_DP_HOTPLUG_ASSERTED:
                          ScalerDpHotPlugEvent(_DP_HPD_ASSERTED);
                          break;
              
                      case _SCALER_TIMER_EVENT_DP_HDCP_LONG_HOTPLUG_EVENT:
                          ScalerDpHotPlugEvent(_DP_HDCP_LONG_HPD_EVENT);
                          break;
              
                      case _SCALER_TIMER_EVENT_DP_LINK_STATUS_IRQ:
                          ScalerDpLinkStatusIRQ();
                          break;            
              #endif  
              
              #if((_D2_INPUT_PORT_SWITCH_FROM == _SWITCH_FROM_D0) || (_D3_INPUT_PORT_SWITCH_FROM == _SWITCH_FROM_D0))
                      case _SCALER_TIMER_EVENT_D0_PORT_DIGITAL_SWITCH:
                          SET_D0_PORT_DIGITAL_SWITCH();
                          break;    
              #endif
              
              #if((_D2_INPUT_PORT_SWITCH_FROM == _SWITCH_FROM_D1) || (_D3_INPUT_PORT_SWITCH_FROM == _SWITCH_FROM_D1))
                      case _SCALER_TIMER_EVENT_D1_PORT_DIGITAL_SWITCH:
                          SET_D1_PORT_DIGITAL_SWITCH();
                          break;
              #endif   
              
              #if((_VGA_SUPPORT == _ON) && (_ADCNR_BY_HISTOGRAM_SUPPORT == _ON))
                      case _SCALER_TIMER_EVENT_NR_DETECTION_FINISHED:
                          ScalerNrTimerEvent();
                          break;
              #endif
              
              #if(_SDRAM_PHASE_CALIBRATION == _ON)
                      case _SCALER_TIMER_EVENT_PHASE_CALIBRATION: 
                          ScalerSDRAMPhaseOnLineTimer();
                          break;
              
                      case _SCALER_TIMER_EVENT_PHASE_CNT_CHECK:
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 57  

              
                          // Check phase count every 60 minute
                          ScalerSDRAMPhaseCntCheck(60);
                          break;
              #endif
              
              #if(_D0_INPUT_PORT_TYPE == _D0_MHL_PORT)
                      case _SCALER_TIMER_EVENT_MHL_D0_READY_TO_TRANSMIT:
              
                          SET_MHL_READY_TO_TRANSMIT(0, _TRUE);
                          break;
              
                      case _SCALER_TIMER_EVENT_MHL_D0_READY_TO_RESEND:
              
                          SET_MHL_READY_TO_RESEND(0, _TRUE);
                          break;
              
                      case _SCALER_TIMER_EVENT_MHL_D0_RECONNECT_1K:
              
              #if(_D0_CBUS_CHANNEL_SEL == _CBUS0)
                          if(((ScalerGetByte(P28_A7_CBUS0_CTRL_07) & 0x38) >> 3) == 0x02)
                          {
                              ScalerSetBit(P28_A8_CBUS0_CTRL_08, ~_BIT5, 0x00);
                              MCUTimerDelayXms(52);
                              ScalerSetBit(P28_A8_CBUS0_CTRL_08, ~_BIT5, _BIT5);
                          }
              #elif(_D0_CBUS_CHANNEL_SEL == _CBUS1)
                          if(((ScalerGetByte(P29_A7_CBUS1_CTRL_07) & 0x38) >> 3) == 0x02)
                          {
                              ScalerSetBit(P29_A8_CBUS1_CTRL_08, ~_BIT5, 0x00);
                              MCUTimerDelayXms(52);
                              ScalerSetBit(P29_A8_CBUS1_CTRL_08, ~_BIT5, _BIT5);
                          }
              #endif
              
                          break;
              
                      case _SCALER_TIMER_EVENT_MHL_D0_ACTIVE_VBUS:
              
                          if(GET_D0_TMDS_MODE() == _TMDS_MHL_MODE)
                          {
                              // GPIO Select to Hot Plug
              #if(_D0_CBUS_CHANNEL_SEL == _CBUS0)
                              ScalerSetBit(P27_A0_CBUS_EN, ~_BIT4, 0x00);
              #elif(_D0_CBUS_CHANNEL_SEL == _CBUS1)
                              ScalerSetBit(P27_A0_CBUS_EN, ~_BIT5, 0x00);
              #endif
                              SET_D0_MHL_VBUS_SWITCH(_MHL_VBUS_ON);
                          }
                          
                          break;
              #endif // End of #if(_D0_INPUT_PORT_TYPE == _D0_MHL_PORT)
              
              #if(_D1_INPUT_PORT_TYPE == _D1_MHL_PORT)
                      case _SCALER_TIMER_EVENT_MHL_D1_READY_TO_TRANSMIT:
              
              #if(_D0_INPUT_PORT_TYPE == _D0_MHL_PORT)
                          SET_MHL_READY_TO_TRANSMIT(1, _TRUE);
              #else
                          SET_MHL_READY_TO_TRANSMIT(0, _TRUE);
              #endif
              
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 58  

                          break;
              
                      case _SCALER_TIMER_EVENT_MHL_D1_READY_TO_RESEND:
                          
              #if(_D0_INPUT_PORT_TYPE == _D0_MHL_PORT)
                          SET_MHL_READY_TO_RESEND(1, _TRUE);
              #else
                          SET_MHL_READY_TO_RESEND(0, _TRUE);
              #endif
              
                          break;
                   
                      case _SCALER_TIMER_EVENT_MHL_D1_RECONNECT_1K:
              
              #if(_D1_CBUS_CHANNEL_SEL == _CBUS0)
                          if(((ScalerGetByte(P28_A7_CBUS0_CTRL_07) & 0x38) >> 3) == 0x02)
                          {
                              ScalerSetBit(P28_A8_CBUS0_CTRL_08, ~_BIT5, 0x00);
                              MCUTimerDelayXms(52);
                              ScalerSetBit(P28_A8_CBUS0_CTRL_08, ~_BIT5, _BIT5);
                          }
              #elif(_D1_CBUS_CHANNEL_SEL == _CBUS1)
                          if(((ScalerGetByte(P29_A7_CBUS1_CTRL_07) & 0x38) >> 3) == 0x02)
                          {
                              ScalerSetBit(P29_A8_CBUS1_CTRL_08, ~_BIT5, 0x00);
                              MCUTimerDelayXms(52);
                              ScalerSetBit(P29_A8_CBUS1_CTRL_08, ~_BIT5, _BIT5);
                          }
              #endif
              
                          break;
              
                      case _SCALER_TIMER_EVENT_MHL_D1_ACTIVE_VBUS:
              
                          if(GET_D1_TMDS_MODE() == _TMDS_MHL_MODE)
                          {
                              // GPIO Select to Hot Plug
              #if(_D1_CBUS_CHANNEL_SEL == _CBUS0)
                              ScalerSetBit(P27_A0_CBUS_EN, ~_BIT4, 0x00);
              #elif(_D1_CBUS_CHANNEL_SEL == _CBUS1)
                              ScalerSetBit(P27_A0_CBUS_EN, ~_BIT5, 0x00);
              #endif
               
                              SET_D1_MHL_VBUS_SWITCH(_MHL_VBUS_ON);
                          }
                          
                          break;
              #endif // End of #if(_D1_INPUT_PORT_TYPE == _D1_MHL_PORT)
              
              #if((_DCC_HISTOGRM_INFO == _ON) && (_DCC_HISTOGRAM_THD_CHANGE == _ON))
                      case _SCALER_TIMER_EVENT_DCC_HISTOGRAM_THD_CHANGE:
                          ScalerColorDCCChangeHistogramThd();            
                          MCUTimerReactiveTimerEvent((WORD)(((DWORD)_PANEL_DH_TOTAL * _PANEL_DV_TOTAL * 2) / GET_D_CLK_F
             -REQ()), _SCALER_TIMER_EVENT_DCC_HISTOGRAM_THD_CHANGE);
              
                          break;
              #endif
              
                      default:
                          break;
                  }    
                #endif
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 59  

 742   1      }
 743          
 744          
 745          //--------------------------------------------------
 746          // Description  : Timer Handler
 747          // Input Value  : None
 748          // Output Value : None
 749          //--------------------------------------------------
 750          void SysTimerHandler(void)
 751          {
 752   1          BYTE ucTimerEventIndex = 0;
 753   1          BYTE ucTimerEventID = 0;    
 754   1          WORD usPresentTime = 0;
 755   1      
 756   1          for(ucTimerEventIndex = 0; ucTimerEventIndex < _TIMER_EVENT_COUNT; ucTimerEventIndex++)
 757   1          {
 758   2              usPresentTime = MCUTimerGetTimerCounter();
 759   2      
 760   2              if(MCUTimerCheckEventValid(ucTimerEventIndex) == _FALSE)
 761   2              {
 762   3                  continue;
 763   3              }         
 764   2              
 765   2              if(usPresentTime > MCUTimerGetEventTime(ucTimerEventIndex))
 766   2              {
 767   3                  MCUTimerClrEventValid(ucTimerEventIndex);
 768   3      
 769   3                  // Get Event ID From Event Index
 770   3                  ucTimerEventID = MCUTimerGetEventID(ucTimerEventIndex);
 771   3                  
 772   3                  if(ucTimerEventID < _USER_TIMER_EVENT_END)
 773   3                  {
 774   4                      UserInterfaceTimerEventProc(ucTimerEventID);
 775   4                      
 776   4                      continue;
 777   4                  }
 778   3      
 779   3                  if(ucTimerEventID < _SYSTEM_TIMER_EVENT_END)
 780   3                  {
 781   4                      SysTimerEventProc(ucTimerEventID);
 782   4                      
 783   4                      continue;
 784   4                  }
 785   3                  
 786   3               //   MCUTimerEventProc(ucTimerEventID);
 787   3              }
 788   2          }
 789   1      
 790   1      }
 791          
 792          //--------------------------------------------------
 793          // Description  : Timer Event Process
 794          // Input Value  : enumEventID --> Event to be processed
 795          // Output Value : None
 796          //--------------------------------------------------
 797          void SysTimerEventProc(EnumSystemTimerEventID enumEventID)
 798          {
 799   1      
 800   1      switch(enumEventID)
 801   1         { 
 802   2         case _SYSTEM_TIMER_EVENT_GRN_ON:
 803   2         PowerLED(_SYSTEM_TIMER_EVENT_GRN_ON);
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 60  

 804   2        break;
 805   2         case _SYSTEM_TIMER_EVENT_GRN_OFF:
 806   2           PowerLED(_SYSTEM_TIMER_EVENT_GRN_OFF);
 807   2        break;
 808   2         case _SYSTEM_TIMER_EVENT_RED_ON: 
 809   2          PowerLED(_SYSTEM_TIMER_EVENT_RED_ON);
 810   2        break;
 811   2         case _SYSTEM_TIMER_EVENT_RED_OFF:
 812   2            PowerLED(_SYSTEM_TIMER_EVENT_RED_OFF);
 813   2          break;
 814   2         case _SYSTEM_TIMER_EVENT_GRN_RED_ON:
 815   2            PowerLED(_SYSTEM_TIMER_EVENT_GRN_RED_ON);
 816   2          break;
 817   2         case _SYSTEM_TIMER_EVENT_GRN_BLINK:
 818   2           PowerLED(_SYSTEM_TIMER_EVENT_GRN_BLINK);
 819   2           MCUTimerActiveTimerEvent(SEC(0.25), _SYSTEM_TIMER_EVENT_GRN_BLINK);
 820   2          break;
 821   2         case _SYSTEM_TIMER_EVENT_RED_BLINK:
 822   2           PowerLED(_SYSTEM_TIMER_EVENT_RED_BLINK);
 823   2           MCUTimerActiveTimerEvent(SEC(0.25), _SYSTEM_TIMER_EVENT_RED_BLINK);
 824   2          break;  
 825   2        case _SYSTEM_TIMER_EVENT_GRN_RED_BLINK:
 826   2           PowerLED(_SYSTEM_TIMER_EVENT_GRN_RED_BLINK);
 827   2           MCUTimerActiveTimerEvent(SEC(0.25), _SYSTEM_TIMER_EVENT_GRN_RED_BLINK);
 828   2         break; 
 829   2         case _SYSTEM_TIMER_EVENT_GRN_ON_RED_BLINK:
 830   2          PowerLED(_SYSTEM_TIMER_EVENT_GRN_ON_RED_BLINK);
 831   2          MCUTimerActiveTimerEvent(SEC(0.25), _SYSTEM_TIMER_EVENT_GRN_ON_RED_BLINK);
 832   2          break; 
 833   2          case _SYSTEM_TIMER_EVENT_JUDGE_BATT_STATE:  
 834   2        SET_BATTERY_CAPACITY(GetBatteryVoltage());
 835   2          if(GET_BATTERY_CAPACITY()<256)
 836   2            SET_BATTERY_STATE(_BATT_STATUS_CAPACITY_LEVEL1);
 837   2          else if((GET_BATTERY_CAPACITY()>256)&&(GET_BATTERY_CAPACITY()<512))
 838   2            SET_BATTERY_STATE(_BATT_STATUS_CAPACITY_LEVEL2);
 839   2          else if((GET_BATTERY_CAPACITY()>512)&&(GET_BATTERY_CAPACITY()<768))
 840   2            SET_BATTERY_STATE(_BATT_STATUS_CAPACITY_LEVEL3);  
 841   2          else 
 842   2            SET_BATTERY_STATE(_BATT_STATUS_CAPACITY_LEVEL4);
 843   2            
 844   2            
 845   2          //BATERY_STAT=GET_BATTERY_STATE();
 846   2          MCU_SendCmdToDVR(MCU_PROTOCOL_CMD_REGULAR_DATA);
 847   2          MCUTimerActiveTimerEvent(SEC(5), _SYSTEM_TIMER_EVENT_JUDGE_BATT_STATE);
 848   2          break;
 849   2          case _SYSTEM_TIMER_EVENT_JUDGE_PSW_STATE:
 850   2          Printf("\r\nPOWER key pressed");
 851   2          PSW_Flag=1;
 852   2            break;
 853   2          case _SYSTEM_TIMER_EVENT_JUDGE_BTH_STATE:
 854   2          Printf("(BTH)");
 855   2          BatteryBTH=GetBatteryBTH();
 856   2          MCUTimerActiveTimerEvent(SEC(10), _SYSTEM_TIMER_EVENT_JUDGE_BTH_STATE);
 857   2          break;
 858   2          case _SYSTEM_TIMER_EVENT_JUDGE_WDT_ECHO:
 859   2          WDT_Echo_Count++;
 860   2          if(WDT_Echo_Count<3)
 861   2            {
 862   3            MCUTimerActiveTimerEvent(SEC(5), _SYSTEM_TIMER_EVENT_JUDGE_WDT_ECHO); 
 863   3            }
 864   2          else
 865   2            {
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 61  

 866   3            Printf("\r\nNot Get WDT kick over 10S");
 867   3            }
 868   2          break;
 869   2          case _SYSTEM_TIMER_EVENT_JUDGE_AC_MODE:
 870   2            {
 871   3                  if(GET_ADAP_12()) 
 872   3                 SET_AC_PLUG();
 873   3                else        
 874   3                CLR_AC_PLUG();
 875   3               
 876   3              MCUTimerActiveTimerEvent(SEC(5), _SYSTEM_TIMER_EVENT_JUDGE_BATT_STATE);
 877   3      
 878   3                }
 879   2          break;
 880   2         default:
 881   2                  break;
 882   2       }
 883   1      #if 0
                  switch(enumEventID)
                  {
                      case _SYSTEM_TIMER_EVENT_SOURCE_CLEAR_DETECTING:            
                          SysSourceClearDetectingEvent();            
                          break;
              
                      case _SYSTEM_TIMER_EVENT_JUDGE_ACTIVE_STATE:
                          SET_MODE_ACTIVE_READY();
                          break;
              
                      case _SYSTEM_TIMER_EVENT_JUDGE_NOSUPPORT_STATE:
                          SET_MODE_RESET_TARGET(_MODE_ACTION_RESET_TO_NOSUPPORT);
                          break;
              
                      case _SYSTEM_TIMER_EVENT_JUDGE_NOSIGNAL_STATE:
                        
                          SET_MODE_RESET_TARGET(_MODE_ACTION_RESET_TO_NOSIGNAL);      
                          break;
              
              #if(_EMBEDDED_DAC_SUPPORT == _ON)
                      case _SYSTEM_TIMER_EVENT_AUDIO_DAC_WAIT_VCM_INITIAL:
                          ScalerAudioDACSetState(_AUDIO_DAC_CHARGE);
                          break;
                          
                      case _SYSTEM_TIMER_EVENT_AUDIO_DAC_WAIT_VCM_CHARGE:
                          ScalerAudioDACSetState(_AUDIO_DAC_DEPOP);
                          break;
              
                      case _SYSTEM_TIMER_EVENT_AUDIO_DAC_WAIT_DEPOP_TO_NORMAL:
                          ScalerAudioDACDepopToNormal();
                          break;
              #endif // End of #if(_EMBEDDED_DAC_SUPPORT == _ON)
                          
              #if(_HP_SOURCE_SCAN_SUPPORT == _ON)
                      case _SYSTEM_TIMER_EVENT_SOURCE_HP_CANCEL_MANUAL_SWITCH_PORT:
                          SET_SOURCE_HP_PORT_SWITCH_TARGET((_INPUT_PORT_VALID + 1));
                          break;
              #endif                        
                      default:
                          break;
                  }
                #endif
 926   1      }
 927          
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 62  

 928          #if 0
              //--------------------------------------------------
              // Description  : Timer0 Int Function
              // Input Value  : None
              // Output Value : None
              //--------------------------------------------------
              void SysTimerIntProc0(void) interrupt 1
              {
              
              #if(_INSTANT_TIMER_EVENT_0 == _ON)
                  // Clear Timer0 flag
                  TF0 = 0;
              
                  TL0 = g_ucTimerCountLByte0;
                  TH0 = g_ucTimerCountHByte0;
              
                  TR0 = _ON;
              
                  UserInterfaceTimer0InstantAccess_TIMER0();
              #endif
              
              }
              
              //--------------------------------------------------
              // Description  : Timer1 Int Function
              // Input Value  : None
              // Output Value : None
              //--------------------------------------------------
              void SysTimerIntProc1(void) interrupt 3
              {
                  
              #if(_INSTANT_TIMER_EVENT_1 == _ON)
                  // Clear Timer1 flag
                  TF1 = 0;
              
                  TL1 = g_ucTimerCountLByte1;
                  TH1 = g_ucTimerCountHByte1;
              
                  TR1 = _ON;
              
                  UserInterfaceTimer1InstantAccess_TIMER1();
              #endif
              
              }
              
              //--------------------------------------------------
              // Description  : Timer2 Int Function
              // Input Value  : None
              // Output Value : None
              //--------------------------------------------------
              void SysTimerIntProc2(void) interrupt 5
              {
                  // Clear Timer2 flag
                  TF2 = 0;
              
                  // Clear watchdog
                  CLR_MCU_WATCH_DOG(); 
              
              #if(_SYSTEM_TIMER_QUARTER_RESOLUTION == _OFF)
              
                  g_bNotifyTimer2Int = _TRUE;
              
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 63  

                  // Timer Counter 
                  g_usTimerCounter += 1;   
                  
              #else
              
                  if(g_ucTimerQuarterCount >= 3)
                  {
                      g_ucTimerQuarterCount = 0;
                          
                      g_bNotifyTimer2Int = _TRUE;
              
                      // Timer Counter 
                      g_usTimerCounter += 1;   
                  }
                  else
                  {
                      g_ucTimerQuarterCount++;
                  }
              
                  UserInterfaceTimer2InstantAccess_TIMER2();
              
              #endif
              
              }
              
              #endif
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 64  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com0081 (BEGIN)
0000         L?0130:
0000 E0                MOVX    A,@DPTR
0001 547F              ANL     A,#07FH
0003 25E0              ADD     A,ACC
0005 FF                MOV     R7,A
0006         L?0131:
0006 EE                MOV     A,R6
0007         L?0132:
0007 75F003            MOV     B,#03H
000A A4                MUL     AB
000B 2400        R     ADD     A,#LOW g_stTimerEvent
000D F582              MOV     DPL,A
000F E4                CLR     A
0010 3400        R     ADDC    A,#HIGH g_stTimerEvent
0012 F583              MOV     DPH,A
0014 22                RET     
0015         L?0133:
0015 3E                ADDC    A,R6
0016 FE                MOV     R6,A
0017         L?0134:
0017 E0                MOVX    A,@DPTR
0018         L?0135:
0018 75F003            MOV     B,#03H
001B A4                MUL     AB
001C 2400        R     ADD     A,#LOW g_stTimerEvent+01H
001E F582              MOV     DPL,A
0020 E4                CLR     A
0021 3400        R     ADDC    A,#HIGH g_stTimerEvent+01H
0023 F583              MOV     DPH,A
0025 22                RET     
0026         L?0136:
0026 900000      R     MOV     DPTR,#ucEventIndex
0029         L?0137:
0029 E0                MOVX    A,@DPTR
002A FF                MOV     R7,A
002B         L?0138:
002B C3                CLR     C
002C 9408              SUBB    A,#08H
002E 7480              MOV     A,#080H
0030 9480              SUBB    A,#080H
0032 22                RET     
0033         L?0140:
0033 900000      R     MOV     DPTR,#g_usTimerCounter
0036 E0                MOVX    A,@DPTR
0037 FF                MOV     R7,A
0038 A3                INC     DPTR
0039 E0                MOVX    A,@DPTR
003A 900000      R     MOV     DPTR,#usPresentTime
003D CF                XCH     A,R7
003E F0                MOVX    @DPTR,A
003F A3                INC     DPTR
0040 EF                MOV     A,R7
0041 F0                MOVX    @DPTR,A
0042 22                RET     
0043         L?0141:
0043         L?0142:
0043 900000      R     MOV     DPTR,#usTime
0046 E0                MOVX    A,@DPTR
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 65  

0047 FE                MOV     R6,A
0048 A3                INC     DPTR
0049 E0                MOVX    A,@DPTR
004A FF                MOV     R7,A
004B 22                RET     
004C         L?0143:
004C E4                CLR     A
004D FC                MOV     R4,A
004E FD                MOV     R5,A
004F 7B48              MOV     R3,#048H
0051 7AEE              MOV     R2,#0EEH
0053 F9                MOV     R1,A
0054 F8                MOV     R0,A
0055 C3                CLR     C
0056 020000      E     LJMP    ?C?SLCMP
0059         L?0144:
0059 EE                MOV     A,R6
005A F0                MOVX    @DPTR,A
005B A3                INC     DPTR
005C EF                MOV     A,R7
005D F0                MOVX    @DPTR,A
005E A3                INC     DPTR
005F ED                MOV     A,R5
0060 F0                MOVX    @DPTR,A
0061 E4                CLR     A
0062 A3                INC     DPTR
0063 F0                MOVX    @DPTR,A
0064 F0                MOVX    @DPTR,A
0065 22                RET     
0066         L?0145:
0066         L?0146:
0066 900000      E     MOV     DPTR,#g_stBatteryInfo
0069 E0                MOVX    A,@DPTR
006A 54E0              ANL     A,#0E0H
006C 22                RET     
006D         L?0147:
006D 900000      E     MOV     DPTR,#g_stBatteryInfo+02H
0070 E0                MOVX    A,@DPTR
0071 FE                MOV     R6,A
0072 A3                INC     DPTR
0073 E0                MOVX    A,@DPTR
0074 D3                SETB    C
0075 9400              SUBB    A,#00H
0077 EE                MOV     A,R6
0078 22                RET     
             ; FUNCTION Com0081 (END)

             ; FUNCTION _MCUTimerDelayXms (BEGIN)
                                           ; SOURCE LINE # 111
;---- Variable 'usNum' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 112
                                           ; SOURCE LINE # 113
0000 EF                MOV     A,R7
0001 4E                ORL     A,R6
0002 6010              JZ      ?C0007
                                           ; SOURCE LINE # 114
                                           ; SOURCE LINE # 115
0004 C200        R     CLR     g_bNotifyTimer0Int
0006         ?C0002:
                                           ; SOURCE LINE # 117
                                           ; SOURCE LINE # 118
                                           ; SOURCE LINE # 119
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 66  

0006 3000FD      R     JNB     g_bNotifyTimer0Int,?C0002
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
0009 C200        R     CLR     g_bNotifyTimer0Int
                                           ; SOURCE LINE # 123
000B EF                MOV     A,R7
000C 1F                DEC     R7
000D 7001              JNZ     ?C0108
000F 1E                DEC     R6
0010         ?C0108:
0010 14                DEC     A
0011 4E                ORL     A,R6
0012 70F2              JNZ     ?C0002
                                           ; SOURCE LINE # 124
                                           ; SOURCE LINE # 125
                                           ; SOURCE LINE # 127
                                           ; SOURCE LINE # 129
                                           ; SOURCE LINE # 130
                                           ; SOURCE LINE # 131
                                           ; SOURCE LINE # 132
                                           ; SOURCE LINE # 133
0014         ?C0007:
0014 22                RET     
             ; FUNCTION _MCUTimerDelayXms (END)

             ; FUNCTION _MCUTimerGetEventTime (BEGIN)
                                           ; SOURCE LINE # 140
;---- Variable 'ucEventIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 141
                                           ; SOURCE LINE # 142
0000 EF                MOV     A,R7
0001 120000      R     LCALL   L?0135
0004 E0                MOVX    A,@DPTR
0005 FE                MOV     R6,A
0006 A3                INC     DPTR
0007 E0                MOVX    A,@DPTR
0008 FF                MOV     R7,A
                                           ; SOURCE LINE # 143
0009 22                RET     
             ; FUNCTION _MCUTimerGetEventTime (END)

             ; FUNCTION _MCUTimerGetEventID (BEGIN)
                                           ; SOURCE LINE # 150
;---- Variable 'ucEventIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 151
                                           ; SOURCE LINE # 152
0000 EF                MOV     A,R7
0001 120000      R     LCALL   L?0132
0004 E0                MOVX    A,@DPTR
0005 C3                CLR     C
0006 13                RRC     A
0007 547F              ANL     A,#07FH
0009 FF                MOV     R7,A
                                           ; SOURCE LINE # 153
000A 22                RET     
             ; FUNCTION _MCUTimerGetEventID (END)

             ; FUNCTION _MCUTimerClrEventValid (BEGIN)
                                           ; SOURCE LINE # 161
;---- Variable 'ucEventIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 162
                                           ; SOURCE LINE # 163
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 67  

0000 EF                MOV     A,R7
0001 120000      R     LCALL   L?0132
0004 E0                MOVX    A,@DPTR
0005 54FE              ANL     A,#0FEH
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 164
0008 22                RET     
             ; FUNCTION _MCUTimerClrEventValid (END)

             ; FUNCTION _MCUTimerCheckEventValid (BEGIN)
                                           ; SOURCE LINE # 171
;---- Variable 'ucEventIndex' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 172
                                           ; SOURCE LINE # 173
0000 EF                MOV     A,R7
0001 120000      R     LCALL   L?0132
0004 E0                MOVX    A,@DPTR
0005 13                RRC     A
                                           ; SOURCE LINE # 174
0006 22                RET     
             ; FUNCTION _MCUTimerCheckEventValid (END)

             ; FUNCTION MCUTimerGetTimerCounter (BEGIN)
                                           ; SOURCE LINE # 181
                                           ; SOURCE LINE # 182
                                           ; SOURCE LINE # 183
0000 120000      R     LCALL   L?0140
                                           ; SOURCE LINE # 187
0003 900000      R     MOV     DPTR,#usPresentTime
0006 E0                MOVX    A,@DPTR
0007 FE                MOV     R6,A
0008 A3                INC     DPTR
0009 E0                MOVX    A,@DPTR
000A FF                MOV     R7,A
000B C3                CLR     C
000C 900000      R     MOV     DPTR,#g_usTimerCounter+01H
000F E0                MOVX    A,@DPTR
0010 9F                SUBB    A,R7
0011 FF                MOV     R7,A
0012 900000      R     MOV     DPTR,#g_usTimerCounter
0015 E0                MOVX    A,@DPTR
0016 9E                SUBB    A,R6
0017 FE                MOV     R6,A
0018 120000      E     LCALL   _abs
001B D3                SETB    C
001C EF                MOV     A,R7
001D 947F              SUBB    A,#07FH
001F EE                MOV     A,R6
0020 6480              XRL     A,#080H
0022 9480              SUBB    A,#080H
0024 4003              JC      ?C0012
                                           ; SOURCE LINE # 188
                                           ; SOURCE LINE # 189
0026 120000      R     LCALL   L?0140
                                           ; SOURCE LINE # 190
0029         ?C0012:
                                           ; SOURCE LINE # 192
0029 900000      R     MOV     DPTR,#usPresentTime
002C E0                MOVX    A,@DPTR
002D FE                MOV     R6,A
002E A3                INC     DPTR
002F E0                MOVX    A,@DPTR
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 68  

0030 FF                MOV     R7,A
                                           ; SOURCE LINE # 193
0031 22                RET     
             ; FUNCTION MCUTimerGetTimerCounter (END)

             ; FUNCTION _MCUTimerCheckTimerEvent (BEGIN)
                                           ; SOURCE LINE # 199
0000 900000      R     MOV     DPTR,#usTime
0003 EE                MOV     A,R6
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 200
                                           ; SOURCE LINE # 201
0008 E4                CLR     A
0009 A3                INC     DPTR
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 202
000B A3                INC     DPTR
000C F0                MOVX    @DPTR,A
000D A3                INC     DPTR
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 204
000F 120000      R     LCALL   MCUTimerGetTimerCounter
0012 900000      R     MOV     DPTR,#usPresentTime
0015 EE                MOV     A,R6
0016 F0                MOVX    @DPTR,A
0017 A3                INC     DPTR
0018 EF                MOV     A,R7
0019 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 206
001A 120000      R     LCALL   L?0141
001D 120000      R     LCALL   L?0143
0020 500A              JNC     ?C0014
                                           ; SOURCE LINE # 207
                                           ; SOURCE LINE # 208
0022 900000      R     MOV     DPTR,#usTime
0025 74EE              MOV     A,#0EEH
0027 F0                MOVX    @DPTR,A
0028 A3                INC     DPTR
0029 7448              MOV     A,#048H
002B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 209
002C         ?C0014:
                                           ; SOURCE LINE # 211
002C 120000      R     LCALL   L?0141
002F 900000      R     MOV     DPTR,#usPresentTime+01H
0032 E0                MOVX    A,@DPTR
0033 2F                ADD     A,R7
0034 FF                MOV     R7,A
0035 900000      R     MOV     DPTR,#usPresentTime
0038 E0                MOVX    A,@DPTR
0039 3E                ADDC    A,R6
003A FE                MOV     R6,A
003B 120000      R     LCALL   L?0143
003E 4017              JC      ?C0016
0040 120000      R     LCALL   L?0142
0043 900000      R     MOV     DPTR,#usPresentTime
0046 E0                MOVX    A,@DPTR
0047 FC                MOV     R4,A
0048 A3                INC     DPTR
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 69  

0049 E0                MOVX    A,@DPTR
004A FD                MOV     R5,A
004B 2F                ADD     A,R7
004C FF                MOV     R7,A
004D EC                MOV     A,R4
004E 3E                ADDC    A,R6
004F FE                MOV     R6,A
0050 D3                SETB    C
0051 ED                MOV     A,R5
0052 9F                SUBB    A,R7
0053 EC                MOV     A,R4
0054 9E                SUBB    A,R6
0055 4076              JC      ?C0015
0057         ?C0016:
                                           ; SOURCE LINE # 213
                                           ; SOURCE LINE # 214
0057 E4                CLR     A
0058 900000      R     MOV     DPTR,#g_usTimerCounter
005B F0                MOVX    @DPTR,A
005C A3                INC     DPTR
005D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 217
005E 900000      R     MOV     DPTR,#ucTimerEventCnt
0061 F0                MOVX    @DPTR,A
0062         ?C0017:
0062 900000      R     MOV     DPTR,#ucTimerEventCnt
0065 120000      R     LCALL   L?0137
0068 505C              JNC     ?C0018
                                           ; SOURCE LINE # 218
                                           ; SOURCE LINE # 219
006A EF                MOV     A,R7
006B 120000      R     LCALL   L?0132
006E E0                MOVX    A,@DPTR
006F 5401              ANL     A,#01H
0071 6401              XRL     A,#01H
0073 7048              JNZ     ?C0019
                                           ; SOURCE LINE # 220
                                           ; SOURCE LINE # 221
0075 900000      R     MOV     DPTR,#ucTimerEventCnt
0078 E0                MOVX    A,@DPTR
0079 FF                MOV     R7,A
007A 120000      R     LCALL   L?0135
007D E0                MOVX    A,@DPTR
007E FC                MOV     R4,A
007F A3                INC     DPTR
0080 E0                MOVX    A,@DPTR
0081 FD                MOV     R5,A
0082 900000      R     MOV     DPTR,#usPresentTime
0085 E0                MOVX    A,@DPTR
0086 FA                MOV     R2,A
0087 A3                INC     DPTR
0088 E0                MOVX    A,@DPTR
0089 FB                MOV     R3,A
008A D3                SETB    C
008B ED                MOV     A,R5
008C 9B                SUBB    A,R3
008D EC                MOV     A,R4
008E 9A                SUBB    A,R2
008F 4022              JC      ?C0021
                                           ; SOURCE LINE # 222
                                           ; SOURCE LINE # 223
0091 EF                MOV     A,R7
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 70  

0092 120000      R     LCALL   L?0135
0095 C083              PUSH    DPH
0097 C082              PUSH    DPL
0099 C3                CLR     C
009A A3                INC     DPTR
009B E0                MOVX    A,@DPTR
009C 9B                SUBB    A,R3
009D FF                MOV     R7,A
009E 0582              INC     DPL
00A0 D58202            DJNZ    DPL,?C0109
00A3 1583              DEC     DPH
00A5         ?C0109:
00A5 1582              DEC     DPL
00A7 E0                MOVX    A,@DPTR
00A8 9A                SUBB    A,R2
00A9 D082              POP     DPL
00AB D083              POP     DPH
00AD F0                MOVX    @DPTR,A
00AE A3                INC     DPTR
00AF EF                MOV     A,R7
00B0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 224
00B1 800A              SJMP    ?C0019
00B3         ?C0021:
                                           ; SOURCE LINE # 226
                                           ; SOURCE LINE # 227
00B3 900000      R     MOV     DPTR,#ucTimerEventCnt
00B6 120000      R     LCALL   L?0134
00B9 E4                CLR     A
00BA F0                MOVX    @DPTR,A
00BB A3                INC     DPTR
00BC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 228
                                           ; SOURCE LINE # 229
                                           ; SOURCE LINE # 230
00BD         ?C0019:
00BD 900000      R     MOV     DPTR,#ucTimerEventCnt
00C0 E0                MOVX    A,@DPTR
00C1 04                INC     A
00C2 F0                MOVX    @DPTR,A
00C3 020000      R     LJMP    ?C0017
00C6         ?C0018:
                                           ; SOURCE LINE # 232
00C6 E4                CLR     A
00C7 900000      R     MOV     DPTR,#usPresentTime
00CA F0                MOVX    @DPTR,A
00CB A3                INC     DPTR
00CC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 233
00CD         ?C0015:
                                           ; SOURCE LINE # 235
00CD 900000      R     MOV     DPTR,#usPresentTime
00D0 E0                MOVX    A,@DPTR
00D1 FE                MOV     R6,A
00D2 A3                INC     DPTR
00D3 E0                MOVX    A,@DPTR
00D4 FF                MOV     R7,A
                                           ; SOURCE LINE # 236
00D5 22                RET     
             ; FUNCTION _MCUTimerCheckTimerEvent (END)

             ; FUNCTION MCUTimerInitialTimerEvent (BEGIN)
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 71  

                                           ; SOURCE LINE # 243
                                           ; SOURCE LINE # 244
                                           ; SOURCE LINE # 245
;---- Variable 'ucTimerEventCnt' assigned to Register 'R7' ----
0000 E4                CLR     A
0001 FF                MOV     R7,A
                                           ; SOURCE LINE # 247
0002         ?C0024:
0002 EF                MOV     A,R7
0003 120000      R     LCALL   L?0138
0006 500B              JNC     ?C0027
                                           ; SOURCE LINE # 248
                                           ; SOURCE LINE # 249
0008 EF                MOV     A,R7
0009 120000      R     LCALL   L?0132
000C E0                MOVX    A,@DPTR
000D 54FE              ANL     A,#0FEH
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 250
0010 0F                INC     R7
0011 80EF              SJMP    ?C0024
                                           ; SOURCE LINE # 253
0013         ?C0027:
0013 22                RET     
             ; FUNCTION MCUTimerInitialTimerEvent (END)

             ; FUNCTION _MCUTimerActiveTimerEvent (BEGIN)
                                           ; SOURCE LINE # 261
0000 900000      R     MOV     DPTR,#usTime
                                           ; SOURCE LINE # 262
                                           ; SOURCE LINE # 263
                                           ; SOURCE LINE # 266
0003 120000      R     LCALL   L?0144
0006         ?C0028:
0006 120000      R     LCALL   L?0136
0009 5021              JNC     ?C0029
                                           ; SOURCE LINE # 267
                                           ; SOURCE LINE # 268
000B EF                MOV     A,R7
000C 120000      R     LCALL   L?0132
000F E0                MOVX    A,@DPTR
0010 FF                MOV     R7,A
0011 5401              ANL     A,#01H
0013 6401              XRL     A,#01H
0015 700D              JNZ     ?C0030
                                           ; SOURCE LINE # 269
                                           ; SOURCE LINE # 270
0017 EF                MOV     A,R7
0018 C3                CLR     C
0019 13                RRC     A
001A 547F              ANL     A,#07FH
001C FF                MOV     R7,A
001D 900000      R     MOV     DPTR,#ucEventID
0020 E0                MOVX    A,@DPTR
0021 6F                XRL     A,R7
0022 605D              JZ      ?C0033
                                           ; SOURCE LINE # 271
                                           ; SOURCE LINE # 273
                                           ; SOURCE LINE # 274
                                           ; SOURCE LINE # 275
0024         ?C0030:
0024 900000      R     MOV     DPTR,#ucEventIndex
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 72  

0027 E0                MOVX    A,@DPTR
0028 04                INC     A
0029 F0                MOVX    @DPTR,A
002A 80DA              SJMP    ?C0028
002C         ?C0029:
                                           ; SOURCE LINE # 278
002C E4                CLR     A
002D 900000      R     MOV     DPTR,#ucEventIndex
0030 F0                MOVX    @DPTR,A
0031         ?C0034:
0031 120000      R     LCALL   L?0136
0034 504B              JNC     ?C0033
                                           ; SOURCE LINE # 279
                                           ; SOURCE LINE # 280
0036 EF                MOV     A,R7
0037 120000      R     LCALL   L?0132
003A E0                MOVX    A,@DPTR
003B FF                MOV     R7,A
003C 5401              ANL     A,#01H
003E 7038              JNZ     ?C0036
                                           ; SOURCE LINE # 281
                                           ; SOURCE LINE # 282
0040 900000      R     MOV     DPTR,#ucEventIndex
0043 E0                MOVX    A,@DPTR
0044 FE                MOV     R6,A
0045 120000      R     LCALL   L?0132
0048 EF                MOV     A,R7
0049 4401              ORL     A,#01H
004B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 283
004C 900000      R     MOV     DPTR,#ucEventID
004F 120000      R     LCALL   L?0130
0052 E0                MOVX    A,@DPTR
0053 5401              ANL     A,#01H
0055 4F                ORL     A,R7
0056 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 284
0057 900000      R     MOV     DPTR,#usTime
005A E0                MOVX    A,@DPTR
005B FE                MOV     R6,A
005C A3                INC     DPTR
005D E0                MOVX    A,@DPTR
005E FF                MOV     R7,A
005F 120000      R     LCALL   _MCUTimerCheckTimerEvent
0062 900000      R     MOV     DPTR,#usTime+01H
0065 E0                MOVX    A,@DPTR
0066 2F                ADD     A,R7
0067 FF                MOV     R7,A
0068 900000      R     MOV     DPTR,#usTime
006B E0                MOVX    A,@DPTR
006C 900000      R     MOV     DPTR,#ucEventIndex
006F 120000      R     LCALL   L?0133
0072 EE                MOV     A,R6
0073 F0                MOVX    @DPTR,A
0074 A3                INC     DPTR
0075 EF                MOV     A,R7
0076 F0                MOVX    @DPTR,A
0077 22                RET     
                                           ; SOURCE LINE # 286
                                           ; SOURCE LINE # 287
0078         ?C0036:
0078 900000      R     MOV     DPTR,#ucEventIndex
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 73  

007B E0                MOVX    A,@DPTR
007C 04                INC     A
007D F0                MOVX    @DPTR,A
007E 020000      R     LJMP    ?C0034
                                           ; SOURCE LINE # 290
0081         ?C0033:
0081 22                RET     
             ; FUNCTION _MCUTimerActiveTimerEvent (END)

             ; FUNCTION _MCUTimerCancelTimerEvent (BEGIN)
                                           ; SOURCE LINE # 297
;---- Variable 'ucEventID' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 298
                                           ; SOURCE LINE # 299
;---- Variable 'ucEventIndex' assigned to Register 'R6' ----
0000 E4                CLR     A
0001 FE                MOV     R6,A
                                           ; SOURCE LINE # 302
0002         ?C0038:
0002 EE                MOV     A,R6
0003 120000      R     LCALL   L?0138
0006 501E              JNC     ?C0043
                                           ; SOURCE LINE # 303
                                           ; SOURCE LINE # 304
0008 120000      R     LCALL   L?0131
000B E0                MOVX    A,@DPTR
000C FD                MOV     R5,A
000D 5401              ANL     A,#01H
000F 6401              XRL     A,#01H
0011 7010              JNZ     ?C0040
                                           ; SOURCE LINE # 305
                                           ; SOURCE LINE # 306
0013 ED                MOV     A,R5
0014 C3                CLR     C
0015 13                RRC     A
0016 547F              ANL     A,#07FH
0018 B50708            CJNE    A,AR7,?C0040
                                           ; SOURCE LINE # 307
                                           ; SOURCE LINE # 308
001B 120000      R     LCALL   L?0131
001E E0                MOVX    A,@DPTR
001F 54FE              ANL     A,#0FEH
0021 F0                MOVX    @DPTR,A
0022 22                RET     
                                           ; SOURCE LINE # 310
                                           ; SOURCE LINE # 311
                                           ; SOURCE LINE # 312
0023         ?C0040:
0023 0E                INC     R6
0024 80DC              SJMP    ?C0038
                                           ; SOURCE LINE # 313
0026         ?C0043:
0026 22                RET     
             ; FUNCTION _MCUTimerCancelTimerEvent (END)

             ; FUNCTION _MCUTimerReactiveTimerEvent (BEGIN)
                                           ; SOURCE LINE # 322
0000 900000      R     MOV     DPTR,#usTime
                                           ; SOURCE LINE # 323
                                           ; SOURCE LINE # 324
                                           ; SOURCE LINE # 327
0003 120000      R     LCALL   L?0144
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 74  

0006         ?C0044:
0006 900000      R     MOV     DPTR,#ucEventIndex
0009 120000      R     LCALL   L?0137
000C 5023              JNC     ?C0045
                                           ; SOURCE LINE # 328
                                           ; SOURCE LINE # 329
000E EF                MOV     A,R7
000F 120000      R     LCALL   L?0132
0012 E0                MOVX    A,@DPTR
0013 FF                MOV     R7,A
0014 5401              ANL     A,#01H
0016 6401              XRL     A,#01H
0018 700F              JNZ     ?C0046
                                           ; SOURCE LINE # 330
                                           ; SOURCE LINE # 331
001A EF                MOV     A,R7
001B C3                CLR     C
001C 13                RRC     A
001D 547F              ANL     A,#07FH
001F FF                MOV     R7,A
0020 900000      R     MOV     DPTR,#ucEventID
0023 E0                MOVX    A,@DPTR
0024 B50702            CJNE    A,AR7,?C0046
                                           ; SOURCE LINE # 332
                                           ; SOURCE LINE # 333
0027 8036              SJMP    ?C0110
                                           ; SOURCE LINE # 335
                                           ; SOURCE LINE # 336
                                           ; SOURCE LINE # 337
0029         ?C0046:
0029 900000      R     MOV     DPTR,#ucEventIndex
002C E0                MOVX    A,@DPTR
002D 04                INC     A
002E F0                MOVX    @DPTR,A
002F 80D5              SJMP    ?C0044
0031         ?C0045:
                                           ; SOURCE LINE # 340
0031 E4                CLR     A
0032 900000      R     MOV     DPTR,#ucEventIndex
0035 F0                MOVX    @DPTR,A
0036         ?C0050:
0036 900000      R     MOV     DPTR,#ucEventIndex
0039 120000      R     LCALL   L?0137
003C 504B              JNC     ?C0049
                                           ; SOURCE LINE # 341
                                           ; SOURCE LINE # 342
003E EF                MOV     A,R7
003F 120000      R     LCALL   L?0132
0042 E0                MOVX    A,@DPTR
0043 FF                MOV     R7,A
0044 5401              ANL     A,#01H
0046 7038              JNZ     ?C0052
                                           ; SOURCE LINE # 343
                                           ; SOURCE LINE # 344
0048 900000      R     MOV     DPTR,#ucEventIndex
004B E0                MOVX    A,@DPTR
004C FE                MOV     R6,A
004D 120000      R     LCALL   L?0132
0050 EF                MOV     A,R7
0051 4401              ORL     A,#01H
0053 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 345
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 75  

0054 900000      R     MOV     DPTR,#ucEventID
0057 120000      R     LCALL   L?0130
005A E0                MOVX    A,@DPTR
005B 5401              ANL     A,#01H
005D 4F                ORL     A,R7
005E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 346
005F         ?C0110:
005F 900000      R     MOV     DPTR,#usTime
0062 E0                MOVX    A,@DPTR
0063 FE                MOV     R6,A
0064 A3                INC     DPTR
0065 E0                MOVX    A,@DPTR
0066 FF                MOV     R7,A
0067 120000      R     LCALL   _MCUTimerCheckTimerEvent
006A 900000      R     MOV     DPTR,#usTime+01H
006D E0                MOVX    A,@DPTR
006E 2F                ADD     A,R7
006F FF                MOV     R7,A
0070 900000      R     MOV     DPTR,#usTime
0073 E0                MOVX    A,@DPTR
0074 900000      R     MOV     DPTR,#ucEventIndex
0077 120000      R     LCALL   L?0133
007A EE                MOV     A,R6
007B F0                MOVX    @DPTR,A
007C A3                INC     DPTR
007D EF                MOV     A,R7
007E F0                MOVX    @DPTR,A
007F 22                RET     
                                           ; SOURCE LINE # 348
                                           ; SOURCE LINE # 349
0080         ?C0052:
0080 900000      R     MOV     DPTR,#ucEventIndex
0083 E0                MOVX    A,@DPTR
0084 04                INC     A
0085 F0                MOVX    @DPTR,A
0086 020000      R     LJMP    ?C0050
                                           ; SOURCE LINE # 350
0089         ?C0049:
0089 22                RET     
             ; FUNCTION _MCUTimerReactiveTimerEvent (END)

             ; FUNCTION _UserInterfaceTimerEventProc (BEGIN)
                                           ; SOURCE LINE # 353
;---- Variable 'ucEventID' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 354
                                           ; SOURCE LINE # 356
0000 EF                MOV     A,R7
0001 120000      E     LCALL   ?C?CCASE
0004 0000        R     DW      ?C0055
0006 00                DB      00H
0007 0000        R     DW      ?C0056
0009 02                DB      02H
000A 0000        R     DW      ?C0059
000C 03                DB      03H
000D 0000        R     DW      ?C0062
000F 04                DB      04H
0010 0000        R     DW      ?C0063
0012 05                DB      05H
0013 0000        R     DW      ?C0064
0015 06                DB      06H
0016 0000        R     DW      ?C0065
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 76  

0018 07                DB      07H
0019 0000        R     DW      ?C0066
001B 08                DB      08H
001C 0000        R     DW      ?C0067
001E 09                DB      09H
001F 0000              DW      00H
0021 0000        R     DW      ?C0069
                                           ; SOURCE LINE # 357
                                           ; SOURCE LINE # 358
0023         ?C0055:
                                           ; SOURCE LINE # 360
0023 7BFF              MOV     R3,#0FFH
0025 7A00        R     MOV     R2,#HIGH ?SC_0
0027 7900        R     MOV     R1,#LOW ?SC_0
0029 120000      E     LCALL   _Printf
                                           ; SOURCE LINE # 361
002C E4                CLR     A
002D FD                MOV     R5,A
002E 7FE8              MOV     R7,#0E8H
0030 7E03              MOV     R6,#03H
0032 020000      R     LJMP    _MCUTimerActiveTimerEvent
                                           ; SOURCE LINE # 362
                                           ; SOURCE LINE # 363
0035         ?C0056:
                                           ; SOURCE LINE # 364
0035 900000      E     MOV     DPTR,#CameraVolt
0038 E0                MOVX    A,@DPTR
0039 C3                CLR     C
003A 9464              SUBB    A,#064H
003C 7480              MOV     A,#080H
003E 9480              SUBB    A,#080H
0040 5005              JNC     ?C0057
                                           ; SOURCE LINE # 365
                                           ; SOURCE LINE # 366
0042 E0                MOVX    A,@DPTR
0043 04                INC     A
0044 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 367
0045 8006              SJMP    ?C0058
0047         ?C0057:
                                           ; SOURCE LINE # 369
                                           ; SOURCE LINE # 370
0047 900000      E     MOV     DPTR,#CameraVolt
004A 7464              MOV     A,#064H
004C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 371
004D         ?C0058:
                                           ; SOURCE LINE # 372
                                           ; SOURCE LINE # 373
                                           ; SOURCE LINE # 374
004D 120000      R     LCALL   L?0139
0050 7A00        R     MOV     R2,#HIGH ?SC_3
0052 7900        R     MOV     R1,#LOW ?SC_3
                                           ; SOURCE LINE # 375
0054 8016              SJMP    ?C0111
                                           ; SOURCE LINE # 376
0056         ?C0059:
                                           ; SOURCE LINE # 378
0056 900000      E     MOV     DPTR,#CameraVolt
0059 E0                MOVX    A,@DPTR
005A 6004              JZ      ?C0060
                                           ; SOURCE LINE # 379
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 77  

                                           ; SOURCE LINE # 380
005C 14                DEC     A
005D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 381
005E 8005              SJMP    ?C0061
0060         ?C0060:
                                           ; SOURCE LINE # 383
                                           ; SOURCE LINE # 384
0060 E4                CLR     A
0061 900000      E     MOV     DPTR,#CameraVolt
0064 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 385
0065         ?C0061:
                                           ; SOURCE LINE # 386
                                           ; SOURCE LINE # 387
                                           ; SOURCE LINE # 388
0065 120000      R     LCALL   L?0139
0068 7A00        R     MOV     R2,#HIGH ?SC_18
006A 7900        R     MOV     R1,#LOW ?SC_18
006C         ?C0111:
006C 900000      E     MOV     DPTR,#CameraVolt
006F E0                MOVX    A,@DPTR
0070 FF                MOV     R7,A
0071 900000      E     MOV     DPTR,#?_Printf?BYTE+03H
0074 E4                CLR     A
0075 F0                MOVX    @DPTR,A
0076 A3                INC     DPTR
0077 EF                MOV     A,R7
0078 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 389
0079 8033              SJMP    ?C0117
                                           ; SOURCE LINE # 390
007B         ?C0062:
                                           ; SOURCE LINE # 391
007B 7F80              MOV     R7,#080H
007D 120000      E     LCALL   _MCU_SendCmdToDVR
                                           ; SOURCE LINE # 392
0080 7BFF              MOV     R3,#0FFH
0082 7A00        R     MOV     R2,#HIGH ?SC_33
0084 7900        R     MOV     R1,#LOW ?SC_33
0086         ?C0112:
                                           ; SOURCE LINE # 393
0086 8026              SJMP    ?C0117
                                           ; SOURCE LINE # 394
0088         ?C0063:
                                           ; SOURCE LINE # 395
0088 7BFF              MOV     R3,#0FFH
008A 7A00        R     MOV     R2,#HIGH ?SC_51
008C 7900        R     MOV     R1,#LOW ?SC_51
008E         ?C0113:
                                           ; SOURCE LINE # 396
008E 801E              SJMP    ?C0117
                                           ; SOURCE LINE # 397
0090         ?C0064:
                                           ; SOURCE LINE # 398
0090 7BFF              MOV     R3,#0FFH
0092 7A00        R     MOV     R2,#HIGH ?SC_74
0094 7900        R     MOV     R1,#LOW ?SC_74
0096         ?C0114:
                                           ; SOURCE LINE # 399
0096 8016              SJMP    ?C0117
                                           ; SOURCE LINE # 400
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 78  

0098         ?C0065:
                                           ; SOURCE LINE # 401
0098 7BFF              MOV     R3,#0FFH
009A 7A00        R     MOV     R2,#HIGH ?SC_91
009C 7900        R     MOV     R1,#LOW ?SC_91
009E         ?C0115:
                                           ; SOURCE LINE # 402
009E 800E              SJMP    ?C0117
                                           ; SOURCE LINE # 403
00A0         ?C0066:
                                           ; SOURCE LINE # 404
00A0 7BFF              MOV     R3,#0FFH
00A2 7A00        R     MOV     R2,#HIGH ?SC_104
00A4 7900        R     MOV     R1,#LOW ?SC_104
00A6         ?C0116:
                                           ; SOURCE LINE # 405
00A6 8006              SJMP    ?C0117
                                           ; SOURCE LINE # 406
00A8         ?C0067:
                                           ; SOURCE LINE # 407
00A8 7BFF              MOV     R3,#0FFH
00AA 7A00        R     MOV     R2,#HIGH ?SC_119
00AC 7900        R     MOV     R1,#LOW ?SC_119
00AE         ?C0117:
00AE 120000      E     LCALL   _Printf
                                           ; SOURCE LINE # 408
                                           ; SOURCE LINE # 409
                                           ; SOURCE LINE # 412
                                           ; SOURCE LINE # 544
00B1         ?C0069:
00B1 22                RET     
00B2         L?0139:
00B2 900000      E     MOV     DPTR,#CameraVolt
00B5 E0                MOVX    A,@DPTR
00B6 FF                MOV     R7,A
00B7 120000      E     LCALL   _SetAD5110Step
00BA 900000      E     MOV     DPTR,#CameraVolt
00BD E0                MOVX    A,@DPTR
00BE FD                MOV     R5,A
00BF 7F11              MOV     R7,#011H
00C1 7E00              MOV     R6,#00H
00C3 120000      E     LCALL   _WriteEEP
00C6 7BFF              MOV     R3,#0FFH
00C8 22                RET     
             ; FUNCTION _UserInterfaceTimerEventProc (END)

             ; FUNCTION _MCUTimerEventProc (BEGIN)
                                           ; SOURCE LINE # 546
;---- Variable 'enumEventID' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 547
                                           ; SOURCE LINE # 549
                                           ; SOURCE LINE # 550
                                           ; SOURCE LINE # 552
                                           ; SOURCE LINE # 553
                                           ; SOURCE LINE # 554
                                           ; SOURCE LINE # 742
0000         ?C0072:
0000 22                RET     
             ; FUNCTION _MCUTimerEventProc (END)

             ; FUNCTION SysTimerHandler (BEGIN)
                                           ; SOURCE LINE # 750
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 79  

                                           ; SOURCE LINE # 751
                                           ; SOURCE LINE # 752
0000 E4                CLR     A
0001 900000      R     MOV     DPTR,#ucTimerEventIndex
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 753
0005 A3                INC     DPTR
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 754
0007 A3                INC     DPTR
0008 F0                MOVX    @DPTR,A
0009 A3                INC     DPTR
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 756
000B 900000      R     MOV     DPTR,#ucTimerEventIndex
000E F0                MOVX    @DPTR,A
000F         ?C0073:
000F 900000      R     MOV     DPTR,#ucTimerEventIndex
0012 E0                MOVX    A,@DPTR
0013 120000      R     LCALL   L?0138
0016 5068              JNC     ?C0080
                                           ; SOURCE LINE # 757
                                           ; SOURCE LINE # 758
0018 120000      R     LCALL   MCUTimerGetTimerCounter
001B 900000      R     MOV     DPTR,#usPresentTime
001E EE                MOV     A,R6
001F F0                MOVX    @DPTR,A
0020 A3                INC     DPTR
0021 EF                MOV     A,R7
0022 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 760
0023 900000      R     MOV     DPTR,#ucTimerEventIndex
0026 E0                MOVX    A,@DPTR
0027 FF                MOV     R7,A
0028 120000      R     LCALL   _MCUTimerCheckEventValid
002B 504B              JNC     ?C0075
                                           ; SOURCE LINE # 761
                                           ; SOURCE LINE # 762
                                           ; SOURCE LINE # 763
                                           ; SOURCE LINE # 765
002D 900000      R     MOV     DPTR,#ucTimerEventIndex
0030 E0                MOVX    A,@DPTR
0031 FF                MOV     R7,A
0032 120000      R     LCALL   _MCUTimerGetEventTime
0035 D3                SETB    C
0036 900000      R     MOV     DPTR,#usPresentTime+01H
0039 E0                MOVX    A,@DPTR
003A 9F                SUBB    A,R7
003B 900000      R     MOV     DPTR,#usPresentTime
003E E0                MOVX    A,@DPTR
003F 9E                SUBB    A,R6
0040 4036              JC      ?C0075
                                           ; SOURCE LINE # 766
                                           ; SOURCE LINE # 767
0042 900000      R     MOV     DPTR,#ucTimerEventIndex
0045 E0                MOVX    A,@DPTR
0046 FF                MOV     R7,A
0047 120000      R     LCALL   _MCUTimerClrEventValid
                                           ; SOURCE LINE # 770
004A 900000      R     MOV     DPTR,#ucTimerEventIndex
004D E0                MOVX    A,@DPTR
004E FF                MOV     R7,A
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 80  

004F 120000      R     LCALL   _MCUTimerGetEventID
0052 900000      R     MOV     DPTR,#ucTimerEventID
0055 EF                MOV     A,R7
0056 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 772
0057 C3                CLR     C
0058 941C              SUBB    A,#01CH
005A 7480              MOV     A,#080H
005C 9480              SUBB    A,#080H
005E 5007              JNC     ?C0078
                                           ; SOURCE LINE # 773
                                           ; SOURCE LINE # 774
0060 E0                MOVX    A,@DPTR
0061 FF                MOV     R7,A
0062 120000      R     LCALL   _UserInterfaceTimerEventProc
                                           ; SOURCE LINE # 776
0065 8011              SJMP    ?C0075
                                           ; SOURCE LINE # 777
0067         ?C0078:
                                           ; SOURCE LINE # 779
0067 900000      R     MOV     DPTR,#ucTimerEventID
006A E0                MOVX    A,@DPTR
006B FF                MOV     R7,A
006C C3                CLR     C
006D 942E              SUBB    A,#02EH
006F 7480              MOV     A,#080H
0071 9480              SUBB    A,#080H
0073 5003              JNC     ?C0075
                                           ; SOURCE LINE # 780
                                           ; SOURCE LINE # 781
0075 120000      R     LCALL   _SysTimerEventProc
                                           ; SOURCE LINE # 783
                                           ; SOURCE LINE # 784
                                           ; SOURCE LINE # 787
                                           ; SOURCE LINE # 788
0078         ?C0075:
0078 900000      R     MOV     DPTR,#ucTimerEventIndex
007B E0                MOVX    A,@DPTR
007C 04                INC     A
007D F0                MOVX    @DPTR,A
007E 808F              SJMP    ?C0073
                                           ; SOURCE LINE # 790
0080         ?C0080:
0080 22                RET     
             ; FUNCTION SysTimerHandler (END)

             ; FUNCTION _SysTimerEventProc (BEGIN)
                                           ; SOURCE LINE # 797
;---- Variable 'enumEventID' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 798
                                           ; SOURCE LINE # 800
0000 EF                MOV     A,R7
0001 120000      E     LCALL   ?C?CCASE
0004 0000        R     DW      ?C0091
0006 1D                DB      01DH
0007 0000        R     DW      ?C0099
0009 1F                DB      01FH
000A 0000        R     DW      ?C0098
000C 20                DB      020H
000D 0000        R     DW      ?C0103
000F 21                DB      021H
0010 0000        R     DW      ?C0100
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 81  

0012 24                DB      024H
0013 0000        R     DW      ?C0082
0015 25                DB      025H
0016 0000        R     DW      ?C0083
0018 26                DB      026H
0019 0000        R     DW      ?C0084
001B 27                DB      027H
001C 0000        R     DW      ?C0085
001E 28                DB      028H
001F 0000        R     DW      ?C0087
0021 29                DB      029H
0022 0000        R     DW      ?C0088
0024 2A                DB      02AH
0025 0000        R     DW      ?C0089
0027 2B                DB      02BH
0028 0000        R     DW      ?C0086
002A 2C                DB      02CH
002B 0000        R     DW      ?C0090
002D 2D                DB      02DH
002E 0000              DW      00H
0030 0000        R     DW      ?C0107
                                           ; SOURCE LINE # 801
                                           ; SOURCE LINE # 802
0032         ?C0082:
                                           ; SOURCE LINE # 803
0032 7F25              MOV     R7,#025H
                                           ; SOURCE LINE # 804
0034 800E              SJMP    ?C0121
                                           ; SOURCE LINE # 805
0036         ?C0083:
                                           ; SOURCE LINE # 806
0036 7F26              MOV     R7,#026H
0038         ?C0118:
                                           ; SOURCE LINE # 807
0038 800A              SJMP    ?C0121
                                           ; SOURCE LINE # 808
003A         ?C0084:
                                           ; SOURCE LINE # 809
003A 7F27              MOV     R7,#027H
003C         ?C0119:
                                           ; SOURCE LINE # 810
003C 8006              SJMP    ?C0121
                                           ; SOURCE LINE # 811
003E         ?C0085:
                                           ; SOURCE LINE # 812
003E 7F28              MOV     R7,#028H
0040         ?C0120:
                                           ; SOURCE LINE # 813
0040 8002              SJMP    ?C0121
                                           ; SOURCE LINE # 814
0042         ?C0086:
                                           ; SOURCE LINE # 815
0042 7F2C              MOV     R7,#02CH
0044         ?C0121:
0044 020000      E     LJMP    _PowerLED
                                           ; SOURCE LINE # 816
                                           ; SOURCE LINE # 817
0047         ?C0087:
                                           ; SOURCE LINE # 818
0047 7F29              MOV     R7,#029H
0049 120000      E     LCALL   _PowerLED
                                           ; SOURCE LINE # 819
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 82  

004C 7D29              MOV     R5,#029H
                                           ; SOURCE LINE # 820
004E 8019              SJMP    ?C0124
                                           ; SOURCE LINE # 821
0050         ?C0088:
                                           ; SOURCE LINE # 822
0050 7F2A              MOV     R7,#02AH
0052 120000      E     LCALL   _PowerLED
                                           ; SOURCE LINE # 823
0055 7D2A              MOV     R5,#02AH
0057         ?C0122:
                                           ; SOURCE LINE # 824
0057 8010              SJMP    ?C0124
                                           ; SOURCE LINE # 825
0059         ?C0089:
                                           ; SOURCE LINE # 826
0059 7F2B              MOV     R7,#02BH
005B 120000      E     LCALL   _PowerLED
                                           ; SOURCE LINE # 827
005E 7D2B              MOV     R5,#02BH
0060         ?C0123:
                                           ; SOURCE LINE # 828
0060 8007              SJMP    ?C0124
                                           ; SOURCE LINE # 829
0062         ?C0090:
                                           ; SOURCE LINE # 830
0062 7F2D              MOV     R7,#02DH
0064 120000      E     LCALL   _PowerLED
                                           ; SOURCE LINE # 831
0067 7D2D              MOV     R5,#02DH
0069         ?C0124:
0069 7FFA              MOV     R7,#0FAH
006B 7E00              MOV     R6,#00H
                                           ; SOURCE LINE # 832
006D 020000      R     LJMP    ?C0128
                                           ; SOURCE LINE # 833
0070         ?C0091:
                                           ; SOURCE LINE # 834
0070 120000      E     LCALL   GetBatteryVoltage
0073 900000      E     MOV     DPTR,#g_stBatteryInfo+02H
0076 EE                MOV     A,R6
0077 F0                MOVX    @DPTR,A
0078 A3                INC     DPTR
0079 EF                MOV     A,R7
007A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 835
007B C3                CLR     C
007C EE                MOV     A,R6
007D 9401              SUBB    A,#01H
007F 5008              JNC     ?C0092
                                           ; SOURCE LINE # 836
0081 120000      R     LCALL   L?0145
0084 4403              ORL     A,#03H
0086 F0                MOVX    @DPTR,A
0087 802C              SJMP    ?C0093
0089         ?C0092:
                                           ; SOURCE LINE # 837
0089 120000      R     LCALL   L?0147
008C 9401              SUBB    A,#01H
008E 400D              JC      ?C0094
0090 EE                MOV     A,R6
0091 9402              SUBB    A,#02H
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 83  

0093 5008              JNC     ?C0094
                                           ; SOURCE LINE # 838
0095 120000      R     LCALL   L?0145
0098 4402              ORL     A,#02H
009A F0                MOVX    @DPTR,A
009B 8018              SJMP    ?C0093
009D         ?C0094:
                                           ; SOURCE LINE # 839
009D 120000      R     LCALL   L?0147
00A0 9402              SUBB    A,#02H
00A2 400D              JC      ?C0096
00A4 EE                MOV     A,R6
00A5 9403              SUBB    A,#03H
00A7 5008              JNC     ?C0096
                                           ; SOURCE LINE # 840
00A9 120000      R     LCALL   L?0146
00AC 4401              ORL     A,#01H
00AE F0                MOVX    @DPTR,A
00AF 8004              SJMP    ?C0093
00B1         ?C0096:
                                           ; SOURCE LINE # 842
00B1 120000      R     LCALL   L?0146
00B4 F0                MOVX    @DPTR,A
00B5         ?C0093:
                                           ; SOURCE LINE # 846
00B5 7F81              MOV     R7,#081H
00B7 120000      E     LCALL   _MCU_SendCmdToDVR
                                           ; SOURCE LINE # 847
00BA 7D1D              MOV     R5,#01DH
00BC 7F88              MOV     R7,#088H
00BE 7E13              MOV     R6,#013H
00C0         ?C0125:
                                           ; SOURCE LINE # 848
00C0 8062              SJMP    ?C0128
                                           ; SOURCE LINE # 849
00C2         ?C0098:
                                           ; SOURCE LINE # 850
00C2 7BFF              MOV     R3,#0FFH
00C4 7A00        R     MOV     R2,#HIGH ?SC_133
00C6 7900        R     MOV     R1,#LOW ?SC_133
00C8 120000      E     LCALL   _Printf
                                           ; SOURCE LINE # 851
00CB 900000      R     MOV     DPTR,#PSW_Flag
00CE 7401              MOV     A,#01H
00D0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 852
00D1 22                RET     
                                           ; SOURCE LINE # 853
00D2         ?C0099:
                                           ; SOURCE LINE # 854
00D2 7BFF              MOV     R3,#0FFH
00D4 7A00        R     MOV     R2,#HIGH ?SC_153
00D6 7900        R     MOV     R1,#LOW ?SC_153
00D8 120000      E     LCALL   _Printf
                                           ; SOURCE LINE # 855
00DB 120000      E     LCALL   GetBatteryBTH
00DE 900000      R     MOV     DPTR,#BatteryBTH
00E1 EE                MOV     A,R6
00E2 F0                MOVX    @DPTR,A
00E3 A3                INC     DPTR
00E4 EF                MOV     A,R7
00E5 F0                MOVX    @DPTR,A
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 84  

                                           ; SOURCE LINE # 856
00E6 7D1F              MOV     R5,#01FH
00E8 7F10              MOV     R7,#010H
00EA 7E27              MOV     R6,#027H
00EC         ?C0126:
                                           ; SOURCE LINE # 857
00EC 8036              SJMP    ?C0128
                                           ; SOURCE LINE # 858
00EE         ?C0100:
                                           ; SOURCE LINE # 859
00EE 900000      R     MOV     DPTR,#WDT_Echo_Count
00F1 E0                MOVX    A,@DPTR
00F2 04                INC     A
00F3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 860
00F4 E0                MOVX    A,@DPTR
00F5 C3                CLR     C
00F6 9403              SUBB    A,#03H
00F8 7480              MOV     A,#080H
00FA 9480              SUBB    A,#080H
00FC 5008              JNC     ?C0101
                                           ; SOURCE LINE # 861
                                           ; SOURCE LINE # 862
00FE 7D24              MOV     R5,#024H
0100 7F88              MOV     R7,#088H
0102 7E13              MOV     R6,#013H
0104         ?C0127:
                                           ; SOURCE LINE # 863
0104 801E              SJMP    ?C0128
0106         ?C0101:
                                           ; SOURCE LINE # 865
                                           ; SOURCE LINE # 866
0106 7BFF              MOV     R3,#0FFH
0108 7A00        R     MOV     R2,#HIGH ?SC_159
010A 7900        R     MOV     R1,#LOW ?SC_159
010C 020000      E     LJMP    _Printf
                                           ; SOURCE LINE # 867
                                           ; SOURCE LINE # 868
                                           ; SOURCE LINE # 869
010F         ?C0103:
                                           ; SOURCE LINE # 870
                                           ; SOURCE LINE # 871
010F 900000      E     MOV     DPTR,#g_stBatteryInfo
0112 E0                MOVX    A,@DPTR
0113 308505            JNB     P0_5,?C0104
                                           ; SOURCE LINE # 872
0116 4440              ORL     A,#040H
0118 F0                MOVX    @DPTR,A
0119 8003              SJMP    ?C0105
011B         ?C0104:
                                           ; SOURCE LINE # 874
011B 54BF              ANL     A,#0BFH
011D F0                MOVX    @DPTR,A
011E         ?C0105:
                                           ; SOURCE LINE # 876
011E 7D1D              MOV     R5,#01DH
0120 7F88              MOV     R7,#088H
0122 7E13              MOV     R6,#013H
0124         ?C0128:
0124 120000      R     LCALL   _MCUTimerActiveTimerEvent
                                           ; SOURCE LINE # 878
                                           ; SOURCE LINE # 879
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 85  

                                           ; SOURCE LINE # 880
                                           ; SOURCE LINE # 881
                                           ; SOURCE LINE # 882
                                           ; SOURCE LINE # 926
0127         ?C0107:
0127 22                RET     
             ; FUNCTION _SysTimerEventProc (END)

C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 86  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


_SCALER_TIMER_EVENT_DP_LINK_STATUS_IRQ  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_GO_TO_POWER_SAVING .  E_CONST  -----  U_CHAR   -----  1
POWER_SEL_SAVING . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_AUDIO_LOAD_STABLE_  E_CONST  -----  U_CHAR   -----  1
EnumBatteryStatus. . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_START. . . . . . .  E_CONST  -----  U_CHAR   -----  1
EnumModeAction . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
DWORD. . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_LONG   -----  4
_POWER_ACTION_NORMAL_TO_NOSUPPORT_PS .  E_CONST  -----  U_CHAR   -----  1
P4 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E8H  1
_SYSTEM_TIMER_EVENT_JUDGE_BTH_STATE. .  E_CONST  -----  U_CHAR   -----  1
_MCUTimerEventProc . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  enumEventID. . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_MCUTimerClrEventValid . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ucEventIndex . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_BATT_STATUS_CAPACITY_HIGH . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_DISABLE. . . . .  E_CONST  -----  U_CHAR   -----  1
SysTimerHandler. . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ucTimerEventIndex. . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
  ucTimerEventID . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0001H  1
  usPresentTime. . . . . . . . . . . .  AUTO     XDATA  U_INT    0002H  2
_BATT_STATUS_STOP_CHARGE . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_RED_OFF. . . . . .  E_CONST  -----  U_CHAR   -----  1
g_bNotifyTimer0Int . . . . . . . . . .  PUBLIC   DATA   BIT      0000H  1
_SYSTEM_TIMER_EVENT_SOURCE_CLEAR_DETEC  E_CONST  -----  U_CHAR   -----  1
BATERY_10. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_ABNORMAL_MODE . . . . . .  E_CONST  -----  U_CHAR   -----  1
EnumPowerAction. . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_SHOW_NO_CABLE. .  E_CONST  -----  U_CHAR   -----  1
_MODE_STATUS_NOSIGNAL. . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_STATUS_NOSUPPORT . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_ACTION_RESET_TO_DISPLAY_SETTING.  E_CONST  -----  U_CHAR   -----  1
BATERY_50. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
POWER_SEL_OFF. . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
BATERY_25. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_CAPACITY_LEVEL1 . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_ACTION_NO_RESET_MODE . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_KEY_SCAN_READY . . .  E_CONST  -----  U_CHAR   -----  1
size_t . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
_BATT_STATUS_CAPACITY_LEVEL2 . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_GRN_RED_ON . . . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_CAPACITY_LEVEL3 . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_ACTION_RESET_TO_FACTORY_MODE . .  E_CONST  -----  U_CHAR   -----  1
_POWER_ACTION_NOSUPPORT_PS_TO_OFF. . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_CAPACITY_LEVEL4 . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_GRN_OFF. . . . . .  E_CONST  -----  U_CHAR   -----  1
P0_5 . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0085H  1
BATERY_75. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
EnumMCUTimerEventID. . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_MCUTimerDelayXms. . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  usNum. . . . . . . . . . . . . . . .  * REG *  DATA   U_INT    0006H  2
_BATT_STATUS_TEMP_NORMAL . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_NR_DETECTION_FINIS  E_CONST  -----  U_CHAR   -----  1
_POWER_STATUS_AC_ON. . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
g_usTimerCounter . . . . . . . . . . .  PUBLIC   XDATA  U_INT    0000H  2
_SetAD5110Step . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_MCU_SendCmdToDVR. . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 87  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


TEMP_State . . . . . . . . . . . . . .  * TAG *  -----  ENUM     -----  -----
_SCALER_TIMER_EVENT_END. . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_SHOW_BURN_IN . . . .  E_CONST  -----  U_CHAR   -----  1
StructBatteryInfoType. . . . . . . . .  TYPEDEF  -----  STRUCT   -----  4
  b5BatteryStatus. . . . . . . . . . .  MEMBER   -----  FIELD    0000H  5.0
  b1NoBattery. . . . . . . . . . . . .  MEMBER   -----  FIELD    0000H  1.5
  b1AC_PLUG. . . . . . . . . . . . . .  MEMBER   -----  FIELD    0000H  1.6
  b3BTHStatus. . . . . . . . . . . . .  MEMBER   -----  FIELD    0001H  3.0
  b1BatteryCapacityLow . . . . . . . .  MEMBER   -----  FIELD    0001H  1.3
  b1BatteryAbnormal. . . . . . . . . .  MEMBER   -----  FIELD    0001H  1.4
  b2BatteryChargeStatus. . . . . . . .  MEMBER   -----  FIELD    0001H  2.5
  BatteryCapacity. . . . . . . . . . .  MEMBER   -----  U_INT    0002H  2
_USER_TIMER_EVENT_OSD_ENCODER_DEVIATIO  E_CONST  -----  U_CHAR   -----  1
g_stBatteryInfo. . . . . . . . . . . .  EXTERN   XDATA  STRUCT   -----  4
_SYSTEM_TIMER_EVENT_RED_BLINK. . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_DP_HOTPLUG_ASSERTED E_CONST  -----  U_CHAR   -----  1
_MCUTimerGetEventID. . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ucEventIndex . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_POWER_STATUS_NOSUPPORT_SAVING . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_JUDGE_PSW_STATE. .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_END. . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_POWER_ACTION_NONE . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_POWER_ACTION_AC_ON_TO_NORMAL. . . . .  E_CONST  -----  U_CHAR   -----  1
_MCUTimerGetEventTime. . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ucEventIndex . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_MODE_ACTION_RESET_TO_DISPLAY_SETTING_  E_CONST  -----  U_CHAR   -----  1
StructTimerEventTableType. . . . . . .  TYPEDEF  -----  STRUCT   -----  3
  b1EventValid . . . . . . . . . . . .  MEMBER   -----  FIELD    0000H  1.0
  b7EventID. . . . . . . . . . . . . .  MEMBER   -----  FIELD    0000H  7.1
  usTime . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0001H  2
_USER_TIMER_EVENT_PANEL_BACKLIGHT_ON .  E_CONST  -----  U_CHAR   -----  1
EnumModeStatus . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_CHECK. . . . . . . .  E_CONST  -----  U_CHAR   -----  1
BRIGHTNESS_NORMAL. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_ACTION_RESET_TO_SEARCH . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_GRN_BLINK. . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_ACTION_RESET_TO_POWER_SAVING . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_DVR_REBOOT . . .  E_CONST  -----  U_CHAR   -----  1
BATERY_State . . . . . . . . . . . . .  * TAG *  -----  ENUM     -----  -----
BATERY_AC. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_MHL_D0_READY_TO_TR  E_CONST  -----  U_CHAR   -----  1
_MCUTimerReactiveTimerEvent. . . . . .  PUBLIC   CODE   PROC     0000H  -----
  usTime . . . . . . . . . . . . . . .  AUTO     XDATA  U_INT    0000H  2
  ucEventID. . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0002H  1
  ucEventIndex . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0003H  1
_SCALER_TIMER_EVENT_MHL_D1_READY_TO_TR  E_CONST  -----  U_CHAR   -----  1
EnumPowerStatus. . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
TEMP_OK. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_PANEL_USED_TIMER . .  E_CONST  -----  U_CHAR   -----  1
_POWER_ACTION_AC_ON_TO_OFF . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_JUDGE_WDT_ECHO . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_LOW_CHARGE. . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_JUDGE_POWER_STATE.  E_CONST  -----  U_CHAR   -----  1
BYTE . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
BatteryVoltage . . . . . . . . . . . .  PUBLIC   XDATA  U_INT    0002H  2
_abs . . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
TEMP_Alarm1. . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 88  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


_MODE_ACTION_NONE. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
g_stTimerEvent . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0004H  24
TEMP_Alarm2. . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_TMDS_HDMI_PACKET_D  E_CONST  -----  U_CHAR   -----  1
EnumSystemTimerEventID . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_LED_POWER_SAVING . .  E_CONST  -----  U_CHAR   -----  1
BATERY_100 . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_STATUS_INITIAL . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_ACTION_RESET_TO_POWER_OFF. . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_MHL_D0_ACTIVE_VBUS  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_JUDGE_DVR_COMM . .  E_CONST  -----  U_CHAR   -----  1
WORD . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
WDT_Echo_Count . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   001CH  1
_SCALER_TIMER_EVENT_MHL_D1_ACTIVE_VBUS  E_CONST  -----  U_CHAR   -----  1
BatteryBTH . . . . . . . . . . . . . .  PUBLIC   XDATA  U_INT    001DH  2
_BATT_STATUS_TEMP_LOW. . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_AC_MODE . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_PHASE_CNT_CHECK. .  E_CONST  -----  U_CHAR   -----  1
_MCUTimerCancelTimerEvent. . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ucEventID. . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
  ucEventIndex . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0006H  1
_USER_TIMER_EVENT_HLWIN_TYPE5_MOVE . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_GET_MCU_VERSION.  E_CONST  -----  U_CHAR   -----  1
BRIGHTNESS_MIN . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_POWER_ACTION_NORMAL_TO_PS . . . . . .  E_CONST  -----  U_CHAR   -----  1
_POWER_ACTION_PS_TO_NORMAL . . . . . .  E_CONST  -----  U_CHAR   -----  1
BRIGHTNESS_MAX . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
MCUTimerInitialTimerEvent. . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ucTimerEventCnt. . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
StructModeInfoType . . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  2
  b5ModeState. . . . . . . . . . . . .  MEMBER   -----  FIELD    0000H  5.0
  b1DisplaySettingReady. . . . . . . .  MEMBER   -----  FIELD    0000H  1.5
  b1TimingConfirm. . . . . . . . . . .  MEMBER   -----  FIELD    0000H  1.6
  b1ModeStateChanged . . . . . . . . .  MEMBER   -----  FIELD    0000H  1.7
  b4ModeResetFlag. . . . . . . . . . .  MEMBER   -----  FIELD    0001H  4.0
  b1NoWaitForActive. . . . . . . . . .  MEMBER   -----  FIELD    0001H  1.4
  b1ActiveReady. . . . . . . . . . . .  MEMBER   -----  FIELD    0001H  1.5
_USER_TIMER_EVENT_OSD_DISTANCE_RESET .  E_CONST  -----  U_CHAR   -----  1
_MCUTimerCheckEventValid . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ucEventIndex . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_SCALER_TIMER_EVENT_PHASE_CALIBRATION.  E_CONST  -----  U_CHAR   -----  1
_POWER_STATUS_NONE . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_END. . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_STATUS_FACTORY . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_STATUS_DISPLAY_SETTING . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_RED_ON . . . . . .  E_CONST  -----  U_CHAR   -----  1
Register . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_JUDGE_AC_MODE. . .  E_CONST  -----  U_CHAR   -----  1
StructPowerInfoType. . . . . . . . . .  TYPEDEF  -----  STRUCT   -----  2
  b4PowerAction. . . . . . . . . . . .  MEMBER   -----  FIELD    0000H  4.0
  b4PowerStatus. . . . . . . . . . . .  MEMBER   -----  FIELD    0000H  4.4
  b1GDIIsolationFlag . . . . . . . . .  MEMBER   -----  FIELD    0001H  1.0
  b1TopIsolationFlag . . . . . . . . .  MEMBER   -----  FIELD    0001H  1.1
  b1AnalogIsolationFlag. . . . . . . .  MEMBER   -----  FIELD    0001H  1.2
_USER_TIMER_EVENT_OSD_MCU_ENTRY_SLEEP_  E_CONST  -----  U_CHAR   -----  1
_MODE_ACTION_RESET_TO_NOSIGNAL . . . .  E_CONST  -----  U_CHAR   -----  1
_MODE_ACTION_RESET_TO_NOSUPPORT. . . .  E_CONST  -----  U_CHAR   -----  1
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 89  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


_SCALER_TIMER_EVENT_COUNT. . . . . . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_START_CHARGE. . . . . . .  E_CONST  -----  U_CHAR   -----  1
POWER_SEL_ON . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_JUDGE_BATT_STATE .  E_CONST  -----  U_CHAR   -----  1
EnumUserTimerEventID . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_POWER_ACTION_PS_TO_OFF. . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_COUNT. . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_START. . . . . . .  E_CONST  -----  U_CHAR   -----  1
_MCUTimerActiveTimerEvent. . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  usTime . . . . . . . . . . . . . . .  AUTO     XDATA  U_INT    0000H  2
  ucEventID. . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0002H  1
  ucEventIndex . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0003H  1
_SYSTEM_TIMER_EVENT_GRN_ON . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_JUDGE_TW8836_COMM.  E_CONST  -----  U_CHAR   -----  1
_MCUTimerCheckTimerEvent . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  usTime . . . . . . . . . . . . . . .  AUTO     XDATA  U_INT    0000H  2
  ucTimerEventCnt. . . . . . . . . . .  AUTO     XDATA  U_CHAR   0002H  1
  usPresentTime. . . . . . . . . . . .  AUTO     XDATA  U_INT    0003H  2
PSW_Flag . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   001FH  1
_SCALER_TIMER_EVENT_DP_HDCP_LONG_HOTPL  E_CONST  -----  U_CHAR   -----  1
GetBatteryVoltage. . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
RegisterInfo . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  6
  Min. . . . . . . . . . . . . . . . .  MEMBER   -----  INT      0000H  2
  Max. . . . . . . . . . . . . . . . .  MEMBER   -----  INT      0002H  2
  Default. . . . . . . . . . . . . . .  MEMBER   -----  INT      0004H  2
_BATT_STATUS_CAPACITY_LOW. . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_DO_AUTO_COLOR. . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_START. . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_UserInterfaceTimerEventProc . . . . .  PUBLIC   CODE   PROC     0000H  -----
  ucEventID. . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_POWER_ACTION_NOSUPPORT_PS_TO_PS . . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_NO_BATT . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_MHL_D0_RECONNECT_1K E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_DVR_SHUTDOWN . .  E_CONST  -----  U_CHAR   -----  1
_MODE_STATUS_NONE. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_MHL_D1_RECONNECT_1K E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_CAMERA_VOLTAGE_DECE_CONST  -----  U_CHAR   -----  1
GetBatteryBTH. . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
BRIGHTNESS_STATE . . . . . . . . . . .  * TAG *  -----  ENUM     -----  -----
_POWER_STATUS_SAVING . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_KEY_REPEAT_ENABLE. .  E_CONST  -----  U_CHAR   -----  1
_SysTimerEventProc . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  enumEventID. . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
_POWER_STATUS_NORMAL . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_NONE. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_GRN_ON_RED_BLINK .  E_CONST  -----  U_CHAR   -----  1
_PowerLED. . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_MODE_STATUS_SEARCH. . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_POWER_STATUS_SAVING_BATTERY_MODE. . .  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_GRN_RED_BLINK. . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_PANEL_POWER_OFF. . .  E_CONST  -----  U_CHAR   -----  1
_POWER_STATUS_NORMAL_BATTERY_MODE. . .  E_CONST  -----  U_CHAR   -----  1
_MODE_STATUS_POWER_SAVING. . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_STANDBY_MODE . . . .  E_CONST  -----  U_CHAR   -----  1
_WriteEEP. . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_USER_TIMER_EVENT_FACTORY_MODE . . . .  E_CONST  -----  U_CHAR   -----  1
LongRegisterInfo . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  6
C51 COMPILER V9.60.0.0   SYSTIMER                                                          03/02/2020 12:07:34 PAGE 90  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


  Min. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0000H  2
  Max. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0002H  2
  Default. . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0004H  2
_MODE_STATUS_ACTIVE. . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_TEMP_HIGH . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_DCC_HISTOGRAM_THD_  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_CAMERA_VOLTAGE_INCE_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_SHOW_POWER_SAVING E_CONST  -----  U_CHAR   -----  1
_BATT_STATUS_FAST_CHARGE . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_DISPLAY_INFO . . . .  E_CONST  -----  U_CHAR   -----  1
_POWER_STATUS_NORMAL_NO_MATTERY_MODE .  E_CONST  -----  U_CHAR   -----  1
POWER_STATE. . . . . . . . . . . . . .  * TAG *  -----  ENUM     -----  -----
_POWER_STATUS_OFF. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_OSD_SHOW_NO_SIGNAL .  E_CONST  -----  U_CHAR   -----  1
CameraVolt . . . . . . . . . . . . . .  EXTERN   XDATA  U_CHAR   -----  1
_SCALER_TIMER_EVENT_TMDS_VIDEO_DETECT.  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_LIGHT_SENSER_ON. . .  E_CONST  -----  U_CHAR   -----  1
_Printf. . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
MCUTimerGetTimerCounter. . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  usPresentTime. . . . . . . . . . . .  AUTO     XDATA  U_INT    0000H  2
_SCALER_TIMER_EVENT_D0_PORT_DIGITAL_SW  E_CONST  -----  U_CHAR   -----  1
_USER_TIMER_EVENT_BURN_IN_ON . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_D1_PORT_DIGITAL_SW  E_CONST  -----  U_CHAR   -----  1
_MODE_STATUS_POWER_OFF . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_MHL_D0_READY_TO_RE  E_CONST  -----  U_CHAR   -----  1
_SYSTEM_TIMER_EVENT_COUNT. . . . . . .  E_CONST  -----  U_CHAR   -----  1
_POWER_ACTION_NORMAL_TO_OFF. . . . . .  E_CONST  -----  U_CHAR   -----  1
_POWER_ACTION_OFF_TO_NORMAL. . . . . .  E_CONST  -----  U_CHAR   -----  1
_SCALER_TIMER_EVENT_MHL_D1_READY_TO_RE  E_CONST  -----  U_CHAR   -----  1


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1397    ----
   CONSTANT SIZE    =    187    ----
   XDATA SIZE       =     32      19
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
